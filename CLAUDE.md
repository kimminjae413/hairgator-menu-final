# HAIRGATOR ì±—ë´‡ - Claude ì‘ì—… ê°€ì´ë“œ

---

## âš ï¸ AI ì‘ì—… ê·œì¹™ (í•„ë…!)

### ğŸ”´ ë¶ˆí™•ì‹¤ì„± í”„ë¡œí† ì½œ

Claudeê°€ ë‹¤ìŒ ìƒí™©ì—ì„œëŠ” **ë°˜ë“œì‹œ** "ì¶”ì¸¡ì…ë‹ˆë‹¤" ë˜ëŠ” "í™•ì‹¤í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤"ë¼ê³  **ë¨¼ì €** ë§í•´ì•¼ í•¨:

| ìƒí™© | ë°˜ë“œì‹œ í•´ì•¼ í•  ë§ |
|------|------------------|
| ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬/SDK ë‚´ë¶€ ë™ì‘ | "SDK ë‚´ë¶€ ë™ì‘ì€ ì¶”ì¸¡ì…ë‹ˆë‹¤. í™•ì¸í•˜ë ¤ë©´..." |
| ì§ì ‘ í™•ì¸í•˜ì§€ ì•Šì€ íŒŒì¼/ì½”ë“œ | "íŒŒì¼ì´ ìˆëŠ”ì§€ í™•ì¸í•´ë³´ê² ìŠµë‹ˆë‹¤" â†’ ls/Read ì‹¤í–‰ |
| API ë™ì‘ ë°©ì‹ (ë¬¸ì„œ ë¯¸í™•ì¸) | "ë¬¸ì„œë¥¼ í™•ì¸í•˜ì§€ ì•Šì€ ì¶”ì¸¡ì…ë‹ˆë‹¤" |
| ì—ëŸ¬ ì›ì¸ ë¶„ì„ | "ê°€ëŠ¥í•œ ì›ì¸ì…ë‹ˆë‹¤. í™•ì‹¤íˆ í•˜ë ¤ë©´ í…ŒìŠ¤íŠ¸ í•„ìš”" |

**ê¸ˆì§€ íŒ¨í„´:**
```
âŒ "ì›ì¸ì„ ì°¾ì•˜ìŠµë‹ˆë‹¤" (í…ŒìŠ¤íŠ¸ ì—†ì´)
âŒ "ì´ íŒŒì¼ì´ ìˆìŠµë‹ˆë‹¤" (ls ì—†ì´)
âŒ "ì´ê²Œ ë¬¸ì œì…ë‹ˆë‹¤" (ê²€ì¦ ì—†ì´)
âŒ "~í•˜ë©´ ë©ë‹ˆë‹¤" (í™•ì‹  ì—†ì´)
```

**í•„ìˆ˜ íŒ¨í„´:**
```
âœ… "ì¶”ì¸¡ì…ë‹ˆë‹¤. í™•ì¸í•˜ë ¤ë©´..."
âœ… "~ì¼ ê°€ëŠ¥ì„±ì´ ìˆìŠµë‹ˆë‹¤. ê²€ì¦ ë°©ë²•ì€..."
âœ… "í™•ì¸í•´ë³´ê² ìŠµë‹ˆë‹¤" â†’ ì‹¤ì œ ëª…ë ¹ ì‹¤í–‰ â†’ ê²°ê³¼ ê³µìœ 
âœ… "í™•ì‹¤í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. í…ŒìŠ¤íŠ¸ê°€ í•„ìš”í•©ë‹ˆë‹¤"
```

---

### ğŸ”´ ë³€ê²½ ë²”ìœ„ ì œí•œ ê·œì¹™

#### ë””ìì¸/ìŠ¤íƒ€ì¼ ë³€ê²½ ìš”ì²­ ì‹œ:
- âœ… CSS, ìƒ‰ìƒ, í°íŠ¸, ë ˆì´ì•„ì›ƒë§Œ ìˆ˜ì •
- âŒ JavaScript ë¡œì§ ìˆ˜ì • ê¸ˆì§€
- âŒ ê¸°ì¡´ í•¨ìˆ˜ ë™ì‘ ë³€ê²½ ê¸ˆì§€
- âŒ "ã¤ã„ã§ã« ì´ê²ƒë„ ê°œì„ í–ˆìŠµë‹ˆë‹¤" ê¸ˆì§€

#### ë²„ê·¸ ìˆ˜ì • ìš”ì²­ ì‹œ:
- âœ… í•´ë‹¹ ë²„ê·¸ë§Œ ìˆ˜ì •
- âŒ ì£¼ë³€ ì½”ë“œ ë¦¬íŒ©í† ë§ ê¸ˆì§€
- âŒ "ë” ì¢‹ì•„ ë³´ì—¬ì„œ" ë³€ê²½ ê¸ˆì§€

#### ëª¨ë“  ë³€ê²½ ì „ ë°˜ë“œì‹œ:
1. **"ì´ íŒŒì¼ë“¤ì„ ìˆ˜ì •í•˜ë ¤ê³  í•©ë‹ˆë‹¤: [ëª©ë¡]"** ë¨¼ì € ì•Œë¦¼
2. **ë¡œì§ ë³€ê²½ì´ í•„ìš”í•˜ë©´** ë¨¼ì € ë¬¼ì–´ë³´ê¸°
3. **ì‚¬ìš©ì ìŠ¹ì¸ í›„** ì§„í–‰

#### ê¸ˆì§€ í–‰ë™:
```
âŒ ìš”ì²­í•˜ì§€ ì•Šì€ íŒŒì¼ ìˆ˜ì •
âŒ ìš”ì²­í•˜ì§€ ì•Šì€ ë¦¬íŒ©í† ë§
âŒ ìš”ì²­í•˜ì§€ ì•Šì€ "ê°œì„ "
âŒ ê´€ë ¨ ì—†ëŠ” ì½”ë“œ ì •ë¦¬
```

---

### ğŸ”´ ê²€ì¦ í•„ìˆ˜ ì‚¬í•­

| ì£¼ì¥í•˜ê¸° ì „ | ë°˜ë“œì‹œ í•´ì•¼ í•  ê²ƒ |
|------------|------------------|
| "íŒŒì¼ì´ ìˆë‹¤" | `ls` ë˜ëŠ” `Read` ì‹¤í–‰ |
| "ì´ ì½”ë“œê°€ ë¬¸ì œë‹¤" | ì‹¤ì œ ì½”ë“œ ì½ê³  í™•ì¸ |
| "í…ŒìŠ¤íŠ¸ í†µê³¼í•œë‹¤" | ì‹¤ì œ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ |
| "ë¹Œë“œ ëœë‹¤" | ì‹¤ì œ ë¹Œë“œ ëª…ë ¹ ì‹¤í–‰ |
| "ì´ APIê°€ í˜¸ì¶œëœë‹¤" | ë¡œê·¸ ë˜ëŠ” ì½”ë“œì—ì„œ í™•ì¸ |

---

## ğŸš¨ í˜„ì¬ ì•± ë²„ì „ (2026-01-18 ì—…ë°ì´íŠ¸)

| í”Œë«í¼ | ìŠ¤í† ì–´ ì œì¶œ | ìµœì‹  ë¹Œë“œ |
|--------|------------|----------|
| **Android** | v73 | v86 (ìŠ¤í”Œë˜ì‹œ í™”ë©´ ì¶”ê°€) |
| **iOS** | v76 | v115 (iPad InAppWebView ì§€ì›) |

### ë¹Œë“œ íŒŒì¼ ê²½ë¡œ
- **APK**: `D:\hairgator_dev\hairgator_flutter_app\build\app\outputs\flutter-apk\app-release.apk`
- **AAB**: `D:\hairgator_dev\hairgator_flutter_app\build\app\outputs\bundle\release\app-release.aab`

---

## ğŸ“‹ ë²„ì „ íˆìŠ¤í† ë¦¬

| ë²„ì „ | ìƒíƒœ | ë‚´ìš© |
|------|------|------|
| v115 | ğŸ”„ í…ŒìŠ¤íŠ¸ ì¤‘ | iPad InAppWebView + JavaScript Channel ë¸Œë¦¿ì§€ ì™„ì „ êµ¬í˜„ |
| v114 | âœ… iPhone Pro/Biz ì‘ë™ | buyNonConsumable ìˆ˜ì • (Non-Renewing Subscriptionìš©) |
| v113 | âŒ ì‹¤íŒ¨ | buyConsumable â†’ buyNonConsumable ë³€ê²½ ì‹œë„ |
| v112 | ğŸ”„ í…ŒìŠ¤íŠ¸ ì¤‘ | v107 ì½”ë“œë¡œ ë¡¤ë°± (iPhone ê²°ì œ ë³µì› ì‹œë„) |
| v111 | âŒ iPhone+iPad ì•ˆë¨ | IAP ìƒì„¸ ë¡œê·¸ ì¶”ê°€ (buyConsumable trueì¸ë° ê²°ì œ íŒì—… ì•ˆ ëœ¸) |
| v110 | âŒ iPhone+iPad ì•ˆë¨ | ë‹¨ê³„ë³„ ìŠ¤ë‚µë°” ë””ë²„ê·¸ (1~6ë²ˆ trueê¹Œì§€ ë‚˜ì˜¤ê³  ë) |
| v109 | âŒ iPhone+iPad ì•ˆë¨ | Alert ì œê±°, ìŠ¤ë‚µë°”ë¡œ ë””ë²„ê·¸ í‘œì‹œ |
| v108 | âŒ iPhone+iPad ì•ˆë¨ | _runJavaScript í—¬í¼ ì¶”ê°€ (âš ï¸ iPhone ì½”ë“œ ê±´ë“œë ¤ì„œ ë§ê°€ì§!) |
| v107 | âœ… iPhone ì‘ë™, âŒ iPad ì•ˆë¨ | iPad ì „ìš© flutter_inappwebview ì ìš© (JS Channel ë¶€ë¶„ ì„±ê³µ) |
| v106 | ì‹¤íŒ¨ | Mobile User-Agent ê°•ì œ ì„¤ì • (UA ë°”ë€Œì—ˆìœ¼ë‚˜ ì½œë°± ì•ˆë¨) |
| v105 | ì‹¤íŒ¨ | Platform.isIOS ì²´í¬ ì œê±° |
| v104 | ì‹¤íŒ¨ | async ì œê±° + alert ë””ë²„ê·¸ |
| v103 | ì‹¤íŒ¨ | ì›¹ì— ë””ë²„ê·¸ ì •ë³´ ì „ì†¡ ì¶”ê°€ |
| v102 | ì‹¤íŒ¨ | _handleIAPRequest async + await |
| v100 | ë¹Œë“œë¨ | AI ê¸°ëŠ¥ í”Œëœ ì²´í¬ ë¡œì§ ê°œì„  + ë¬´ë£Œ í”Œëœ ë²„íŠ¼ ìˆ¨ê¹€ |
| v98 | ë¹Œë“œë¨ | v94 ì½”ë“œë¡œ ë³µì› |
| v94 | iPhone ì‘ë™ | restored êµ¬ë§¤ ë¬´ì‹œ ì¶”ê°€ |
| v93 | ë¹Œë“œë¨ | StoreKit 2 JWS serverVerificationData ì‚¬ìš© |
| v86 | Android | ìŠ¤í”Œë˜ì‹œ í™”ë©´ ì¶”ê°€ (flutter_native_splash) |
| v85 | ë¹Œë“œë¨ | webview_flutter 4.13.0 ì—…ë°ì´íŠ¸ (iOS 18.2 í´ë¦­ ìˆ˜ì •) |
| v84 | ë¹Œë“œë¨ | Apple ë¡œê·¸ì¸ accessToken ìˆ˜ì • |
| v78 | ìŠ¤í† ì–´ ì œì¶œë¨ | iOS bfcache ìŠ¤í”¼ë„ˆ ë¬´í•œí‘œì‹œ ìˆ˜ì • (ì£¼ê¸°ì  JS ì£¼ì…) |
| v76 | ìŠ¤í† ì–´ ì œì¶œë¨ | ë””ë²„ê·¸ ë²„íŠ¼/ì½˜ì†” UI ì œê±° |
| v75 | iOS ì œì¶œë¨ | login.html ë¦¬ë‹¤ì´ë ‰íŠ¸ ê°ì§€ |
| v74 | iOS ì œì¶œë¨ | WebView ì½˜ì†” ë¡œê·¸ ìº¡ì²˜ |
| v73 | Android ì œì¶œë¨ | ë„¤ì´í‹°ë¸Œ ë¡œê·¸ì¸ ì•½ê´€ ë™ì˜ |
| v72 | iOS | iOS Keychain ì„¸ì…˜ ì •ë¦¬ |
| v62 | ë ˆê±°ì‹œ | permission_handler + WebView ê¶Œí•œ |

### âš ï¸ v77ì€ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ!
- v77: Flutterì—ì„œ ìŠ¤í¬ë¡¤ ë¬¸ì œ í•´ê²° ì‹œë„ (VerticalDragGestureRecognizer ë³€ê²½)
- **ê²°ê³¼**: ë¶ˆí•„ìš” - ìŠ¤í¬ë¡¤ ë¬¸ì œëŠ” **ì›¹ ì½”ë“œ(menu.js)ì—ì„œ í•´ê²°ë¨**
- v77 ìŠ¤í‚µ â†’ v78ë¡œ ì§„í–‰

### âš ï¸ v95~v97 ë¬¸ì œ ë°œìƒ!
- v95: `_handleIAPRequest` asyncë¡œ ë³€ê²½ + ìƒí’ˆ ë¡œë“œ ì²´í¬ ì¶”ê°€
- v96: `TapGestureRecognizer` ì¶”ê°€
- v97: `EagerGestureRecognizer`ë¡œ ë³€ê²½
- **ê²°ê³¼**: WebView ë²„íŠ¼ í´ë¦­ì´ ì•„ì˜ˆ ì•ˆ ë¨ (JS ì‹¤í–‰ ì•ˆ ë¨)
- **í•´ê²°**: v94 ì½”ë“œë¡œ ë³µì› â†’ v98

### v108~v113 ë¬¸ì œ ì •ë¦¬ (2026-01-18 í•´ê²°ë¨)

**v108~v111: iPhone+iPad ëª¨ë‘ ê²°ì œ ì•ˆë¨**
- ì›ì¸: `_runJavaScript` í—¬í¼ ì¶”ê°€ë¡œ iPhone ì½”ë“œ ë§ê°€ì§
- í•´ê²°: v112ì—ì„œ v107 ì½”ë“œë¡œ ë¡¤ë°±

**v112~v113: Basic í”Œëœë§Œ êµ¬ë§¤ ì•ˆë¨**
- ì›ì¸: `buyConsumable()` ì‚¬ìš© (Non-Renewing Subscriptionì— ë¶€ì í•©)
- í•´ê²°: v114ì—ì„œ `buyNonConsumable()` ë¡œ ìˆ˜ì •

**v114: iPhone Pro/Business ì •ìƒ, iPad ì•ˆë¨**
- ì›ì¸: iPad WKWebView Desktop Modeì—ì„œ JavaScript Channel ì½œë°± ì•ˆë¨
- í•´ê²°: v115ì—ì„œ iPadìš© `flutter_inappwebview` ì ìš©

---

---

## ğŸš« ì ˆëŒ€ í•˜ë©´ ì•ˆ ë˜ëŠ” ê²ƒ

### 1. OhMyApp/ë¶ˆë‚˜ë¹„ ì–¸ê¸‰ ê¸ˆì§€
- âœ… hairgator.kr: **Firebase Auth + Firestore ì™„ì „ ë…ë¦½ ì™„ë£Œ**
- âŒ OhMyApp ì–´ë“œë¯¼, ë¶ˆë‚˜ë¹„ ì•±: **ì•ˆ ì”€**
- âŒ "PWAë¡œ í•˜ë©´ ì–´ë•Œìš”?" ì œì•ˆ ê¸ˆì§€

### 2. ì»¬ë ‰ì…˜ í†µì¼ ê¸ˆì§€!
| ì»¬ë ‰ì…˜ | ìš©ë„ | diagrams | textRecipe |
|--------|------|:--------:|:----------:|
| `hairstyles` | ë©”ë‰´íŒ/ëª©ë¡ | âŒ ì—†ìŒ | âŒ ì—†ìŒ |
| `styles` | ë ˆì‹œí”¼/ë„í•´ë„ | âœ… ìˆìŒ | âœ… ìˆìŒ |

- âŒ `hairstyles`ì—ì„œ `diagrams` í•„ë“œ ì°¾ì§€ ë§ˆ (ì—†ìŒ!)
- âœ… ë„í•´ë„/ë ˆì‹œí”¼ëŠ” ë°˜ë“œì‹œ `styles` ì»¬ë ‰ì…˜ì—ì„œ ì¡°íšŒ

### 3. kakao_flutter_sdk_user ë‹¤ìš´ê·¸ë ˆì´ë“œ ê¸ˆì§€!
- **ë°˜ë“œì‹œ 1.10.0 ì´ìƒ ì‚¬ìš©** (1.9.xëŠ” iPad í¬ë˜ì‹œ ë²„ê·¸)
- Dart SDK í˜¸í™˜ì„± ë¬¸ì œ â†’ SDK ì—…ê·¸ë ˆì´ë“œë¡œ í•´ê²° (ë‹¤ìš´ê·¸ë ˆì´ë“œ X)
- í˜„ì¬: `kakao_flutter_sdk_user: ^1.10.0` + Dart SDK ^3.6.0 + Flutter 3.38.5

---

## ğŸ”´ ìì£¼ í—·ê°ˆë¦¬ëŠ” ê²ƒë“¤

### ğŸ”¥ Flutter WebView ìŠ¤í¬ë¡¤ ë¬¸ì œ (2026-01-08 í•´ê²°) - ì¤‘ìš”!

**ì¦ìƒ:**
- 1ë²ˆ íƒ­ (ìŠ¤íƒ€ì¼ ë©”ë‰´): ìŠ¤í¬ë¡¤ ì •ìƒ âœ…
- 2ë²ˆ/3ë²ˆ íƒ­ (Plan & Billing, My): ì•„ë˜ë¡œ ìŠ¤í¬ë¡¤ì€ ë¨, **ìœ„ë¡œ ìŠ¤í¬ë¡¤ ì•ˆë¨** âŒ
- ì†ê°€ë½ ì•ˆ ë–¼ë©´ ë¨, ë–¼ê³  ë‹¤ì‹œ ì˜¬ë¦¬ë©´ ì•ˆë¨

**ì›ì¸ (menu.js Pull-to-Refresh ì°¨ë‹¨ ì½”ë“œ):**
```javascript
// âŒ ë¬¸ì œ ì½”ë“œ - window.scrollYëŠ” í•­ìƒ 0!
const scrollTop = window.scrollY || document.documentElement.scrollTop;
if (scrollTop <= 0 && currentY > lastY) {
    e.preventDefault();  // ìœ„ë¡œ ìŠ¤í¬ë¡¤ ì‹œ í•­ìƒ ë§‰í˜!
}
```
- `.page-content`ëŠ” `position: absolute`ë¼ì„œ `window.scrollY`ê°€ í•­ìƒ 0
- 1ë²ˆ íƒ­ì€ ì´ ì½”ë“œë¥¼ ì•ˆ ê±°ì¹¨ (`.menu-items-container`ëŠ” ë³„ë„ ì²´í¬)

**í•´ê²° (menu.js ìˆ˜ì •):**
```javascript
// âœ… ëª…ì‹œì  ìŠ¤í¬ë¡¤ ì»¨í…Œì´ë„ˆ ì²´í¬ ì¶”ê°€
const scrollableContainer = e.target.closest(
    '.styles-container, .menu-items-container, .style-modal-content, .page-content'
);
if (scrollableContainer) {
    // scrollableContainer.scrollTop ì‚¬ìš©! (window.scrollY ì•„ë‹˜!)
    const isAtTop = scrollableContainer.scrollTop <= 0;
    if (isAtTop && isPullingDown) {
        e.preventDefault();
    }
    return;
}
```

**ê°™ì´ ìˆ˜ì •í•´ì•¼ í•˜ëŠ” íŒŒì¼:**
- `dynamic-layout.js` line 49: `.page-content` ì¶”ê°€ í•„ìš”

**í•µì‹¬ êµí›ˆ:**
- âŒ `window.scrollY` ì‚¬ìš©í•˜ë©´ `position: absolute/fixed` ì»¨í…Œì´ë„ˆì—ì„œ í•­ìƒ 0
- âœ… ìŠ¤í¬ë¡¤ ì»¨í…Œì´ë„ˆì˜ `.scrollTop` ì§ì ‘ ì‚¬ìš©í•´ì•¼ í•¨
- âŒ Flutter ìª½ ìˆ˜ì • ë¶ˆí•„ìš” - ì›¹ì—ì„œ í•´ê²°!

---

### iOS bfcache ìŠ¤í”¼ë„ˆ ë¬´í•œí‘œì‹œ ë¬¸ì œ (2026-01-09 ìˆ˜ì •) - ì¤‘ìš”!

**ì¦ìƒ:**
- ì•± ì²« ì‹¤í–‰: ìŠ¤í”¼ë„ˆ ì •ìƒ ì‘ë™ (í‘œì‹œ í›„ ì‚¬ë¼ì§) âœ…
- ë‹¤ë¥¸ í˜ì´ì§€(AI ì–¼êµ´ë³€í™˜, ìŠ¤íƒ€ì¼ë§¤ì¹˜, ì±—ë´‡ ë“±) ê°”ë‹¤ê°€ **ë’¤ë¡œê°€ê¸°** â†’ í•‘í¬ ìŠ¤í”¼ë„ˆ ë¬´í•œ í‘œì‹œ âŒ
- ì›¹ ë¸Œë¼ìš°ì €: ë¬¸ì œ ì—†ìŒ âœ…
- Android ì•±: ë¬¸ì œ ì—†ìŒ âœ…
- **iOS ì•±ë§Œ ë¬¸ì œ** âŒ

**ì›ì¸:**
- iOS WKWebViewì˜ bfcacheê°€ í˜ì´ì§€ì˜ **ë Œë”ë§ ìƒíƒœ**ë¥¼ ìºì‹œ
- ë’¤ë¡œê°€ê¸° ì‹œ `onPageFinished` ì½œë°± í˜¸ì¶œ ì•ˆë¨
- ì›¹ì˜ JavaScript `pageshow` ì´ë²¤íŠ¸ëŠ” í˜¸ì¶œë˜ì§€ë§Œ DOM ì¡°ì‘ì´ ë Œë”ë§ì— ë°˜ì˜ ì•ˆë¨

**í•´ê²° (v78 - Flutter ìª½):**
```dart
// home_screen.dart
// iOS ì „ìš©: ì£¼ê¸°ì  ìŠ¤í”¼ë„ˆ ìˆ¨ê¹€ íƒ€ì´ë¨¸ (500msë§ˆë‹¤)
if (Platform.isIOS) {
  _spinnerHideTimer = Timer.periodic(const Duration(milliseconds: 500), (timer) {
    if (_webViewReady && !_isLoading) {
      _injectSpinnerHiderSilent();  // JS ì£¼ì…í•˜ì—¬ ìŠ¤í”¼ë„ˆ ê°•ì œ ìˆ¨ê¹€
    }
  });
}
```

**ì›¹ ìª½ ë³´ì¡° ì²˜ë¦¬ (index.html):**
```javascript
window.addEventListener('pageshow', function(event) {
    if (loadingOverlay) {
        loadingOverlay.style.display = 'none';
    }
});
```

**í•µì‹¬ êµí›ˆ:**
- âŒ ì›¹ JavaScriptë§Œìœ¼ë¡œëŠ” iOS WKWebView bfcache ë¬¸ì œ í•´ê²° ë¶ˆê°€
- âœ… Flutterì—ì„œ ì£¼ê¸°ì ìœ¼ë¡œ JS ì£¼ì…í•´ì•¼ í™•ì‹¤íˆ í•´ê²°ë¨
- âŒ reload() ì‚¬ìš©í•˜ë©´ í•´ê²°ë˜ì§€ë§Œ ì„±ë³„ ì„ íƒ í™”ë©´ìœ¼ë¡œ ëŒì•„ê°€ì„œ UX ë‚˜ì¨

---

### iOS 18.2 WebView í´ë¦­ ì•ˆë¨ ë¬¸ì œ (2026-01-12 ìˆ˜ì •) - ì¤‘ìš”!

**ì¦ìƒ:**
- ë„¤ì´í‹°ë¸Œ ë¡œê·¸ì¸(Apple/ì¹´ì¹´ì˜¤) í›„ WebView ë²„íŠ¼ í´ë¦­ ì•ˆë¨
- ê²°ì œ ë²„íŠ¼, ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ ë“± ë°˜ì‘ ì—†ìŒ
- Android: ì •ìƒ âœ…
- **iOS 18.2+ë§Œ ë¬¸ì œ** âŒ

**ì›ì¸:**
- iOS 18.2ì—ì„œ Flutter WebViewì˜ gesture recognizerê°€ ë„¤ì´í‹°ë¸Œ ìœ„ì ¯ ìƒí˜¸ì‘ìš© í›„ ìºì‹œëœ ìƒíƒœ ìœ ì§€
- ê³µì‹ ë²„ê·¸: [flutter/flutter#158961](https://github.com/flutter/flutter/issues/158961)

**í•´ê²° (v85):**
```yaml
# pubspec.yaml - webview_flutter 4.13.0+ë¡œ ì—…ë°ì´íŠ¸
webview_flutter: ^4.13.0  # iOS 18.2 í´ë¦­ ìˆ˜ì • í¬í•¨
```

**í•µì‹¬ êµí›ˆ:**
- âŒ ì›¹ JSì—ì„œ ontouchend ì¶”ê°€í•´ë„ í•´ê²° ì•ˆë¨
- âœ… webview_flutter ìµœì‹  ë²„ì „ìœ¼ë¡œ ì—…ë°ì´íŠ¸ í•„ìš” (Flutter ì—”ì§„ ë ˆë²¨ ìˆ˜ì •)
- âœ… Flutter 3.27.1+ ì— ì—”ì§„ ìˆ˜ì • í¬í•¨ë¨ (PR #56804)

---

### ğŸ”´ iOS WebView í´ë¦­ ì´ë²¤íŠ¸ capture:true í•„ìˆ˜! (2026-01-16) - ì ˆëŒ€ ì‚­ì œ ê¸ˆì§€!

**ì¦ìƒ:**
- iOSì—ì„œ ê²°ì œ ë²„íŠ¼, í”Œëœ ì„ íƒ ë²„íŠ¼ ë“± í´ë¦­í•´ë„ ì•„ë¬´ ë°˜ì‘ ì—†ìŒ
- Android: ì •ìƒ âœ…
- **iOSë§Œ ë¬¸ì œ** âŒ

**ì›ì¸:**
- iOS WKWebViewì—ì„œ ì´ë²¤íŠ¸ ë²„ë¸”ë§ì´ ì œëŒ€ë¡œ ì‘ë™í•˜ì§€ ì•ŠëŠ” ê²½ìš° ìˆìŒ
- document ë ˆë²¨ì—ì„œ capture ë‹¨ê³„ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆê°€ ìˆì–´ì•¼ ì´ë²¤íŠ¸ ì „íŒŒê°€ ì •ìƒí™”ë¨

**í•´ê²° (index.html - ì ˆëŒ€ ì‚­ì œ ê¸ˆì§€!):**
```javascript
// â­ iOS WebView í´ë¦­ ì´ë²¤íŠ¸ ì „íŒŒ ë³´ì¥ (capture:true í•„ìˆ˜!)
// ì´ ì½”ë“œê°€ ì—†ìœ¼ë©´ iOSì—ì„œ ë²„íŠ¼ í´ë¦­ì´ ì•ˆ ë¨
document.addEventListener('click', function(e) {
    // í´ë¦­ ì´ë²¤íŠ¸ ìº¡ì²˜ ë‹¨ê³„ì—ì„œ ì¡ì•„ì„œ ì „íŒŒ ë³´ì¥
    // ì‹¤ì œ ì²˜ë¦¬ëŠ” í•˜ì§€ ì•ŠìŒ (ë²„ë¸”ë§ì—ì„œ ì²˜ë¦¬ë¨)
}, true);  // â† capture:true í•„ìˆ˜!
```

**ìœ„ì¹˜:** `index.html` ìƒë‹¨ `<script>` íƒœê·¸ ë‚´ (Flutter ì•± ê°ì§€ ì½”ë“œ ë°”ë¡œ ì•„ë˜)

**âš ï¸ ê²½ê³ :**
- âŒ ì´ ì½”ë“œ ì ˆëŒ€ ì‚­ì œí•˜ì§€ ë§ ê²ƒ!
- âŒ ë””ë²„ê·¸ ì½”ë“œ ì •ë¦¬í•  ë•Œë„ ì´ ì½”ë“œëŠ” ìœ ì§€!
- âœ… ë¹ˆ í•¨ìˆ˜ì²˜ëŸ¼ ë³´ì—¬ë„ ë°˜ë“œì‹œ í•„ìš”í•¨

**í•µì‹¬ êµí›ˆ:**
- capture:true ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆê°€ iOS WebView ì´ë²¤íŠ¸ ì „íŒŒë¥¼ ì •ìƒí™”ì‹œí‚´
- í•¨ìˆ˜ ë‚´ìš©ì´ ë¹„ì–´ìˆì–´ë„ ë¦¬ìŠ¤ë„ˆ ë“±ë¡ ìì²´ê°€ ì¤‘ìš”í•¨

---

### Apple ë¡œê·¸ì¸ "Invalid OAuth response" ì—ëŸ¬ (2026-01-12 ìˆ˜ì •)

**ì¦ìƒ:**
- Apple ë¡œê·¸ì¸ ì‹œë„ â†’ "Invalid OAuth response from apple.com" ì—ëŸ¬
- Apple Developer, Firebase Console ì„¤ì • ë‹¤ ì •ìƒì¸ë° ì•ˆë¨

**ì›ì¸:**
- Firebase flutter_auth 5.2.0+ì—ì„œ Apple OAuthì— `accessToken` íŒŒë¼ë¯¸í„° í•„ìˆ˜
- ê³µì‹ ì´ìŠˆ: [firebase/flutterfire#13242](https://github.com/firebase/flutterfire/issues/13242)

**í•´ê²° (v84 - auth_service.dart):**
```dart
// âŒ ì˜ëª»ëœ ì½”ë“œ
final oauthCredential = OAuthProvider("apple.com").credential(
  idToken: identityToken,
  rawNonce: rawNonce,
);

// âœ… ì˜¬ë°”ë¥¸ ì½”ë“œ - accessToken ì¶”ê°€!
final oauthCredential = OAuthProvider("apple.com").credential(
  idToken: identityToken,
  rawNonce: rawNonce,
  accessToken: appleCredential.authorizationCode,  // í•„ìˆ˜!
);
```

**í•µì‹¬ êµí›ˆ:**
- âŒ Firebase Console ì„¤ì •ë§Œìœ¼ë¡œëŠ” í•´ê²° ì•ˆë¨
- âœ… Dart ì½”ë“œì—ì„œ `accessToken` íŒŒë¼ë¯¸í„°ì— `authorizationCode` ì „ë‹¬ í•„ìˆ˜

---

### iOS ì¸ì•±ê²°ì œ (IAP) ë¬¸ì œë“¤ (2026-01-18 ì—…ë°ì´íŠ¸) - ì¤‘ìš”!

**í˜„ì¬ ìƒíƒœ: v115 í…ŒìŠ¤íŠ¸ ì¤‘**

#### 1. StoreKit 2 JWS í˜•ì‹ ë¬¸ì œ (í•´ê²°ë¨)
- **ì¦ìƒ**: Apple ì˜ìˆ˜ì¦ ê²€ì¦ ì‹¤íŒ¨ (ì—ëŸ¬ ì½”ë“œ 21002)
- **ì›ì¸**: iOS 15+ì—ì„œ ì˜ìˆ˜ì¦ì´ JWS í˜•ì‹(eyJ...ë¡œ ì‹œì‘)ìœ¼ë¡œ ë³€ê²½ë¨
- **í•´ê²°**: `iap-verify.js`ì—ì„œ JWS í˜•ì‹ ê°ì§€ ë° ë””ì½”ë”© ì¶”ê°€

#### 2. ì¤‘ë³µ ê²°ì œ ì²˜ë¦¬ ë¬¸ì œ (í•´ê²°ë¨)
- **ì¦ìƒ**: ê°™ì€ êµ¬ë§¤ê°€ ì—¬ëŸ¬ ë²ˆ ì²˜ë¦¬ë˜ì–´ í† í° ì¤‘ë³µ ì¶©ì „
- **ì›ì¸**: `PurchaseStatus.restored`ë„ ìƒˆ êµ¬ë§¤ì²˜ëŸ¼ ì²˜ë¦¬ë¨
- **í•´ê²°**: `iap_service.dart`ì—ì„œ restoredëŠ” ë¬´ì‹œ

#### 3. JWS transactionId ì¶”ì¶œ (í•´ê²°ë¨)
- **ì¦ìƒ**: ê°™ì€ íŠ¸ëœì­ì…˜ì´ ì¤‘ë³µ ì²˜ë¦¬ë¨
- **ì›ì¸**: JWSì—ì„œ transactionId ì¶”ì¶œ ì•ˆ í•¨ â†’ ëœë¤ ID ìƒì„±
- **í•´ê²°**: `iap-verify.js`ì—ì„œ JWS íŠ¸ëœì­ì…˜ ID ì¶”ì¶œ

#### 4. â­ buyConsumable vs buyNonConsumable (2026-01-18 í•´ê²°!)

**ì¦ìƒ:**
- Basic í”Œëœ: êµ¬ë§¤ ë¶ˆê°€ âŒ (ì´ë¯¸ êµ¬ë§¤í•œ ìƒí’ˆì´ë¼ê³  ëœ¸)
- Pro, Business í”Œëœ: ì •ìƒ êµ¬ë§¤ âœ…

**ì›ì¸:**
- App Store Connectì—ì„œ **Non-Renewing Subscription** íƒ€ì…ìœ¼ë¡œ ìƒí’ˆ ìƒì„±
- `buyConsumable()` ì‚¬ìš©í•˜ë©´ Appleì´ ì´ë¯¸ êµ¬ë§¤í•œ ìƒí’ˆìœ¼ë¡œ ì¸ì‹
- Non-Renewing Subscriptionì€ `buyNonConsumable()` ì‚¬ìš©í•´ì•¼ í•¨!

**í•´ê²° (v114 - iap_service.dart):**
```dart
// âŒ ì˜ëª»ëœ ì½”ë“œ
final success = await _iap.buyConsumable(
  purchaseParam: purchaseParam,
  autoConsume: true,
);

// âœ… ì˜¬ë°”ë¥¸ ì½”ë“œ - Non-Renewing Subscriptionì€ buyNonConsumable!
final success = await _iap.buyNonConsumable(
  purchaseParam: purchaseParam,
);
```

**í•µì‹¬ êµí›ˆ:**
- âŒ `buyConsumable()`: ì†Œëª¨í’ˆ (ê²Œì„ ì•„ì´í…œ ë“± ë¬´í•œ ì¬êµ¬ë§¤ ê°€ëŠ¥)
- âœ… `buyNonConsumable()`: ë¹„ì†Œëª¨í’ˆ + Non-Renewing Subscription
- App Store Connect ìƒí’ˆ íƒ€ì…ê³¼ Flutter êµ¬ë§¤ ë©”ì„œë“œ ì¼ì¹˜ì‹œì¼œì•¼ í•¨!

#### 5. â­ iPad JavaScript Channel ë¬¸ì œ (v115ì—ì„œ í•´ê²°!)

**ì¦ìƒ:**
- **iPhone**: ê²°ì œ ë²„íŠ¼ ì •ìƒ ì‘ë™ âœ…
- **iPad**: ê²°ì œ ë²„íŠ¼ í´ë¦­í•´ë„ Flutter ì½œë°± ì‹¤í–‰ ì•ˆë¨ âŒ
- ì›¹ì—ì„œ `IAPChannel.postMessage()` í˜¸ì¶œì€ ì„±ê³µí•˜ì§€ë§Œ Flutterê°€ ì‘ë‹µ ì—†ìŒ

**ì›ì¸:**
- iPadëŠ” WKWebViewì—ì„œ ìë™ìœ¼ë¡œ Desktop Mode ì „í™˜
- `webview_flutter`ì˜ JavaScript Channelì´ iPad Desktop Modeì—ì„œ ì½œë°± ì•ˆ ë¨
- `flutter_inappwebview`ëŠ” JavaScript Handler ë°©ì‹ìœ¼ë¡œ ì½œë°± ì •ìƒ ì‘ë™

**í•´ê²° (v115 - home_screen.dart):**
```dart
// 1. iPad ê°ì§€ (600dp ì´ìƒ)
if (Platform.isIOS) {
  final shortestSide = MediaQuery.of(context).size.shortestSide;
  _isIPad = shortestSide >= 600;
}

// 2. iPadëŠ” InAppWebView, ê·¸ ì™¸ëŠ” webview_flutter
if (_isIPad)
  _buildIPadWebView()  // flutter_inappwebview
else
  WebViewWidget(...)   // ê¸°ì¡´ webview_flutter (iPhone/Android)

// 3. InAppWebView JavaScript Handler ë¸Œë¦¿ì§€ ì£¼ì…
await controller.evaluateJavascript(source: '''
  window.IAPChannel = {
    postMessage: function(msg) {
      window.flutter_inappwebview.callHandler('IAPChannel', msg);
    }
  };
''');
```

**âš ï¸ ì£¼ì˜: iPhone/Android ì½”ë“œ ê±´ë“œë¦¬ì§€ ë§ ê²ƒ!**
- iPhone: `webview_flutter` ì •ìƒ ì‘ë™ ì¤‘
- Android: `webview_flutter` ì •ìƒ ì‘ë™ ì¤‘
- iPadë§Œ `flutter_inappwebview` ì‚¬ìš©

---

### ğŸ”´ TestFlight ì¤‘ìš” ì •ë³´ (2026-01-18) - ë°˜ë“œì‹œ ìˆ™ì§€!

**TestFlightëŠ” App Store Connect ìƒŒë“œë°•ìŠ¤ ê³„ì •ì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤!**

| í™˜ê²½ | ê³„ì • íƒ€ì… | ê²°ì œ í™˜ê²½ |
|------|----------|----------|
| TestFlight | **ì¼ë°˜ Apple ID** | ìƒŒë“œë°•ìŠ¤ (ìë™) |
| Xcode ì§ì ‘ ë¹Œë“œ | ìƒŒë“œë°•ìŠ¤ ê³„ì • í•„ìš” | ìƒŒë“œë°•ìŠ¤ |
| App Store ì¶œì‹œ | ì¼ë°˜ Apple ID | ì‹¤ì œ ê²°ì œ |

**TestFlight ê²°ì œ í…ŒìŠ¤íŠ¸ ë°©ë²•:**
1. TestFlightì—ì„œ ì•± ì„¤ì¹˜
2. **ì¼ë°˜ Apple IDë¡œ ë¡œê·¸ì¸í•œ ìƒíƒœì—ì„œ** ê²°ì œ í…ŒìŠ¤íŠ¸
3. ìë™ìœ¼ë¡œ ìƒŒë“œë°•ìŠ¤ í™˜ê²½ì—ì„œ ê²°ì œë¨ (ì‹¤ì œ ì²­êµ¬ X)
4. ì˜ìˆ˜ì¦ì— `environment: "Sandbox"` í‘œì‹œë¨

**Non-Consumable/Non-Renewing Subscription ì¬êµ¬ë§¤ ë¬¸ì œ:**
- ê°™ì€ Apple IDë¡œ ë™ì¼ ìƒí’ˆ ì¬êµ¬ë§¤ ë¶ˆê°€ (ì´ë¯¸ êµ¬ë§¤í–ˆë‹¤ê³  ëœ¸)
- **í•´ê²°**: ìƒˆ Apple IDë¡œ í…ŒìŠ¤íŠ¸ (ì˜ˆ: eric708+test2@naver.com)

**ê³µê°œ TestFlight ë§í¬:**
- https://testflight.apple.com/join/q57ST6h3
- ì´ë©”ì¼ ì´ˆëŒ€ ì—†ì´ ëˆ„êµ¬ë‚˜ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥

**í…ŒìŠ¤í„° ì¶”ê°€ (App Store Connect):**
- App Store Connect â†’ ì•± â†’ TestFlight â†’ ì™¸ë¶€ í…ŒìŠ¤íŒ… â†’ í…ŒìŠ¤í„° ì¶”ê°€
- ì´ë©”ì¼ ì´ˆëŒ€ ë˜ëŠ” ê³µê°œ ë§í¬ ì‚¬ìš©

---

### ë””ë²„ê·¸ ë°°ë„ˆ ì œê±° ìœ„ì¹˜ (2026-01-18)

**ë¹¨ê°„ìƒ‰ ë””ë²„ê·¸ ë°°ë„ˆê°€ í‘œì‹œë˜ëŠ” ê²½ìš° ì œê±°í•  ìœ„ì¹˜:**

1. **index.html** (~line 139-175):
   - `showDebugBanner()` í•¨ìˆ˜ ì „ì²´ ì‚­ì œ
   - `handlePlanBtnEvent()` ë‚´ `showDebugBanner()` í˜¸ì¶œ ì‚­ì œ

2. **js/main.js** (`selectPlanAndPay` í•¨ìˆ˜):
   - `var banner = ...` ë³€ìˆ˜ ì‚­ì œ
   - `banner.xxx = ...` ê´€ë ¨ ì½”ë“œ ì‚­ì œ

3. **js/payment.js** (`requestIOSInAppPurchase` í•¨ìˆ˜):
   - `var banner = ...` ë³€ìˆ˜ ì‚­ì œ
   - `banner.xxx = ...` ê´€ë ¨ ì½”ë“œ ì‚­ì œ

**âš ï¸ ì‚­ì œí•˜ë©´ ì•ˆ ë˜ëŠ” ì½”ë“œ (index.html):**
```javascript
// â­ iOS WebView í´ë¦­ ì´ë²¤íŠ¸ ì „íŒŒ ë³´ì¥ (capture:true í•„ìˆ˜!)
document.addEventListener('click', function(e) {
    // ë¹ˆ í•¨ìˆ˜ì²˜ëŸ¼ ë³´ì—¬ë„ í•„ìˆ˜!
}, true);
```

---

### Flutter WebView ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ íë¦„ (2026-01-07 ë””ë²„ê¹…)

**âš ï¸ í•µì‹¬: Flutter Firebaseì™€ WebView FirebaseëŠ” ë³„ê°œ!**

```
Flutter ì•±                    ì„œë²„                         WebView
    â”‚                          â”‚                              â”‚
    â”œâ”€ ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                              â”‚
    â”‚                          â”‚                              â”‚
    â”‚  â—„â”€â”€â”€ customToken â”€â”€â”€â”€â”€â”€â”¤ kakao-token.js               â”‚
    â”‚       (claims í¬í•¨)      â”‚ - email, kakaoId ë“±          â”‚
    â”‚                          â”‚ - Firestore ë¬¸ì„œ ì—…ë°ì´íŠ¸     â”‚
    â”‚                          â”‚                              â”‚
    â”œâ”€ signInWithCustomToken â”€â”€â–ºâ”‚                              â”‚
    â”‚                          â”‚                              â”‚
    â”œâ”€ getIdToken() â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                              â”‚
    â”‚                          â”‚                              â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€ ?firebaseToken=xxx â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
    â”‚                          â”‚                              â”‚
    â”‚                          â”‚  â—„â”€â”€â”€â”€ verify-firebase-token â”‚
    â”‚                          â”‚        (claims ë³µì‚¬ í•„ìˆ˜!)   â”‚
    â”‚                          â”‚                              â”‚
    â”‚                          â”‚        customToken â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
    â”‚                          â”‚        (claims í¬í•¨!)        â”‚
    â”‚                          â”‚                              â”‚
    â”‚                          â”‚              signInWithCustomToken
    â”‚                          â”‚              auth.js ì‹¤í–‰
```

**âŒ ì´ì „ ë²„ê·¸:** `verify-firebase-token.js`ì—ì„œ claims ì—†ì´ í† í° ìƒì„±
```javascript
// âŒ ì˜ëª»ëœ ì½”ë“œ
const customToken = await admin.auth().createCustomToken(uid);

// âœ… ì˜¬ë°”ë¥¸ ì½”ë“œ - claims ë³µì‚¬!
const customToken = await admin.auth().createCustomToken(uid, {
    email: decodedToken.email,
    kakaoId: decodedToken.kakaoId,
    // ...
});
```

**ì‚¬ì´ë“œë°” í”„ë¡œí•„ ì‚¬ì§„ ì•ˆ ë‚˜ì˜¤ëŠ” ë¬¸ì œ:**
- ì›ì¸: `user.email`ì´ ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ì‹œ null â†’ Firestore ë¬¸ì„œ ID ìƒì„± ì‹¤íŒ¨
- í•´ê²°: token claimsì—ì„œ email ê°€ì ¸ì™€ì„œ docId ìƒì„± (main.js `updateMypageInfo`)

**Firestore ë¬¸ì„œ ì¤‘ë³µ ìƒì„± ë¬¸ì œ:**
- `708eric_hanmail_net` (ì´ë©”ì¼ ê¸°ë°˜, ì˜¬ë°”ë¥¸ ë¬¸ì„œ)
- `kakao_4556280939` (UID ê¸°ë°˜, ì¤‘ë³µ)
- ì›ì¸: kakao-token.jsì—ì„œ ê¸°ì¡´ ë¬¸ì„œ ê²€ìƒ‰ ì‹¤íŒ¨
- í•´ê²°: ì´ë©”ì¼ ìš°ì„  ê²€ìƒ‰ + `kakao_` ë¬¸ì„œ ì œì™¸

### íŒŒì¼ êµ¬ë¶„
- **main.js**: ì‚¬ì´ë“œë°” ë©”ë‰´ HTML ë™ì  ìƒì„±, í…Œë§ˆ ì „í™˜
- **menu.js**: ë©”ë‰´ í´ë¦­ ì•¡ì…˜, í˜ì´ì§€ ì´ë™

### Firestore ì»¬ë ‰ì…˜ëª…
| ìš©ë„ | ì»¬ë ‰ì…˜ëª… |
|------|---------|
| í—¤ì–´ìŠ¤íƒ€ì¼ ë©”ë‰´íŒ | `hairstyles` |
| ë ˆì‹œí”¼/ë„í•´ë„ | `styles` |
| ì‚¬ìš©ì | `users` |
| í† í° ë¡œê·¸ | `credit_logs` |

### ìŠ¤íƒ€ì¼ ì½”ë“œ â†’ mainCategory ë§¤í•‘
| ì½”ë“œ | mainCategory |
|------|-------------|
| SF | SIDE FRINGE |
| SP | SIDE PART |
| FU | FRINGE UP |
| PB | PUSHED BACK |
| BZ | BUZZ |
| CP | CROP |
| MC | MOHICAN |

### RAG ì—…ë¡œë“œ (Gemini File Search)
```python
# âœ… ì˜¬ë°”ë¥¸ ë°©ë²•
client.file_search_stores.upload_to_file_search_store(
    file=file_path,
    file_search_store_name=STORE_NAME
)
```
**Store ID**: `fileSearchStores/hairgator-theory-final-2025-kkb6n1ftfbf2`

### ğŸ”´ RAG íŒŒì¼ ì¶”ê°€ ì‹œ ë°˜ë“œì‹œ ì—…ë¡œë“œ ì‹¤í–‰! (2026-01-23 ì¶”ê°€)

**rag_data í´ë”ì— ìƒˆ íŒŒì¼ ì¶”ê°€ ì‹œ ë°˜ë“œì‹œ RAG Storeì— ì—…ë¡œë“œí•´ì•¼ í•¨!**

| íŒŒì¼ | ì—…ë¡œë“œ ìŠ¤í¬ë¦½íŠ¸ |
|------|----------------|
| hair_basic_science.txt | `python scripts/upload-hair-science-to-rag.py` |
| hair_diagram_glossary.txt | `python scripts/upload-glossary-to-rag.py` |
| perm_index_ko.txt, perm_index_en.txt | `python scripts/extract-perm-index-to-rag.py` |
| facial_landmark_algorithm.txt | `python scripts/upload-facial-algorithm-to-rag.py` |
| color_theory_for_rag.txt | `python scripts/upload-color-theory-to-rag.py` |

**ì‹¤í–‰ ë°©ë²•:**
```bash
cd C:\Users\ê¹€ë¯¼ì¬\Desktop\Hairgator_chatbot
# GEMINI_API_KEYëŠ” .env íŒŒì¼ì—ì„œ ìë™ ë¡œë“œë¨
python scripts/upload-hair-science-to-rag.py
```

**âš ï¸ ì£¼ì˜:**
- ìŠ¤í¬ë¦½íŠ¸ ë§Œë“¤ê³  ì‹¤í–‰ ì•ˆ í•˜ë©´ RAG ê²€ìƒ‰ì—ì„œ í•´ë‹¹ ë‚´ìš© ëª» ì°¾ìŒ
- ì—…ë¡œë“œ í›„ Store ë¬¸ì„œ ìˆ˜ í™•ì¸ (í˜„ì¬ 68ê°œ)
- "ì—¼ìƒ‰ì˜ ì›ë¦¬" ê°™ì€ ì§ˆë¬¸ì— "ì°¾ì„ ìˆ˜ ì—†ë‹¤"ê³  ë‚˜ì˜¤ë©´ RAG ì—…ë¡œë“œ ëˆ„ë½ ì˜ì‹¬

### style-match vs ë©”ì¸ ì„œë¹„ìŠ¤
- **ë©”ì¸ ì„œë¹„ìŠ¤**: `index.html` + `menu.js` (ìŠ¤íƒ€ì¼ ì´ë¯¸ ë¡œë“œë¨)
- **style-match**: `/style-match/index.html` + `app.js` (ìŠ¤íƒ€ì¼ API ë³„ë„ ë¡œë“œ)
- vModel APIëŠ” HTTP URLë§Œ ë°›ìŒ (base64 ì•ˆ ë¨)

---

## ê³„ì • ì •ë³´

### Google Play Console
- **ì´ë©”ì¼**: drylink.info@gmail.com
- **ë¹„ë°€ë²ˆí˜¸**: alswo1206!@

### App Store ì‹¬ì‚¬ìš© í…ŒìŠ¤íŠ¸ ê³„ì •
- **ì´ë©”ì¼**: `appstore-review@hairgator.kr`
- **ë¹„ë°€ë²ˆí˜¸**: `Review2025!`

---

## ì•±ìŠ¤í† ì–´ ë°°í¬

### ê³µí†µ
- **Bundle ID**: `com.hairgator`
- **GitHub**: https://github.com/kimminjae413/hairgator-flutter-app

### Android í‚¤ìŠ¤í† ì–´ (âš ï¸ ë°±ì—… í•„ìˆ˜!)
- **íŒŒì¼**: `D:\hairgator_dev\hairgator_flutter_app\android\app\upload-keystore.jks`
- **storePassword/keyPassword**: `hairgator2025`
- **keyAlias**: `upload`

### iOS (Codemagic)
- **App ID**: 6751260003
- **Flutter ë²„ì „**: 3.38.5
- **Shorebird**: Disabled
- **ë¹Œë“œ ì¸ì**: ì—†ìŒ (flavor ì‚¬ìš© ì•ˆ í•¨)

---

## Flutter í”„ë¡œì íŠ¸ ê²½ë¡œ (Dë“œë¼ì´ë¸Œ)
- **í”„ë¡œì íŠ¸**: `D:\hairgator_dev\hairgator_flutter_app\`
- **Flutter SDK**: `D:\hairgator_dev\flutter\`
- **Android SDK**: `D:\hairgator_dev\Android\Sdk\`

---

## í•µì‹¬ ì•„í‚¤í…ì²˜

### RAG ì‹œìŠ¤í…œ
- **Gemini File Search API**, 57ê°œ ë¬¸ì„œ, 524MB
- ì´ë¡  PDF, íŒ/ì»¤íŠ¸ ë ˆì‹œí”¼ ìë§‰, ìš©ì–´ì‚¬ì „, ì¹´í…Œê³ ë¦¬ ê°€ì´ë“œ

### Firestore ì»¬ë ‰ì…˜
- `theory_indexes`: í‚¤ì›Œë“œ ë§¤ì¹­ + ì´ë¯¸ì§€ URL (210ê°œ)
- `styles`: ë ˆì‹œí”¼ ë„í•´ë„ (209ê°œ)
- `users`: ì‚¬ìš©ì ì •ë³´
- `credit_logs`: í† í° ì‚¬ìš© ë¡œê·¸

### í•µì‹¬ í•¨ìˆ˜ ìœ„ì¹˜ (chatbot-api.js)
- `generateGeminiFileSearchResponse()`: ~2834ì¤„
- `buildGeminiSystemPrompt()`: ~2500ì¤„
- `detectTheoryImageForQuery()`: ~3404ì¤„
- `selectBestStyleByVision()`: ~6543ì¤„

---

## Netlify í™˜ê²½ë³€ìˆ˜

| ë³€ìˆ˜ëª… | ìš©ë„ |
|--------|------|
| `FIREBASE_PROJECT_ID` | hairgatormenu-4a43e |
| `FIREBASE_CLIENT_EMAIL` | Firebase Admin |
| `FIREBASE_PRIVATE_KEY` | Firebase Admin ì¸ì¦ |
| `GEMINI_API_KEY` | Gemini AI |
| `KAKAO_REST_API_KEY` | ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ |
| `VMODEL_API_KEY` | í—¤ì–´ì²´í—˜ AI |
| `PORTONE_API_SECRET` | ê²°ì œ ê²€ì¦ |
| `SENDGRID_API_KEY` | ì´ë©”ì¼ ì•Œë¦¼ |

---

## í† í° ì‹œìŠ¤í…œ

### í† í° ë¹„ìš©
| ê¸°ëŠ¥ | í† í° |
|------|------|
| ë£©ë¶ | 200 |
| í—¤ì–´ì²´í—˜ | 350 |
| ì±—ë´‡ | 3~30 (ì‚¬ìš©ëŸ‰ë³„) |

### í† í° ì°¨ê° ë°©ì‹
- GPT/Claude ìŠ¤íƒ€ì¼: ì‚¬ì „ ì²´í¬ ì—†ì´ ë°±ë‹¨ ì°¨ê°
- ì‹¤íŒ¨ ì‹œ `/#products` ì´ë™ (ì—…ê·¸ë ˆì´ë“œ ìœ ë„)

### í¬íŠ¸ì› V2
- storeId: `store-69fa8bc3-f410-433a-a8f2-f5d922f94dcb`
- channelKey: `channel-key-da1e7007-39b9-4afa-8c40-0f158d323af1`

---

## ë‹¤êµ­ì–´ ì§€ì› (7ê°œêµ­ì–´)
- ko, en, ja, zh, vi, id, es
- `js/i18n.js`ì—ì„œ 7ê°œêµ­ì–´ ëª¨ë‘ ë™ì¼í•œ í‚¤ ì¶”ê°€ í•„ìˆ˜

---

## ë°°í¬
- **GitHub**: `kimminjae413/hairgator-menu-final`
- **Netlify**: ìë™ ë°°í¬ (push í›„ 1-2ë¶„)

### ì£¼ìš” URL
| URL | ìš©ë„ |
|-----|------|
| `https://hairgator.kr` | í™ˆí˜ì´ì§€ |
| `https://app.hairgator.kr` | ì•± ì„œë¹„ìŠ¤ |
| `https://app.hairgator.kr/admin.html` | ê´€ë¦¬ì |

---

## 2026-01-06 iOS íšŒìƒ‰/í° í™”ë©´ í•´ê²° âœ…

### ë¬¸ì œ
- v28~v32: íšŒìƒ‰/í° í™”ë©´ (ì•± ì‹œì‘ ì•ˆ ë¨)
- v32 ë””ë²„ê·¸ UIë„ í‘œì‹œ ì•ˆ ë¨ â†’ Dart ì½”ë“œ ì‹¤í–‰ ì „ ë©ˆì¶¤

### ì›ì¸
- `main()`ì—ì„œ `await Firebase.initializeApp()` í˜¸ì¶œ ì‹œ iOSì—ì„œ ë¸”ë¡œí‚¹
- UI ë Œë”ë§ ì „ì— ì´ˆê¸°í™”í•˜ë©´ ì•±ì´ íšŒìƒ‰ í™”ë©´ì—ì„œ ë©ˆì¶¤

### í•´ê²° (v33)
```dart
void main() {
  runApp(const HairgatorApp());  // ë¨¼ì € ì•± ì‹¤í–‰
}

class _HairgatorAppState extends State<HairgatorApp> {
  @override
  void initState() {
    super.initState();
    _initializeApp();  // UI ë„ìš´ í›„ ë¹„ë™ê¸° ì´ˆê¸°í™”
  }

  Future<void> _initializeApp() async {
    await Firebase.initializeApp(
      options: DefaultFirebaseOptions.currentPlatform,
    );
  }
}
```

### í•µì‹¬ êµí›ˆ
- âŒ `main()`ì—ì„œ `await` ì‚¬ìš© ì‹œ iOSì—ì„œ UI ë Œë”ë§ ì „ ë¸”ë¡œí‚¹ ê°€ëŠ¥
- âœ… `runApp()` ë¨¼ì € ì‹¤í–‰ â†’ `initState()`ì—ì„œ ë¹„ë™ê¸° ì´ˆê¸°í™”
- âœ… `DefaultFirebaseOptions.currentPlatform` ë°˜ë“œì‹œ ì‚¬ìš©

### í˜„ì¬ ìƒíƒœ
- **v33**: ë¡œê·¸ì¸ í™”ë©´ ì •ìƒ í‘œì‹œ âœ…
- **ë‹¤ìŒ í•  ì¼**: ì¹´ì¹´ì˜¤/êµ¬ê¸€/ì´ë©”ì¼ ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸, WebView í™ˆ í™”ë©´ í…ŒìŠ¤íŠ¸

---

## 2026-01-12 iOS ê²°ì œ/ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ ì•ˆë¨ í•´ê²° âœ…

### ë¬¸ì œ 1: ê²°ì œ ë²„íŠ¼ í´ë¦­í•´ë„ ì•„ë¬´ ë°˜ì‘ ì—†ìŒ

**ì¦ìƒ:**
- Apple ë¡œê·¸ì¸ í›„ "ì„ íƒí•˜ê¸°" ë²„íŠ¼ ëˆŒëŸ¬ë„ ì•„ë¬´ ë°˜ì‘ ì—†ìŒ
- Android: ì •ìƒ âœ…
- iOS: ì•ˆë¨ âŒ

**ì›ì¸:**
- `main.js`ì˜ `selectPlanAndPay` í•¨ìˆ˜ê°€ `payment.js`ì˜ í•¨ìˆ˜ë¥¼ **ë®ì–´ì“°ê³ ** ìˆì—ˆìŒ
- `payment.js`: iOS ì²´í¬ ìˆìŒ âœ… â†’ `isIOSFlutterApp()` ì²´í¬ í›„ `IAPChannel` í˜¸ì¶œ
- `main.js`: iOS ì²´í¬ ì—†ìŒ âŒ â†’ ë¬´ì¡°ê±´ ì™¸ë¶€ê²°ì œ(PortOne) í˜¸ì¶œ

**í•´ê²° (main.js ìˆ˜ì •):**
```javascript
window.selectPlanAndPay = async function(planType) {
    // â­ iOS Flutter ì•±ì´ë©´ ì¸ì•±ê²°ì œ ì‚¬ìš©
    if (typeof window.isIOSFlutterApp === 'function' && window.isIOSFlutterApp()) {
        console.log('[IAP] iOS Flutter ì•± ê°ì§€ â†’ ì¸ì•±ê²°ì œ ì§„í–‰');
        if (typeof window.requestIOSInAppPurchase === 'function') {
            window.requestIOSInAppPurchase(planType);
            return;
        }
    }
    // ê¸°ì¡´ ì™¸ë¶€ê²°ì œ ë¡œì§...
};
```

### ë¬¸ì œ 2: ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ ëˆŒëŸ¬ë„ ì•„ë¬´ ë°˜ì‘ ì—†ìŒ

**ì¦ìƒ:**
- ì›¹ ë¸Œë¼ìš°ì €: "ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?" í™•ì¸ì°½ ëœ¸ âœ…
- iOS ì•±: ì•„ë¬´ ë°˜ì‘ ì—†ìŒ âŒ

**ì›ì¸:**
- `index.html` ì•ˆì— **ë˜ ë‹¤ë¥¸ `logout()` í•¨ìˆ˜**ê°€ ìˆì—ˆìŒ (line ~3492)
- ì´ í•¨ìˆ˜ê°€ `auth.js`ì˜ `logout()`ì„ ë®ì–´ì”€
- `confirm()` ë‹¤ì´ì–¼ë¡œê·¸ê°€ iOS WKWebViewì—ì„œ ì œëŒ€ë¡œ ì•ˆ ëœ¸

**í•´ê²° (index.html ìˆ˜ì •):**
```javascript
async function logout() {
    // Flutter ì•±ì¸ ê²½ìš° ë°”ë¡œ ë„¤ì´í‹°ë¸Œ ë¡œê·¸ì¸ìœ¼ë¡œ ì´ë™
    if (window.FlutterChannel) {
        console.log('ğŸ“± [logout] Flutter ì•± â†’ ë„¤ì´í‹°ë¸Œ ë¡œê·¸ì¸ìœ¼ë¡œ ì´ë™');
        window.FlutterChannel.postMessage('logout');
        return;
    }
    // ì›¹ ë¸Œë¼ìš°ì €ì¸ ê²½ìš° í™•ì¸ í›„ ë¡œê·¸ì•„ì›ƒ
    if (confirm('ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
        // ...
    }
}
```

### ë¬¸ì œ 3: ì¸ì•±ê²°ì œ ìƒí’ˆ ì—†ìŒ

**ì¦ìƒ:**
- ê²°ì œ ë²„íŠ¼ í´ë¦­ ì‹œ "ìƒí’ˆì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: hairgator_basic" ì—ëŸ¬

**ì›ì¸:**
- App Store Connectì—ì„œ ì¸ì•± êµ¬ë§¤ ìƒí’ˆ ë¯¸ìƒì„±
- ìœ ë£Œ ì•± ê³„ì•½ ë¯¸ì™„ë£Œ (ì„¸ê¸ˆ ì–‘ì‹ ëŒ€ê¸° ì¤‘)

**í•´ê²° (ë‚´ì¼ ì‘ì—…):**
1. App Store Connect â†’ ë¹„ì¦ˆë‹ˆìŠ¤ â†’ ìœ ë£Œ ì•± ê³„ì•½ ì™„ë£Œ
2. ì„¸ê¸ˆ ì–‘ì‹ ì œì¶œ (W-8BEN-E ë“±)
3. ì¸ì•± êµ¬ë§¤ ìƒí’ˆ ìƒì„±:
   - `hairgator_basic` - â‚©22,000
   - `hairgator_pro` - â‚©38,000
   - `hairgator_business` - â‚©50,000

### ì¶”ê°€ ìˆ˜ì •ì‚¬í•­

**ontouchend í•¸ë“¤ëŸ¬ ì¶”ê°€:**
- iOSì—ì„œ onclickì´ ì•ˆ ë¨¹ì„ ë•Œë¥¼ ëŒ€ë¹„í•´ ëª¨ë“  ë²„íŠ¼ì— `ontouchend` ì¶”ê°€
- ê²°ì œ ë²„íŠ¼, ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼, ë§ˆì´í˜ì´ì§€ ë©”ë‰´ ë“±

**iOS Flutter ì•± ê°ì§€ ë¡œì§ ì¶”ê°€ (index.html):**
```javascript
function checkIOSFlutterApp() {
    if (typeof window.IAPChannel !== 'undefined') {
        document.documentElement.classList.add('ios-flutter-app');
    }
}
```

**iOSì—ì„œ ì™¸ë¶€ê²°ì œ UI ìˆ¨ê¹€ (main.css):**
```css
html.ios-flutter-app .ios-hide-payment {
    display: none !important;
}
```

### í•µì‹¬ êµí›ˆ
- âŒ ê°™ì€ í•¨ìˆ˜ëª…ì´ ì—¬ëŸ¬ íŒŒì¼ì— ìˆìœ¼ë©´ ë‚˜ì¤‘ì— ë¡œë“œëœ ê²Œ ë®ì–´ì”€
- âŒ `confirm()` ë‹¤ì´ì–¼ë¡œê·¸ëŠ” iOS WKWebViewì—ì„œ ë¬¸ì œ ë°œìƒ ê°€ëŠ¥
- âœ… Flutter ì•± ì²´í¬ëŠ” **ê°€ì¥ ë¨¼ì €** í•´ì•¼ í•¨ (ë‹¤ë¥¸ ë¡œì§ ì‹¤í–‰ ì „ì—)
- âœ… iOS ì¸ì•±ê²°ì œëŠ” App Store Connect ê³„ì•½/ìƒí’ˆ ë“±ë¡ í•„ìˆ˜

---

## 2026-01-13 Android êµ¬ê¸€ ë¡œê·¸ì¸ + ìŠ¤í”Œë˜ì‹œ í™”ë©´ âœ…

### Android êµ¬ê¸€ ë¡œê·¸ì¸ ì‹¤íŒ¨ í•´ê²°

**ì¦ìƒ:**
- "Google ë¡œê·¸ì¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤" ì—ëŸ¬

**ì›ì¸ ë° í•´ê²°:**
1. **SHA-1 ì§€ë¬¸ ë¯¸ë“±ë¡**: Firebase Consoleì— SHA-1 ì¸ì¦ì„œ ì§€ë¬¸ ë“±ë¡
   - ì§€ë¬¸: `EC:F0:E4:72:49:06:DB:83:D9:CB:86:E2:14:AA:B7:F7:05:80:FB:79`
   - Firebase Console â†’ í”„ë¡œì íŠ¸ ì„¤ì • â†’ Android ì•± â†’ SHA ì¸ì¦ì„œ ì§€ë¬¸ ì¶”ê°€

2. **íŒ¨í‚¤ì§€ëª… ë¶ˆì¼ì¹˜**: build.gradleê³¼ google-services.json íŒ¨í‚¤ì§€ëª… ë‹¤ë¦„
   - google-services.json: `kr.hairgator.hairgator`
   - build.gradle: `com.hairgator` (ì˜ëª»ë¨)
   - **âš ï¸ Play Storeì— `com.hairgator`ë¡œ ì¶œì‹œë¨** â†’ build.gradle ìœ ì§€, Firebaseì— `com.hairgator` ì•± ì¶”ê°€

3. **MainActivity.kt íŒ¨í‚¤ì§€ ê²½ë¡œ**: íŒ¨í‚¤ì§€ëª… ë³€ê²½ ì‹œ MainActivity.ktë„ ì´ë™ í•„ìš”
   ```
   android/app/src/main/kotlin/com/hairgator/MainActivity.kt
   ```
   ```kotlin
   package com.hairgator
   import io.flutter.embedding.android.FlutterActivity
   class MainActivity: FlutterActivity()
   ```

**í•µì‹¬ êµí›ˆ:**
- âŒ Play Store ì¶œì‹œ í›„ íŒ¨í‚¤ì§€ëª…(applicationId) ë³€ê²½í•˜ë©´ ìƒˆ ì•±ìœ¼ë¡œ ì¸ì‹ë¨
- âœ… Firebaseì— ì˜¬ë°”ë¥¸ íŒ¨í‚¤ì§€ëª…ìœ¼ë¡œ Android ì•± ì¶”ê°€
- âœ… MainActivity.kt íŒŒì¼ ê²½ë¡œì™€ package ì„ ì–¸ì´ build.gradleì˜ namespaceì™€ ì¼ì¹˜í•´ì•¼ í•¨

---

### í”Œëœ ë‹¤ìš´ê·¸ë ˆì´ë“œ ì˜ˆì•½ ê¸°ëŠ¥ ì¶”ê°€

**ê¸°ëŠ¥:**
- ìœ ë£Œ í”Œëœ ì‚¬ìš©ìê°€ ë¬´ë£Œ í”Œëœìœ¼ë¡œ ì „í™˜ ì˜ˆì•½ ê°€ëŠ¥
- ë§Œë£Œì¼ê¹Œì§€ í˜„ì¬ í”Œëœ ìœ ì§€ í›„ ìë™ ì „í™˜
- "Xì¼ í›„ ë¬´ë£Œ í”Œëœìœ¼ë¡œ ì „í™˜ë©ë‹ˆë‹¤" ì•ˆë‚´ í‘œì‹œ
- ì˜ˆì•½ ì·¨ì†Œ ê°€ëŠ¥

**Firestore í•„ë“œ:**
```javascript
{
  plan: 'basic',           // í˜„ì¬ í”Œëœ
  planExpiresAt: timestamp, // ë§Œë£Œì¼
  pendingPlan: 'free',     // ì˜ˆì•½ëœ ë‹¤ìŒ í”Œëœ
  pendingPlanSetAt: timestamp // ì˜ˆì•½ ì„¤ì • ì‹œê°„
}
```

**ìˆ˜ì • íŒŒì¼:**
- `index.html`: ë‹¤ìš´ê·¸ë ˆì´ë“œ ë²„íŠ¼ + ì˜ˆì•½ ì•ˆë‚´ UI + CSS
- `js/main.js`: `requestDowngrade()`, `cancelPendingDowngrade()` í•¨ìˆ˜
- `js/firebase-bridge.js`: `setPendingPlan()`, `getTokenBalance()`ì— pendingPlan ì¶”ê°€
- `netlify/functions/check-plan-expiration.js`: pendingPlan ì ìš© ë¡œì§

---

### ìŠ¤í”Œë˜ì‹œ í™”ë©´ ì¶”ê°€ (v86)

**íŒ¨í‚¤ì§€:** `flutter_native_splash: ^2.4.0`

**ì„¤ì • (pubspec.yaml):**
```yaml
flutter_native_splash:
  color: "#FFFFFF"
  image: assets/splash_logo.png
  android_12:
    color: "#FFFFFF"
    image: assets/splash_logo.png
  ios: true
  android: true
```

**ë¡œê³  íŒŒì¼:**
- ì›ë³¸: `C:\Users\ê¹€ë¯¼ì¬\Desktop\ë¡œê³ .png`
- ë³µì‚¬: `D:\hairgator_dev\hairgator_flutter_app\assets\splash_logo.png`

**ìƒì„± ëª…ë ¹:**
```bash
dart run flutter_native_splash:create
```

**ê²°ê³¼:**
- Android: `res/drawable-*/splash.png` ìƒì„±
- iOS: `LaunchImage` ì—…ë°ì´íŠ¸
- í°ìƒ‰ ë°°ê²½ + ì¤‘ì•™ HAIRGATOR ë¡œê³ 

---

## 2026-01-19 ì‘ì—… ë‚´ìš©

### ì–´ë“œë¯¼ 1:1 ë¬¸ì˜ ì‚­ì œ ê¸°ëŠ¥ ì¶”ê°€ âœ…

- `admin.html`ì— ì‚­ì œ ë²„íŠ¼ ë° `deleteInquiry()` í•¨ìˆ˜ ì¶”ê°€
- ì‚­ì œ ì „ í™•ì¸ ì°½ í‘œì‹œ
- ì»¤ë°‹: `8dc5e02`

### ê³µì§€ì‚¬í•­ ì‚­ì œ ê¸°ëŠ¥ - ì´ë¯¸ ìˆìŒ í™•ì¸ âœ…

- `admin.html` line 7692ì— ì‚­ì œ ë²„íŠ¼ ì´ë¯¸ ì¡´ì¬
- `deleteNotice()` í•¨ìˆ˜ ì´ë¯¸ êµ¬í˜„ë¨

### iOS ì¸ì•±ê²°ì œ í™˜ë¶ˆ ì •ì±… í™•ì¸ âœ…

| ìƒí™© | Apple ì²˜ë¦¬ |
|------|-----------|
| 7ì¼ ì´ë‚´ í™˜ë¶ˆ ìš”ì²­ | ìŠ¹ì¸ ê°€ëŠ¥ |
| 29ì¼ ì“°ê³  í™˜ë¶ˆ ìš”ì²­ | **ê±°ë¶€** |
| ë°˜ë³µ ì•…ìš© | ê³„ì • ì œì¬ |

**ê²°ë¡ :** iOS ì¸ì•±ê²°ì œ í™˜ë¶ˆì€ Appleì´ ì•Œì•„ì„œ ì²˜ë¦¬. ìš°ë¦¬ê°€ í•  ì¼ ì—†ìŒ.

### ë§ˆì¼€íŒ… ì´ë©”ì¼ ë°œì†¡ ëŒ€ìƒ ë¬¸ì œ ë¶„ì„

**ë¬¸ì œ:** ì–´ë“œë¯¼ ë§ˆì¼€íŒ… ì´ë©”ì¼ì—ì„œ 6821ëª… ì¤‘ 2ëª…ë§Œ ë°œì†¡ ê°€ëŠ¥ìœ¼ë¡œ í‘œì‹œ

**ì›ì¸:**
- ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹œ `isMarketing` í•„ë“œ ëˆ„ë½
- ëª½ê³ DB ë¤í”„ì— `isMarketing`, `marketingAgreeDate` í•„ë“œ ì¡´ì¬

**ëª½ê³ DB í†µê³„:**
| í•­ëª© | ìˆ˜ |
|------|---|
| ì´ ì‚¬ìš©ì | 7,505ëª… |
| ë§ˆì¼€íŒ… ë™ì˜ (True) | 3,471ëª… |
| ë§ˆì¼€íŒ… ë™ì˜ + ì´ë©”ì¼ | 3,366ëª… |

**í•´ê²° ìŠ¤í¬ë¦½íŠ¸:** `scripts/update-marketing-consent.py` (ë¯¸ì‹¤í–‰)
- ëª½ê³ DB `isMarketing: True` â†’ Firestore `termsAgreement.marketing: true` ì—…ë°ì´íŠ¸
- ì‹¤í–‰ ì‹œ 3,366ëª… ë°œì†¡ ê°€ëŠ¥ìœ¼ë¡œ ë³€ê²½ë¨

### ì†Œê°œ ì˜ìƒ ê¸°íš

- **íƒ€ê²Ÿ:** ë¯¸ìš©ì‚¬
- **ì±„ë„:** ì¸ìŠ¤íƒ€ê·¸ë¨ ë¦´ìŠ¤ (9:16 ì„¸ë¡œ, 45ì´ˆ)
- **ìŠ¤íƒ€ì¼:** íƒœë¸”ë¦¿ ëª©ì—… + ìë§‰ + BGM
- **ìŠ¤í† ë¦¬ë³´ë“œ:** ëŒ€í™”ì—ì„œ ì •ë¦¬ë¨

### í”„ë¡œëª¨ì…˜ ì´ë¯¸ì§€

- **íŒŒì¼:** `C:\Users\ê¹€ë¯¼ì¬\Desktop\hairgator-promo.html`
- **ë‚´ìš©:** 1:1 ì•± ë‹¤ìš´ë¡œë“œ ìœ ë„ ì´ë¯¸ì§€ (Play Store, App Store ê²€ìƒ‰ ì•ˆë‚´)
- ë¸Œë¼ìš°ì €ì—ì„œ ì—´ê³  ìŠ¤í¬ë¦°ìƒ·ìœ¼ë¡œ ì €ì¥

---

## 2026-01-21 ì‘ì—… ë‚´ìš©

### iPad #products í˜ì´ì§€ í´ë¦­ ì•ˆë¨ ë¬¸ì œ ë””ë²„ê¹… ğŸ”„

**ì¦ìƒ:**
- iPad ì•±ì—ì„œ #products í˜ì´ì§€(Plan & Billing íƒ­) ë²„íŠ¼ í´ë¦­ ì „í˜€ ì•ˆë¨
- ê°™ì€ ì•±ì—ì„œ ìŠ¤íƒ€ì¼ ë©”ë‰´, ë§ˆì´í˜ì´ì§€ íƒ­ì€ ì •ìƒ ì‘ë™ âœ…
- ì›¹ ë¸Œë¼ìš°ì €ì—ì„œëŠ” ëª¨ë“  í˜ì´ì§€ ì •ìƒ ì‘ë™ âœ…
- **iPad ì•± #products í˜ì´ì§€ë§Œ ë¬¸ì œ** âŒ

**ì‹œë„í•œ í•´ê²°ì±…ë“¤:**

#### 1. ë””ë²„ê·¸ CSS ì œê±° (ì‹¤íŒ¨)
- ì´ì „ ë””ë²„ê¹… ì‹œ ì¶”ê°€í•œ `position: fixed; z-index: 99999` ì œê±°
- ê²°ê³¼: í´ë¦­ ì•ˆë¨

#### 2. pointer-events ì¶”ê°€ (ì‹¤íŒ¨)
- `fixPageScroll()`ì—ì„œ `pointer-events: auto !important` ì¶”ê°€
- `.page-container` ë° ìì‹ ìš”ì†Œì— `pointer-events: auto` CSS ì¶”ê°€
- ê²°ê³¼: ì—¬ì „íˆ ì•ˆë¨

#### 3. ontouchend í•¸ë“¤ëŸ¬ ì¶”ê°€ (ì‹¤íŒ¨)
- #productsPage ë²„íŠ¼ì— `ontouchend` í•¸ë“¤ëŸ¬ ì¶”ê°€ (mypage ë²„íŠ¼ì²˜ëŸ¼)
- ê²°ê³¼: ì•„ë¬´ ë°˜ì‘ ì—†ìŒ

#### 4. ê°•ì œ ë¦¬í”Œë¡œìš° íŠ¸ë¦¬ê±° (ì‹¤íŒ¨)
- `void productsPage.offsetHeight` ì¶”ê°€í•˜ì—¬ ê°•ì œ ë¦¬í”Œë¡œìš°
- ê²°ê³¼: ì›¹ ë³€ê²½ë§Œìœ¼ë¡œëŠ” í•´ê²° ì•ˆë¨

#### 5. Flutter TapGestureRecognizer ì¶”ê°€ (í…ŒìŠ¤íŠ¸ ì¤‘) ğŸ”„
- `home_screen.dart` WebViewWidget gestureRecognizersì— ì¶”ê°€:
```dart
Factory<TapGestureRecognizer>(
  () => TapGestureRecognizer(),
),
Factory<LongPressGestureRecognizer>(
  () => LongPressGestureRecognizer(),
),
```
- âš ï¸ ì£¼ì˜: v96ì—ì„œ TapGestureRecognizerê°€ ë¬¸ì œ ì¼ìœ¼í‚¨ ì  ìˆìŒ
- í˜„ì¬ ìƒí™©ì€ ë‹¤ë¦„ (v96ì€ ì „ì²´ ì•ˆë¨, í˜„ì¬ëŠ” #productsë§Œ ì•ˆë¨)

**ìˆ˜ì •ëœ íŒŒì¼:**

| íŒŒì¼ | ë³€ê²½ ë‚´ìš© |
|------|----------|
| `index.html` | ë””ë²„ê·¸ CSS ì œê±°, pointer-events ì¶”ê°€, ontouchend ì¶”ê°€ |
| `js/main.js` | fixPageScroll()ì— pointer-events, #products ê°•ì œ ë¦¬í”Œë¡œìš° |
| `js/payment.js` | ë””ë²„ê·¸ alert ì œê±° |
| `home_screen.dart` | TapGestureRecognizer, LongPressGestureRecognizer ì¶”ê°€ |

### Codemagic ìë™ ë¹Œë“œ ì„¤ì • âœ…

- GitHub main ë¸Œëœì¹˜ push ì‹œ ìë™ìœ¼ë¡œ iOS ë¹Œë“œ ì‹œì‘
- `codemagic.yaml` íŒŒì¼ ìƒì„± ì™„ë£Œ
- TestFlight ìë™ ì—…ë¡œë“œ ì„¤ì •

```yaml
triggering:
  events:
    - push
  branch_patterns:
    - pattern: main
      include: true
```

### ë‚´ì¼ í•  ì¼

1. **TestFlight ì—…ë°ì´íŠ¸ í™•ì¸** - Codemagic ë¹Œë“œ ì™„ë£Œ í›„
2. **iPad #products í´ë¦­ í…ŒìŠ¤íŠ¸** - TapGestureRecognizer ì ìš©ëœ ë¹Œë“œ
3. **ê²°ê³¼ì— ë”°ë¥¸ ì¡°ì¹˜:**
   - ì„±ê³µ ì‹œ: ë¬¸ì œ í•´ê²° âœ…
   - ì‹¤íŒ¨ ì‹œ (v96ì²˜ëŸ¼ ì „ì²´ ì•ˆë¨): TapGestureRecognizer ì œê±°í•˜ê³  ë‹¤ë¥¸ ë°©ë²• ì‹œë„
   - ì‹¤íŒ¨ ì‹œ (ì—¬ì „íˆ #productsë§Œ ì•ˆë¨): InAppWebView ìª½ ì¶”ê°€ ì¡°ì‚¬ í•„ìš”
