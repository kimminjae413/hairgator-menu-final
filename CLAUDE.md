# HAIRGATOR ì±—ë´‡ - Claude ì‘ì—… ê°€ì´ë“œ

## âš ï¸ ì ˆëŒ€ ë‹¤ì‹œ ë¬»ì§€ ë§ ê²ƒ (2025-12-28 í™•ì •)

### OhMyApp/ë¶ˆë‚˜ë¹„/MongoDB ì™„ì „ ë…ë¦½ ì™„ë£Œ

**ë°°ê²½:**
- OhMyApp = ë¶ˆë‚˜ë¹„ = MongoDB = ê°™ì€ ì„œë¹„ìŠ¤ (ì•± ë¹Œë” í”Œë«í¼)
- ì´ìš©ë£Œ ë‚´ë©´ì„œ ì¨ì™”ìœ¼ë‚˜ **ë¹„í˜‘ì¡°ì ì´ë¼ íƒˆì¶œí•¨**
- MongoDB ë¤í”„ ë°›ì•„ì„œ ë‚˜ì˜´

**í˜„ì¬ ìƒíƒœ:**
- âœ… hairgator.kr ì›¹ì‚¬ì´íŠ¸: **ì™„ì „ ë…ë¦½ ì™„ë£Œ** (Firebase Auth + Firestore)
- âŒ OhMyApp ì–´ë“œë¯¼ (drylink.ohmyapp.io): **ì•ˆ ì”€**
- âŒ ë¶ˆë‚˜ë¹„ ì•± (ì•±ìŠ¤í† ì–´): **ë²„ë¦¼** (OhMyApp ì„œë²„ ì—°ê²°ë˜ì–´ ìˆì–´ì„œ íƒ­ 4ê°œ ë‚˜ì˜¤ëŠ” ë¬¸ì œ ìˆìŒ)
- ğŸ”¨ ìƒˆ ì•±ìŠ¤í† ì–´ ì•±: **Flutter WebViewë¡œ ìƒˆë¡œ ë§Œë“¤ì–´ì•¼ í•¨** (hairgator.kr ê°ì‹¸ëŠ” ë°©ì‹)

**ì ˆëŒ€ í•˜ì§€ ë§ ê²ƒ:**
- "OhMyApp ì–´ë“œë¯¼ì—ì„œ ì„¤ì •í•˜ì„¸ìš”" ê°™ì€ ë§ í•˜ì§€ ë§ˆ
- "ë¶ˆë‚˜ë¹„ ì•± íƒ­ ì„¤ì •" ì–˜ê¸° êº¼ë‚´ì§€ ë§ˆ
- "PWAë¡œ í•˜ë©´ ì–´ë•Œìš”?" ì œì•ˆí•˜ì§€ ë§ˆ
- ì´ ì£¼ì œë¡œ ë‹¤ì‹œ ì§ˆë¬¸í•˜ì§€ ë§ˆ

**í•µì‹¬ ë‹µë³€:** ê¸°ì¡´ ë¶ˆë‚˜ë¹„ ì•±ì€ OhMyApp ì„œë²„ ì£¼ì†Œê°€ ì•± ì•ˆì— í•˜ë“œì½”ë”©ë˜ì–´ ìˆì–´ì„œ, ë°±ì—”ë“œë§Œ Firebaseë¡œ ë°”ê¿”ë„ ì•±ì´ ê³„ì† OhMyApp ì„œë²„ë¡œ ìš”ì²­ ë³´ëƒ„. **ê¸°ì¡´ ì•± ì¬í™œìš© ë¶ˆê°€ëŠ¥. ìƒˆ ì•± ë§Œë“¤ì–´ì•¼ í•¨.**

**ëª©í‘œ:** OhMyApp ì–´ë“œë¯¼ì²˜ëŸ¼ hairgator ì–´ë“œë¯¼ì—ì„œ íƒ­ ì„¤ì • ë³€ê²½í•˜ë©´ ì•±ì— ë°˜ì˜ë˜ê²Œ í•˜ê¸°
- ìƒˆ ì•±(Flutter)ì´ **Firestore app_config/tabs**ì—ì„œ íƒ­ ì„¤ì • ë¡œë“œ
- admin.htmlì—ì„œ íƒ­ ì„¤ì • ë³€ê²½ â†’ Firestore ì—…ë°ì´íŠ¸ â†’ ì•±ì— ë°˜ì˜
- ì´ë¯¸ admin.htmlì— "ì•± ë©”ë‰´ ê´€ë¦¬" ê¸°ëŠ¥ ì¶”ê°€ë¨ (MongoDB ë°ì´í„° ê°€ì ¸ì˜¤ê¸° ë²„íŠ¼ í¬í•¨)

**ì•±ìŠ¤í† ì–´ ì•± ë§Œë“¤ ë•Œ:** Flutter ì•±ì´ Firestoreì—ì„œ íƒ­ ì„¤ì • ì½ì–´ì„œ í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ êµ¬ì„±í•˜ë„ë¡ ê°œë°œ.

---

## Google Play Console ê³„ì • (ì•± ì¶œì‹œìš©)
- **ì´ë©”ì¼**: drylink.info@gmail.com
- **ë¹„ë°€ë²ˆí˜¸**: alswo1206!@
- **URL**: https://play.google.com/console

---

## ì•±ìŠ¤í† ì–´ ë°°í¬ ì •ë³´ (2025-12-29)

### ê³µí†µ ì •ë³´
- **ì•± ì´ë¦„**: HAIRGATOR (í—¤ì–´ê²Œì´í„°)
- **Bundle ID / Package Name**: `com.hairgator`
- **GitHub ì €ì¥ì†Œ**: https://github.com/kimminjae413/hairgator-flutter-app

### Android (Google Play)
- **íŒ¨í‚¤ì§€ëª…**: `com.hairgator`
- **ìƒíƒœ**: ì‹¬ì‚¬ ì œì¶œ ì™„ë£Œ (2025-12-29)
- **í‚¤ìŠ¤í† ì–´**: `upload-keystore.jks`
  - storePassword: `hairgator2025`
  - keyPassword: `hairgator2025`
  - keyAlias: `upload`
- **google-services.json**: Firebase í”„ë¡œì íŠ¸ `hairgatormenu-4a43e` ì—°ê²°
- **ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨**: https://hairgator.kr/privacy-policy.html
- **ê³„ì •ì‚­ì œ**: https://hairgator.kr/delete-account.html

### iOS (App Store) - Codemagic CI/CD ì‚¬ìš©
- **Bundle ID**: `com.hairgator`
- **App ID**: 6751260003
- **ë¹Œë“œ ì„œë¹„ìŠ¤**: Codemagic (https://codemagic.io)
  - ë¬´ë£Œ í”Œëœ (ì›” 500ë¶„ ë¹Œë“œ)
  - macOS M2 ì¸ìŠ¤í„´ìŠ¤ ì‚¬ìš©
- **App Store Connect API Key**:
  - Key Name: `Codemagic`
  - Key ID: `2VF386FHLB`
  - .p8 íŒŒì¼: Codemagicì— ì—…ë¡œë“œë¨
- **Apple Developer Account**:
  - ê³„ì •: Min Jae Kim / AIW
  - ë§Œë£Œì¼: 2026ë…„ 3ì›”
- **ìƒíƒœ**: âœ… ì‹¬ì‚¬ ì œì¶œ ì™„ë£Œ (2025-12-29, ë¹Œë“œ 3)
- **TestFlight í…ŒìŠ¤íŠ¸ ì •ë³´**: https://appstoreconnect.apple.com/apps/6751260003/testflight/test-info

### App Store ì‹¬ì‚¬ìš© í…ŒìŠ¤íŠ¸ ê³„ì •
- **ì´ë©”ì¼**: `appstore-review@hairgator.kr`
- **ë¹„ë°€ë²ˆí˜¸**: `Review2025!`
- **í† í°**: 50,000
- **í”Œëœ**: Business
- **Firestore ë¬¸ì„œ**: `users/appstore-review_hairgator_kr`

### Codemagic ì„¤ì •
- **Workflow**: Default Workflow
- **í”Œë«í¼**: Android + iOS ë‘˜ ë‹¤ ì²´í¬
- **iOS Code Signing**: Automatic
- **Provisioning Profile**: App Store (ë°°í¬ìš©)
- **App Store Connect Publishing**: í™œì„±í™” (TestFlight ìë™ ì—…ë¡œë“œ)

---

## Flutter ì•± ë¹Œë“œ (2025-12-29 Dë“œë¼ì´ë¸Œ ì´ì „)

### í˜„ì¬ ìƒíƒœ (2025-12-29 ë¹Œë“œ ì™„ë£Œ)
- âœ… **App Bundle ë¹Œë“œ ì„±ê³µ**: `D:\hairgator_dev\...\app-release.aab` (24.9MB) - Play Store ì œì¶œìš©
- âœ… **APK ë¹Œë“œ ì„±ê³µ**: `D:\hairgator_dev\...\app-release.apk` (24.2MB) - í…ŒìŠ¤íŠ¸ìš©
- âœ… **ì„œëª… í‚¤ ìƒì„± ì™„ë£Œ**: `upload-keystore.jks` (ë¹„ë°€ë²ˆí˜¸: hairgator2025)
- âœ… **Dë“œë¼ì´ë¸Œ ì´ì „ ì™„ë£Œ**: Cë“œë¼ì´ë¸Œ 18GB+ í™•ë³´
- â³ **Play Store ì‹¬ì‚¬ ì œì¶œ ëŒ€ê¸°**

### í‚¤ìŠ¤í† ì–´ ì •ë³´ (ì¤‘ìš”! ë°±ì—… í•„ìˆ˜!)
- **íŒŒì¼**: `D:\hairgator_dev\hairgator_flutter_app\android\app\upload-keystore.jks`
- **storePassword**: hairgator2025
- **keyPassword**: hairgator2025
- **keyAlias**: upload
- **ìœ íš¨ê¸°ê°„**: 10,000ì¼ (~27ë…„)
- âš ï¸ **ì´ íŒŒì¼ ë¶„ì‹¤í•˜ë©´ ì•± ì—…ë°ì´íŠ¸ ë¶ˆê°€!** ë°˜ë“œì‹œ í´ë¼ìš°ë“œì— ë°±ì—…

### ë””ìŠ¤í¬ ê³µê°„ ì •ë¦¬ ê¸°ë¡ (2025-12-29)
- Flutter/Android SDK Dë“œë¼ì´ë¸Œ ì´ì „: **12.5GB í™•ë³´**
- í˜„ì¬ Cë“œë¼ì´ë¸Œ ì—¬ìœ  ê³µê°„: ~18GB

### í”„ë¡œì íŠ¸ ê²½ë¡œ (2025-12-29 Dë“œë¼ì´ë¸Œë¡œ ì´ì „ ì™„ë£Œ)
- **Flutter í”„ë¡œì íŠ¸**: `D:\hairgator_dev\hairgator_flutter_app\`
- **Flutter SDK**: `D:\hairgator_dev\flutter\`
- **Android SDK**: `D:\hairgator_dev\Android\Sdk\`
- **Gradle ìºì‹œ**: `D:\hairgator_dev\gradle_home\`
- **Pub ìºì‹œ**: `D:\hairgator_dev\pub_cache\` (í•œê¸€ ê²½ë¡œ ë¬¸ì œ í•´ê²°ìš©)

### ë¹Œë“œ ëª…ë ¹ì–´ (Dë“œë¼ì´ë¸Œ ê²½ë¡œ)
```bash
export GRADLE_USER_HOME="D:/hairgator_dev/gradle_home"
export PUB_CACHE="D:/hairgator_dev/pub_cache"
export JAVA_HOME="C:/Program Files/Android/Android Studio/jbr"
export JAVA_TOOL_OPTIONS="-Dfile.encoding=UTF-8"
cd /d/hairgator_dev/hairgator_flutter_app
D:/hairgator_dev/flutter/bin/flutter.bat build apk --release
```

### ë²„ì „ ì •ë³´ (í˜¸í™˜ì„± ë¬¸ì œ í•´ê²°ë¨)
- Flutter: 3.24.5
- Gradle: 8.5 (`gradle-wrapper.properties`)
- Android Gradle Plugin: 8.3.0 (`settings.gradle`)
- Kotlin: 1.9.22
- Java: 17 (targetCompatibility)
- NDK: 25.1.8937393
- compileSdk: 34

### ì£¼ìš” íŒŒì¼ êµ¬ì¡°
```
C:\hairgator_flutter_app\
â”œâ”€â”€ lib\
â”‚   â”œâ”€â”€ main.dart              # ì•± ì§„ì…ì 
â”‚   â”œâ”€â”€ models\
â”‚   â”‚   â””â”€â”€ tab_config.dart    # íƒ­ ì„¤ì • ëª¨ë¸
â”‚   â”œâ”€â”€ screens\
â”‚   â”‚   â””â”€â”€ home_screen.dart   # WebView + í•˜ë‹¨ íƒ­
â”‚   â””â”€â”€ services\
â”‚       â””â”€â”€ firestore_service.dart  # Firestore íƒ­ ì„¤ì • ë¡œë“œ
â”œâ”€â”€ android\
â”‚   â”œâ”€â”€ app\build.gradle       # NDK, Java ë²„ì „ ì„¤ì •
â”‚   â”œâ”€â”€ settings.gradle        # AGP, Kotlin ë²„ì „ ì„¤ì •
â”‚   â””â”€â”€ gradle\wrapper\gradle-wrapper.properties  # Gradle ë²„ì „
â””â”€â”€ pubspec.yaml               # ì˜ì¡´ì„± (webview_flutter, firebase_core, cloud_firestore)
```

### ë‹¤ìŒ ë‹¨ê³„
1. **Firebase ì„¤ì •**: Firebase Consoleì—ì„œ Android ì•± ë“±ë¡ â†’ `google-services.json` ë‹¤ìš´ë¡œë“œ â†’ `android/app/` í´ë”ì— ë°°ì¹˜
2. **í…ŒìŠ¤íŠ¸**: APK íŒŒì¼ì„ í•¸ë“œí°ì— ì„¤ì¹˜í•˜ì—¬ í…ŒìŠ¤íŠ¸
3. **ì„œëª… í‚¤ ìƒì„±**: ë¦´ë¦¬ìŠ¤ìš© keystore ìƒì„±
4. **App Bundle ë¹Œë“œ**: `flutter build appbundle --release`
5. **Play Store ì‹¬ì‚¬ ì œì¶œ**

### íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ê¸°ë¡ (ë‹¤ì‹œ ê²ªì§€ ì•Šë„ë¡)
- **í•œê¸€ ê²½ë¡œ ë¬¸ì œ**: ì‚¬ìš©ìëª…(ê¹€ë¯¼ì¬)ì— í•œê¸€ â†’ Flutter SDK, í”„ë¡œì íŠ¸, Gradle ìºì‹œ ëª¨ë‘ C:\ ë£¨íŠ¸ë¡œ ì´ë™
- **Developer Mode í•„ìˆ˜**: Windows ì„¤ì • â†’ ì‹œìŠ¤í…œ â†’ ê°œë°œììš© â†’ ê°œë°œì ëª¨ë“œ ì¼œê¸°
- **Java 21 í˜¸í™˜ì„±**: AGP 8.3.0 ì´ìƒ + Gradle 8.5 ì´ìƒ í•„ìš”
- **ë””ìŠ¤í¬ ê³µê°„**: ìµœì†Œ 2-3GB í•„ìš” (ë¹Œë“œ ì‹œ ìºì‹œ ìƒì„±)

---

## í•µì‹¬ ì•„í‚¤í…ì²˜ (ì ˆëŒ€ ìŠì§€ ë§ ê²ƒ!)

### RAG ì‹œìŠ¤í…œ
- **Gemini File Search API** ì‚¬ìš©
- Store ID: `fileSearchStores/hairgator-theory-final-2025-kkb6n1ftfbf2`
- **53ê°œ ë¬¸ì„œ**, 524MB (ì˜êµ¬ ì €ì¥ë¨)
- ì—…ë¡œë“œëœ ìë£Œ:
  - ì´ë¡  PDF 38ê°œ
  - íŒ ë ˆì‹œí”¼ ìë§‰ 4ê°œ
  - ì»¤íŠ¸ ë ˆì‹œí”¼ ìë§‰ 1ê°œ(138ê°œ ë³‘í•©)
  - **í—¤ì–´ ìš©ì–´ ì‚¬ì „(hair_diagram_glossary.txt)**: ë„í•´ë„ ê¸°í˜¸, ë‘ìƒ í¬ì¸íŠ¸, ì»¤íŠ¸ í…Œí¬ë‹‰, íŒ/ì—¼ìƒ‰ ìš©ì–´
  - **ê¸°ì´ˆí•™ ê°œë¡ (hair_basic_science.txt)**: ëª¨ë°œí•™, ì¼€ë¯¸ì»¬, ë‘í”¼í•™, ìƒ‰ì±„í•™, ì†Œë…í•™
  - **í—¤ì–´ì¼€ì–´ ì œí’ˆ ê°€ì´ë“œ(hair_care_products_guide.txt)**: íŠ¸ë¦¬íŠ¸ë¨¼íŠ¸/ë¦°ìŠ¤/ì»¨ë””ì…”ë„ˆ ì°¨ì´, ì¹´í‹°ì˜¨ ê³„ë©´í™œì„±ì œ ì‘ìš©, FAQ (2025-12-19 ì¶”ê°€)
  - **íŒ ì¸ë±ìŠ¤ í…ìŠ¤íŠ¸(perm_index_ko.txt)**: 46ê°œ íŒ ì¸ë±ìŠ¤ ì´ë¯¸ì§€ì—ì„œ Gemini Visionìœ¼ë¡œ ì¶”ì¶œ (2025-12-22 ì¶”ê°€)
    - ë‹¤ì´ì–´ê·¸ë¨/í‘œ/í™”ì‚´í‘œ ì˜ë¯¸ê¹Œì§€ í•´ì„í•œ ìƒì„¸ í…ìŠ¤íŠ¸
    - ë³µêµ¬íŒ, ì—°í™”ë²•, í™˜ì›/ì‚°í™” ì‹œìŠ¤í…œ, ë¡œë“œ/ì™€ì¸ë”© ê¸°ë²• ë“± íŒ ì´ë¡  ì „ë°˜
  - **í—¤ì–´ìŠ¤íƒ€ì¼ ì¹´í…Œê³ ë¦¬ ê°€ì´ë“œ(hairstyle-category-guide.md)**: ëŒ€ë¶„ë¥˜/ì¤‘ë¶„ë¥˜ ì²´ê³„ ì •ë¦¬ (2025-12-26 ì¶”ê°€)
    - ì—¬ì: A~H Length (ì‹ ì²´ ë¶€ìœ„ ê¸°ì¤€), ë‚¨ì: SF/SP/FU/PB/BZ/CR/MH (ìŠ¤íƒ€ì¼ ê¸°ì¤€)
    - ì¤‘ë¶„ë¥˜: N/FH/EB/E/CB (ì•ë¨¸ë¦¬ ê¸¸ì´)
  - **ì–¼êµ´í˜• ë¶„ì„ ì•Œê³ ë¦¬ì¦˜(facial_landmark_algorithm.txt)**: MediaPipe/Dlib ê¸°ë°˜ í—¤ì–´ ì¶”ì²œ v1.0 (2025-12-26 ì¶”ê°€)
    - ìˆ˜ì§/ê°€ë¡œ ë¹„ìœ¨ ê³„ì‚°, ì–¼êµ´í˜•ë³„ ì¶”ì²œ/íšŒí”¼ ì¹´í…Œê³ ë¦¬ ë§¤ì¹­ í…Œì´ë¸”
    - ìŠ¤ì½”ì–´ë§ ì‹œìŠ¤í…œ (+50/-50 ê°€ê° ë¡œì§)

### Firestore
- ì»¬ë ‰ì…˜: `theory_indexes` - í‚¤ì›Œë“œ ë§¤ì¹­ + ì´ë¯¸ì§€ URL ì €ì¥ (ì»¤íŠ¸ 164ê°œ + íŒ 46ê°œ = 210ê°œ)
- ì»¬ë ‰ì…˜: `styles` - ë ˆì‹œí”¼ ë„í•´ë„ ì´ë¯¸ì§€
- ì»¬ë ‰ì…˜: `recipe_samples` - ë²¡í„° ê²€ìƒ‰ìš© ë ˆì‹œí”¼
- ì»¬ë ‰ì…˜: `credit_logs` - í¬ë ˆë”§ ì‚¬ìš© ë¡œê·¸ (2025-12-22 ì¶”ê°€)

### theory_indexes êµ¬ì¡° (í—·ê°ˆë¦¬ê¸° ì‰¬ì›€!)
```javascript
// ì˜¬ë°”ë¥¸ êµ¬ì¡° (ì»¤íŠ¸/íŒ ì¸ë±ìŠ¤ ê³µí†µ)
{
  term: "Zone",
  category: "perm" | "ê¸°ì´ˆ ì´ë¡ " | "ì»¤íŒ… ì‹œìŠ¤í…œ" | ...,
  images: {
    ko: "https://storage.googleapis.com/.../ko/Zone_kor.png",
    en: "https://storage.googleapis.com/.../en/Zone.png",
    ja: "...",
    zh: "...",
    vi: "..."
  },
  keywords: ["zone", "ì¡´", ...]
}
```
- **images ê°ì²´**: ì–¸ì–´ë³„ ì´ë¯¸ì§€ URLì„ í•˜ë‚˜ì˜ ê°ì²´ì— ì €ì¥
- **ì˜ëª»ëœ êµ¬ì¡°**: `imageUrl` + `lang` ë³„ë„ í•„ë“œë¡œ ì–¸ì–´ë³„ ë¬¸ì„œ ë¶„ë¦¬ â†’ ë³‘í•© í•„ìš”

### ì£¼ìš” íŒŒì¼
- `netlify/functions/chatbot-api.js` - ë©”ì¸ API (354KB, ë§¤ìš° í¼)
- `netlify/functions/lib/schemas.js` - 2WAY CUT ìŠ¤í‚¤ë§ˆ

### íŒ ë ˆì‹œí”¼ ì‹œìŠ¤í…œ (2025-12-16 ì¶”ê°€)

#### í˜„ì¬ ìƒíƒœ
- **70ê°œ ì—¬ì íŒ ë ˆì‹œí”¼** Firestore `styles` ì»¬ë ‰ì…˜ì— ì €ì¥ ì™„ë£Œ (2025-12-16 ì¶”ê°€ë¶„ 11ê°œ ë°˜ì˜)
- **ì»¤íŠ¸-íŒ ë§¤ì¹­**: FAL0001 â†” FALP0001 (P ì¶”ê°€ë¡œ ë§¤ì¹­)
- **ëª¨ë“  ì»¤íŠ¸-íŒ ë§¤ì¹­ ì™„ë£Œ**: 69ê°œ ì»¤íŠ¸ì— ëª¨ë‘ ë§¤ì¹­ë˜ëŠ” íŒ ë ˆì‹œí”¼ ì¡´ì¬

#### ì‹œë¦¬ì¦ˆë³„ í˜„í™©
| ì‹œë¦¬ì¦ˆ | íŒ ê°œìˆ˜ | ì»¤íŠ¸ ê°œìˆ˜ | ë¹„ê³  |
|--------|---------|-----------|------|
| FALP | 7ê°œ | FAL 6ê°œ | ì™„ë£Œ (+1 ì¶”ê°€) |
| FBLP | 14ê°œ | FBL 11ê°œ | ì™„ë£Œ (+3 ì¶”ê°€) |
| FCLP | 6ê°œ | FCL 11ê°œ | ì™„ë£Œ |
| FDLP | 8ê°œ | FDL 11ê°œ | ì™„ë£Œ (+2 ì¶”ê°€) |
| FELP | 9ê°œ | FEL 11ê°œ | ì™„ë£Œ (+1 ì¶”ê°€) |
| FFLP | 9ê°œ | FFL 10ê°œ | ì™„ë£Œ (+1 ì¶”ê°€) |
| FGLP | 10ê°œ | FGL 10ê°œ | ì™„ë£Œ (+3 ì¶”ê°€) |
| FHLP | 9ê°œ | FHL 9ê°œ | ì™„ë£Œ |

#### Firestore íŒ ë ˆì‹œí”¼ êµ¬ì¡°
```javascript
{
  styleId: "FALP0001",
  series: "FALP",
  seriesName: "A Length Perm",
  gender: "female",
  type: "perm",  // â­ íŒ/ì»¤íŠ¸ êµ¬ë¶„ (í•„ìˆ˜!)
  matchingCutStyle: "FAL0001",  // â­ ë§¤ì¹­ë˜ëŠ” ì»¤íŠ¸ ìŠ¤íƒ€ì¼
  diagrams: [{step: 1, url: "..."}, ...],
  diagramCount: 100,
  textRecipe: "ì—°í™” í›„ ì‚¬ì´ë“œ ë¶€ë¶„ì€...",
  createdAt: Timestamp,
  updatedAt: Timestamp
}
```

#### ë„í•´ë„ íŒŒì¼ëª… íŒ¨í„´ (2ê°€ì§€ ì§€ì›)
1. `{styleId}_001.png` í˜•ì‹: FALP0001_001.png (FALP ì‹œë¦¬ì¦ˆ)
2. `001.png` í˜•ì‹: ìˆœìˆ˜ ìˆ«ì 3ìë¦¬ (FELP, FCLP ë“±)

#### ì—…ë¡œë“œ ìŠ¤í¬ë¦½íŠ¸
- **ê²½ë¡œ**: `scripts/upload-perm-recipes.py`
- **ì›ë³¸ í´ë”**: `C:\Users\ê¹€ë¯¼ì¬\Desktop\2. í—¤ì–´ê²Œì´í„°_ì´ë¡ -20251105T045428Z-1-001\women_perm_recipe\`
- **ìë§‰ ì¶”ì¶œ**: `scripts/extract-perm-captions.py` (Gemini Vision API)

#### ì„œë²„ ì²˜ë¦¬ íë¦„ (chatbot-api.js)
1. í´ë¼ì´ì–¸íŠ¸ì—ì„œ `service: 'perm'` íŒŒë¼ë¯¸í„° ì „ì†¡
2. ì‹œë¦¬ì¦ˆ ì½”ë“œ ë³€í™˜: `F${lengthCode}L` â†’ `F${lengthCode}LP` (ì˜ˆ: FEL â†’ FELP)
3. Firestore ì¡°íšŒ ì‹œ `type === 'perm'` í•„í„° ì ìš©
4. `formatPermRecipe()` í•¨ìˆ˜ë¡œ í…ìŠ¤íŠ¸ ì „ì²˜ë¦¬:
   - "ìƒì„¸ì„¤ëª… í…ìŠ¤íŠ¸" OCR ì•„í‹°íŒ©íŠ¸ ì œê±°
   - Zoneë³„ ì„¹ì…˜ í—¤ë” ìë™ ìƒì„±
   - ì²œì²´ì¶•/ë‹¤ì´ë ‰ì…˜/í”„ë ˆìŠ¤ í‚¤ì›Œë“œ ê°•ì¡°

#### ì£¼ì˜ì‚¬í•­
- `getFirestoreStyles()` í•¨ìˆ˜ì—ì„œ `type` í•„ë“œ ë°˜ë“œì‹œ í¬í•¨í•´ì•¼ íŒ í•„í„°ë§ ê°€ëŠ¥
- ë„í•´ë„ ì—†ëŠ” íŒ ë ˆì‹œí”¼ë„ textRecipe(ìë§‰)ëŠ” ëª¨ë‘ ìˆìŒ
- ë‚¨ì íŒ ë ˆì‹œí”¼ëŠ” ì•„ì§ ë¯¸ì§€ì›

#### ì›ë³¸ ë°ì´í„° ì˜¤ë¥˜ (ìˆ˜ì • í•„ìš”)
- **FBLP2001 í´ë”**: ë„í•´ë„ íŒŒì¼ì´ `FBLP2003_xxx.png`ë¡œ ì˜ëª» ëª…ëª…ë¨ â†’ `FBLP2001_xxx.png`ë¡œ ìˆ˜ì • í›„ ì¬ì—…ë¡œë“œ í•„ìš”

#### ë„í•´ë„ íŒŒì¼ëª… íŒ¨í„´ (3ê°€ì§€ ì§€ì›)
1. `{styleId}_001.png` - FALP0001_001.png
2. `{styleId}_001 â€“ 1.png` - FBLP0001_001 â€“ 1.png (ê³µë°±+ëŒ€ì‹œ+ê³µë°±+ìˆ«ì ì ‘ë¯¸ì‚¬)
3. `001.png` - ìˆœìˆ˜ ìˆ«ì 3ìë¦¬ (FELP, FCLP ë“±)

## ê¸ˆì§€ ì‚¬í•­

### ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ì—ì„œ
- ìŠ¤íƒ€ì¼/í¬ë®¬ëŸ¬ ì½”ë“œ ê¸ˆì§€: `FAL0001`, `H1SQ_DB1_V6`
- ì„¹ì…˜ ì¡°í•© ì½”ë“œ ê¸ˆì§€: `DBS NO.2`, `VS NO.6`
- ì‹œìŠ¤í…œëª… ê¸ˆì§€: `CHRISKI`, `2WAY CUT ì‹œìŠ¤í…œ`

### í—ˆìš© ì‚¬í•­
- ê¸°ìˆ  ìš©ì–´ í—ˆìš©: `D0~D8`, `L0~L8`, `Zone`, `Section`

### ë§ˆí¬ë‹¤ìš´ ì„œì‹
- ì±„íŒ… ì‘ë‹µ: `**`, `###`, `-` ë¦¬ìŠ¤íŠ¸ ê¸ˆì§€, ì¼ë°˜ í…ìŠ¤íŠ¸ë§Œ
- ë ˆì‹œí”¼ ìƒì„¸ê°€ì´ë“œ: ë§ˆí¬ë‹¤ìš´ í¬ë§· í—ˆìš© (ì˜ë„ì )

## ì´ë¯¸ì§€ ë§¤ì¹­ ë¡œì§
- `detectTheoryImageForQuery()` í•¨ìˆ˜
- 2ê¸€ì ì´í•˜ í‚¤ì›Œë“œ ë¬´ì‹œ
- ì œì™¸ í‚¤ì›Œë“œ: `ê°€ë¡œ`, `ì„¸ë¡œ`, `ìˆ˜í‰`, `ìˆ˜ì§`, `ëŒ€ê°`, `ë°©í–¥`, `ê°ë„` ë“±

## ë°°í¬
- GitHub: `kimminjae413/hairgator-menu-final`
- Netlify: ìë™ ë°°í¬ (pushí•˜ë©´ 1-2ë¶„ í›„ ì ìš©)

## ë‹¤êµ­ì–´ ì§€ì› (5ê°œêµ­ì–´)
- ì§€ì› ì–¸ì–´: í•œêµ­ì–´(ko), ì˜ì–´(en), ì¼ë³¸ì–´(ja), ì¤‘êµ­ì–´(zh), ë² íŠ¸ë‚¨ì–´(vi)
- `detectLanguage()` í•¨ìˆ˜: ì‚¬ìš©ì ì…ë ¥ ì–¸ì–´ ìë™ ê°ì§€ (fallbackìš©)
- **í´ë¼ì´ì–¸íŠ¸ language íŒŒë¼ë¯¸í„° ìš°ì„ **: ai-studio.jsì—ì„œ `localStorage.getItem('hairgator_language')` ê°’ì„ ì„œë²„ë¡œ ì „ì†¡ â†’ ì„œë²„ì—ì„œ ìš°ì„  ì‚¬ìš© (koâ†’korean ë§¤í•‘)
- `buildGeminiSystemPrompt()`: ê° ì–¸ì–´ë³„ ì „ì²´ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ì¡´ì¬
- ì¸ì‚¬ë§/ë³´ì•ˆ ì‘ë‹µ ë©”ì‹œì§€: 5ê°œêµ­ì–´ ì „ì²´ ì§€ì›
- ì¸ì‚¬ë§ í‚¤ì›Œë“œ: ì•ˆë…•, hello, ã“ã‚“ã«ã¡ã¯, ä½ å¥½, xin chÃ o ë“±

### ë‹¤êµ­ì–´ ìˆ˜ì • ì‹œ í•„ìˆ˜ ì‘ì—… ìˆœì„œ
1. **js/i18n.js** - ë²ˆì—­ í‚¤ ì¶”ê°€ (5ê°œêµ­ì–´ ëª¨ë‘ ë™ì¼í•œ í‚¤ ì¶”ê°€ í•„ìˆ˜)
   - êµ¬ì¡°: `HAIRGATOR_I18N.{lang}.personalColor.personalAnalysis.{í‚¤}`
   - ì–¸ì–´ë³„ ìœ„ì¹˜: ko(~600ë¼ì¸), en(~1200ë¼ì¸), ja(~1800ë¼ì¸), zh(~2400ë¼ì¸), vi(~3000ë¼ì¸)
2. **HTML íŒŒì¼** - `data-i18n` ë˜ëŠ” `data-i18n-html` ì†ì„± ì¶”ê°€
   - í…ìŠ¤íŠ¸: `data-i18n="personalColor.personalAnalysis.í‚¤"`
   - HTML í¬í•¨: `data-i18n-html="personalColor.personalAnalysis.í‚¤"`
3. **app.js (ë™ì  ìƒì„± í…ìŠ¤íŠ¸)** - `t()` í•¨ìˆ˜ ì‚¬ìš©
   - ì˜ˆ: `t('personalColor.personalAnalysis.labelHeight') || 'Height'`
   - fallback ê°’ í•„ìˆ˜ ì§€ì •
4. **ë¬¸ë²• ê²€ì‚¬ í•„ìˆ˜**: `node -c js/i18n.js && node -c personal-color/app.js`
5. **ì£¼ì˜ì‚¬í•­**:
   - í…œí”Œë¦¿ ë¦¬í„°ëŸ´(`${...}`)ì„ ì¼ë°˜ ë¬¸ìì—´('')ì•ˆì— ë„£ì§€ ë§ ê²ƒ
   - i18n.jsì—ì„œ ì„¹ì…˜ ì¶”ê°€ ì‹œ ì• ì„¹ì…˜ ëì— ì½¤ë§ˆ(,) í™•ì¸
   - í•œ ì–¸ì–´ë§Œ ì¶”ê°€í•˜ë©´ ì•ˆë¨ - ë°˜ë“œì‹œ 5ê°œêµ­ì–´ ëª¨ë‘ ì¶”ê°€

## scripts í´ë” (ë¡œì»¬ ì „ìš©, .gitignoreë¨)
- `upload-all-to-file-search.py`: Gemini File Search Storeì— PDF ì—…ë¡œë“œ
- `upload-color-theory.py`: ì»¬ëŸ¬ ì´ë¡  ì´ë¯¸ì§€ ë¶„ì„ í›„ Firestore ì €ì¥
- `extract-personal-analysis-text.py`: í¼ìŠ¤ë„ ë¶„ì„ ì´ë¯¸ì§€ í…ìŠ¤íŠ¸ ì¶”ì¶œ
- `upload-personal-analysis-image.py`: Firebase Storageì— ì´ë¯¸ì§€ ì—…ë¡œë“œ
- `merge-cut-captions.py`: ì»¤íŠ¸ ìë§‰ 138ê°œ ë³‘í•© (ì—¬ì 69 + ë‚¨ì 69)
- `upload-cut-captions-to-rag.py`: ë³‘í•©ëœ ì»¤íŠ¸ ìë§‰ì„ RAG Storeì— ì—…ë¡œë“œ
- `upload-perm-indexes.py`: íŒ ì¸ë±ìŠ¤ ì´ë¯¸ì§€ Firebase Storage ì—…ë¡œë“œ + Firestore ì €ì¥
- `fix-perm-index-merge.py`: íŒ ì¸ë±ìŠ¤ ì–¸ì–´ë³„ ë¬¸ì„œë¥¼ í•˜ë‚˜ë¡œ ë³‘í•©
- `format-perm-recipes.py`: íŒ ë ˆì‹œí”¼ ìë§‰ í…ìŠ¤íŠ¸ Zoneë³„ ë¬¸ë‹¨ ì •ë¦¬ â†’ Firestore ì—…ë°ì´íŠ¸
- `upload-perm-thumbnails.py`: íŒ ë„í•´ë„ 300px ì¸ë„¤ì¼ ë³€í™˜ í›„ Firebase Storage ë®ì–´ì“°ê¸°
- `extract-perm-captions-additional.py`: ì¶”ê°€ë¶„ 11ê°œ íŒ ë ˆì‹œí”¼ ìë§‰ ì¶”ì¶œ (Gemini Vision)
- `upload-perm-recipes-additional.py`: ì¶”ê°€ë¶„ íŒ ë ˆì‹œí”¼ Firebase Storage + Firestore ì—…ë¡œë“œ
- `upload-perm-thumbnails-additional.py`: ì¶”ê°€ë¶„ íŒ ë„í•´ë„ ì¸ë„¤ì¼ ë³€í™˜
- `upload-hair-care-guide.py`: í—¤ì–´ì¼€ì–´ ì œí’ˆ ê°€ì´ë“œ RAG ì—…ë¡œë“œ (íŠ¸ë¦¬íŠ¸ë¨¼íŠ¸/ë¦°ìŠ¤/ì»¨ë””ì…”ë„ˆ)

## í¬ë¦¬ìŠ¤ë§ˆìŠ¤ íš¨ê³¼ (ê°„ì†Œí™”ë¨ - 2025-12-14)

### í˜„ì¬ ìƒíƒœ: ëˆˆë‚´ë¦¬ê¸°ë§Œ ìœ ì§€
- ë‹¤í¬ëª¨ë“œì—ì„œë§Œ ëˆˆë‚´ë¦¬ê¸° íš¨ê³¼ í‘œì‹œ
- ë¼ì´íŠ¸ëª¨ë“œì—ì„œëŠ” íš¨ê³¼ ì—†ìŒ
- **ì œê±°ëœ íš¨ê³¼ë“¤**: íŠ¸ë¦¬, ì„ ë¬¼, ë©”ë¦¬í¬ë¦¬ìŠ¤ë§ˆìŠ¤ í…ìŠ¤íŠ¸, ë°œìêµ­, ëˆˆì‚¬ëŒ, ë²„íŠ¼ ëˆˆìŒ“ì„

### í•µì‹¬ í•¨ìˆ˜
- `createSnowflakes()`: ëˆˆë‚´ë¦¬ê¸° íš¨ê³¼ (main.js)
- `snowflakeInterval`: ì „ì—­ ë³€ìˆ˜ë¡œ ì¸í„°ë²Œ ê´€ë¦¬

### ì¡°ê±´
- `isGenderSelectionVisible()`: ì„±ë³„ ì„ íƒ í™”ë©´ì—ì„œë§Œ í‘œì‹œ
- `document.body.classList.contains('light-theme')`: ë‹¤í¬ëª¨ë“œ ì²´í¬

## OhMyApp (ë¶ˆë‚˜ë¹„ ì•± ê´€ë¦¬ì) ì‚¬ìš©ë²•

### ì ‘ì† ì •ë³´
- **URL**: https://drylink.ohmyapp.io/
- **ì£¼ìš” ë©”ë‰´**: ìš´ì˜ ëª¨ë“œ, ë©”ë‰´ ì„¤ì •, ì•± ì„¤ì •, ë¡œì§ ì„¤ì •, ì˜µì…˜ ì„¤ì •, í™˜ê²½ ì„¤ì •

### ë¡œì§ ì„¤ì • (eventflowSettings)
ê²°ì œ ì™„ë£Œ í›„ DB ì—…ë°ì´íŠ¸ ë“± ìë™í™” ë¡œì§ì„ ì„¤ì •í•˜ëŠ” ê³³

**ë¡œì§ êµ¬ì¡°:**
```
If When: [ì´ë²¤íŠ¸ëª…] (ì˜ˆ: ticketCount - ê²°ì œ ì™„ë£Œ ì´ë²¤íŠ¸)
Where: [ë°ì´í„° ì†ŒìŠ¤] (ì˜ˆ: ticketCount)
Condition: [ì¡°ê±´] (ì˜ˆ: productCategory == "plan")
Then: [ë™ì‘] (ì˜ˆ: ê¸°ì¡´ ë°ì´í„°ë¥¼ ìˆ˜ì •)
  - ì»¬ë ‰ì…˜ ëª…: _users
  - ê²€ìƒ‰ ì¡°ê±´: _id = userDoc._id
  - ìˆ˜ì •í•˜ë ¤ëŠ” ì–‘: tokenBalance += tokenCount
```

**MUI Autocomplete ì…ë ¥ íŒ:**
- ì»¤ìŠ¤í…€ ê°’ ì…ë ¥ ì‹œ í…ìŠ¤íŠ¸ë°•ìŠ¤ì— ì§ì ‘ íƒ€ì´í•‘ í›„ Enter
- "choose" ë˜ëŠ” "Entry" ì˜µì…˜ì´ ë‚˜íƒ€ë‚˜ë©´ í´ë¦­í•˜ì—¬ ì„ íƒ
- ê°’ì´ ì•ˆ ë“¤ì–´ê°€ë©´ í•œ ê¸€ìì”© íƒ€ì´í•‘ í›„ 50ms ëŒ€ê¸°

### ì˜µì…˜ ì„¤ì • (codeSettings)
ë“œë¡­ë‹¤ìš´ ì„ íƒì§€ ë“± ì½”ë“œ ì˜µì…˜ì„ ê´€ë¦¬í•˜ëŠ” ê³³

**ìƒí’ˆ ë¶„ë¥˜ (productCategory) ì˜µì…˜:**
- `content`: ì»¨í…ì¸  ìƒì„±ê¶Œ (AIíšŸìˆ˜ê¶Œ) â†’ remainCount ì¦ê°€
- `plan`: í”Œëœ (í—¤ì–´ê²Œì´í„° í† í°) â†’ tokenBalance ì¦ê°€

### ì œí’ˆ ë‚´ì—­ (AI, ìƒê¶Œ íƒ­)
ì•± ë‚´ íŒë§¤ ìƒí’ˆì„ ë“±ë¡/ê´€ë¦¬í•˜ëŠ” ê³³

**ìƒí’ˆ ë“±ë¡ ì‹œ í•„ìˆ˜ í•„ë“œ:**
- ìƒí’ˆ ë¶„ë¥˜: content ë˜ëŠ” plan ì„ íƒ
- íšŸìˆ˜: í† í° ìˆ˜ëŸ‰ (ì˜ˆ: 10000, 18000, 25000)
- ìƒí’ˆ ê°€ê²©: ì›í™” ê¸ˆì•¡
- ìƒí’ˆ ì•ˆë‚´: ìƒí’ˆ ì„¤ëª…

### í˜„ì¬ ì„¤ì •ëœ ë¡œì§

**[ì£¼ë¬¸] ê²°ì œ í›„ íšŸìˆ˜ê¶Œ ì¦ê°€** (ê¸°ì¡´)
- ì¡°ê±´: `productCategory == "content"`
- ë™ì‘: `_users.remainCount += contentCount`

**[ì£¼ë¬¸] ê²°ì œ í›„ í† í° ì¶©ì „ (í”Œëœ)** (2025-12-24 ì¶”ê°€)
- ì¡°ê±´: `productCategory == "plan"`
- ë™ì‘: `_users.tokenBalance += tokenCount`

## ë¶ˆë‚˜ë¹„ â†’ í—¤ì–´ê²Œì´í„° ì™„ì „ ë…ë¦½ ë§ˆì´ê·¸ë ˆì´ì…˜ (2025-12-28 ì™„ë£Œ)

### ë°°ê²½
- **ë“œë¼ì´ë§í¬ ì•±** (ì¼ë°˜ì¸ìš©) â†’ registerType = "user"
- **ë“œë¼ì´ë§í¬ í¬ ë””ìì´ë„ˆ ì•±** (í—¤ì–´ë””ìì´ë„ˆìš©) â†’ registerType = "designer" â†’ **í—¤ì–´ê²Œì´í„°ë¡œ ë³€ê²½**
- ë¶ˆë‚˜ë¹„ ì•± ì¢…ì†ì—ì„œ ì™„ì „íˆ ë…ë¦½ëœ ì›¹ì•±ìœ¼ë¡œ ì „í™˜

### ë¶ˆë‚˜ë¹„ DB í˜„í™© (MongoDB ë¤í”„: C:\Users\ê¹€ë¯¼ì¬\Desktop\bullnabi)
- ì´ ì‚¬ìš©ì: 7,505ëª…
- ë””ìì´ë„ˆ (registerType=designer): 3,000ëª…+ â†’ `bullnabi_users` ì»¬ë ‰ì…˜ì— ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ë£Œ
- í—¤ì–´ê²Œì´í„° ì‹¤ì‚¬ìš©ì (tokenBalance/plan ìˆìŒ): 12ëª…
- ì†Œì…œ ë¡œê·¸ì¸: ì¹´ì¹´ì˜¤ 80%, êµ¬ê¸€ 12%, ì• í”Œ 8%

### ë§ˆì´ê·¸ë ˆì´ì…˜ ì‘ì—… ì™„ë£Œ ëª©ë¡
1. âœ… Firebase Auth ë¡œê·¸ì¸ (ì¹´ì¹´ì˜¤/êµ¬ê¸€/ì´ë©”ì¼)
2. âœ… ì´ë©”ì¼ ê¸°ë°˜ ì‚¬ìš©ì í†µí•© (`users` ì»¬ë ‰ì…˜)
3. âœ… `bullnabi_users` ì»¬ë ‰ì…˜ì— ë””ìì´ë„ˆ 3000ëª…+ ë§ˆì´ê·¸ë ˆì´ì…˜
4. âœ… bullnabi-proxy.js â†’ Firestore ì§ì ‘ ì ‘ê·¼ìœ¼ë¡œ ì „í™˜
5. âœ… ê²°ì œ ì‹œìŠ¤í…œ ë…ë¦½ (í¬íŠ¸ì› + Firestore ì§ì ‘ ì—°ë™)
6. â³ ë§ˆì´í˜ì´ì§€ ì™„ì„±

### ì‚­ì œëœ ë ˆê±°ì‹œ íŒŒì¼
- `js/bullnabi-bridge.js` (1,348ì¤„) â†’ `js/firebase-bridge.js`ë¡œ ëŒ€ì²´
- `js/dynamic-token-service.js` â†’ ë¯¸ì‚¬ìš©, ì‚­ì œ
- `netlify/functions/bullnabi-proxy.js` (1,498ì¤„) â†’ Firestore ì§ì ‘ ì ‘ê·¼ìœ¼ë¡œ ëŒ€ì²´
- `netlify/functions/token-api.js` (334ì¤„) â†’ DEPRECATED, ì‚­ì œ

### í˜¸í™˜ì„± ìœ ì§€ ë ˆì´ì–´
- `window.BullnabiBridge` â†’ `window.FirebaseBridge` ë³„ì¹­ ì œê³µ
- `window.getBullnabiUser()` â†’ Firebase ì‚¬ìš©ì ì •ë³´ë¥¼ ë¶ˆë‚˜ë¹„ í˜•ì‹ìœ¼ë¡œ ë°˜í™˜
- localStorage `firebase_user` â†’ ì‚¬ìš©ì ì •ë³´ ìºì‹±

### Firestore ì»¬ë ‰ì…˜ êµ¬ì¡°

#### `users` ì»¬ë ‰ì…˜ (ì´ë©”ì¼ ê¸°ë°˜ ë¬¸ì„œ ID)
```javascript
{
  // ë¬¸ì„œ ID: "708eric_hanmail_net" (ì´ë©”ì¼ sanitize)
  email: "708eric@hanmail.net",
  name: "ê¹€ë¯¼ì¬",
  phone: "01052592709",
  displayName: "ê¹€ë¯¼ì¬",
  photoURL: "https://...",

  // ì¸ì¦ ì •ë³´
  linkedProviders: {
    kakao: { uid: "kakao_4556280939", kakaoId: 4556280939, linkedAt: Timestamp },
    google: { uid: "firebase_uid", linkedAt: Timestamp }
  },
  primaryProvider: "kakao",

  // í—¤ì–´ê²Œì´í„° ë°ì´í„°
  tokenBalance: 8020,
  plan: "basic",  // free, basic, pro, business

  // ì„¤ì •
  language: "ko",
  isMarketing: true,
  servicePush: true,

  // ë©”íƒ€
  createdAt: Timestamp,
  lastLoginAt: Timestamp,
  migratedFromBullnabi: true,
  bullnabiUserId: "691ceee09d868b5736d22007"
}
```

#### `bullnabi_users` ì»¬ë ‰ì…˜ (ë§ˆì´ê·¸ë ˆì´ì…˜ìš©, ì½ê¸° ì „ìš©)
- ë¶ˆë‚˜ë¹„ì—ì„œ ë§ˆì´ê·¸ë ˆì´ì…˜í•œ ë””ìì´ë„ˆ ì›ë³¸ ë°ì´í„°
- ë¡œê·¸ì¸ ì‹œ ì´ë©”ì¼ ë§¤ì¹­ìœ¼ë¡œ `users`ë¡œ ë³µì‚¬

## ìµœê·¼ ì‘ì—… ì´ë ¥
- 2025-12-29: admin.html í—¤ì–´ìŠ¤íƒ€ì¼ ê´€ë¦¬ + í†µê³„ Firebase ì—°ë™

  ### í—¤ì–´ìŠ¤íƒ€ì¼ ê´€ë¦¬ Firebase ì—°ê²° ìˆ˜ì •
  - **ì»¬ë ‰ì…˜ ë³€ê²½**: `men_styles`/`styles` â†’ `hairstyles` (ë©”ì¸ ë©”ë‰´íŒê³¼ ë™ì¼)
  - **ì¹´í…Œê³ ë¦¬ëª… ìˆ˜ì •**: ëŒ€ë¬¸ì â†’ Title Case (`A LENGTH` â†’ `A Length`, `SIDE FADE` â†’ `Side Fade`)
  - **gender í•„í„° ì¶”ê°€**: `.where('gender', '==', gender)` ì¿¼ë¦¬ ì¶”ê°€
  - **openStyleDetail í•¨ìˆ˜ ìˆ˜ì •**: gender íŒŒë¼ë¯¸í„° ì¶”ê°€í•˜ì—¬ ìƒˆ ì°½ì—ì„œ ìŠ¤íƒ€ì¼ ìƒì„¸ ì—´ê¸°

  ### ì‚¬ìš© í†µê³„ì— í—¤ì–´ìŠ¤íƒ€ì¼ í†µê³„ ì¶”ê°€
  - **ìŠ¤íƒ€ì¼ ìˆ˜ ì¹´ë“œ**: ì „ì²´/ë‚¨ì„±/ì—¬ì„± ìŠ¤íƒ€ì¼ ìˆ˜ í‘œì‹œ
  - **ì„±ë³„ ë¹„ìœ¨ ë„ë„› ì°¨íŠ¸**: Chart.js ì‚¬ìš© (ë‚¨ì„± íŒŒë€ìƒ‰, ì—¬ì„± í•‘í¬ìƒ‰)
  - **ë‚¨ì„± ì¹´í…Œê³ ë¦¬ë³„ ë°” ì°¨íŠ¸**: SF, SP, FU, PB, BZ, CR, MH (ì¶•ì•½í˜• ë¼ë²¨)
  - **ì—¬ì„± ì¹´í…Œê³ ë¦¬ë³„ ë°” ì°¨íŠ¸**: A~H Length
  - **loadHairstyleStats() í•¨ìˆ˜**: hairstyles ì»¬ë ‰ì…˜ì—ì„œ í†µê³„ ì§‘ê³„
  - **ìë™ ë¡œë“œ**: loadUsageStats() í˜¸ì¶œ ì‹œ í•¨ê»˜ ë¡œë“œ

  ### ë‚¨ì ì¹´í…Œê³ ë¦¬ëª… ìˆ˜ì • (ì¤‘ìš”!)
  - **ì˜ëª»ëœ ê°’**: Side Fade, Full Up, Push Back, Mushroom/Home
  - **ì˜¬ë°”ë¥¸ ê°’ (Firestore ì‹¤ì œê°’)**: SIDE FRINGE, SIDE PART, FRINGE UP, PUSHED BACK, BUZZ, CROP, MOHICAN

  ### ì¤‘ë¶„ë¥˜(subCategory) ê°’ ìˆ˜ì • (ì¤‘ìš”!)
  - **ì˜ëª»ëœ ê°’**: 'N', 'FH', 'EB', 'E', 'CB' (ì¶•ì•½í˜•)
  - **ì˜¬ë°”ë¥¸ ê°’ (Firestore ì‹¤ì œê°’)**: 'None', 'Fore Head', 'Eye Brow', 'Eye', 'Cheekbone'

  ### ì»¤ë°‹
  - `feda316`: fix: admin.html í—¤ì–´ìŠ¤íƒ€ì¼ ê´€ë¦¬ Firebase ì—°ë™ + í†µê³„ ì°¨íŠ¸
  - `8eff504`: fix: admin.html ë‚¨ì ì¹´í…Œê³ ë¦¬ëª… Firestore ì‹¤ì œ ê°’ìœ¼ë¡œ ìˆ˜ì •
  - `74d5cf2`: fix: admin.html ì¤‘ë¶„ë¥˜ ê°’ Firestore ì‹¤ì œ ê°’ìœ¼ë¡œ ìˆ˜ì •

- 2025-12-28: ë¶ˆë‚˜ë¹„ ì™„ì „ ë…ë¦½ ë§ˆì´ê·¸ë ˆì´ì…˜ **ì™„ë£Œ**

  ### ì‚­ì œëœ íŒŒì¼ (ì´ 3,680ì¤„ ì œê±°)
  - `js/bullnabi-bridge.js` (1,348ì¤„)
  - `js/dynamic-token-service.js`
  - `netlify/functions/bullnabi-proxy.js` (1,498ì¤„)
  - `netlify/functions/token-api.js` (334ì¤„)

  ### ìˆ˜ì •ëœ íŒŒì¼
  - `lookbook.html`: bullnabi-proxy â†’ FirebaseBridge.deductTokens()
  - `login.html`: bullnabi-proxy â†’ Firestore bullnabi_users ì§ì ‘ ì¡°íšŒ
  - `netlify/functions/kakao-callback.js`: bullnabi-proxy â†’ Firestore ì§ì ‘ ì¡°íšŒ
  - `netlify/functions/payment-verify.js`: Bullnabi API â†’ Firestore ì§ì ‘ í† í° ì¶©ì „
  - `js/ai-studio.js`, `js/payment.js`, `payment-complete.html`: localStorage ì •ë¦¬
  - `index.html`, `dist/index.html`: ë ˆê±°ì‹œ ìŠ¤í¬ë¦½íŠ¸ ì°¸ì¡° ì œê±°

  ### ê²°ê³¼
  - ë¶ˆë‚˜ë¹„ API í˜¸ì¶œ **ì™„ì „ ì œê±°** (`drylink.ohmyapp.io` í˜¸ì¶œ ì—†ìŒ)
  - ëª¨ë“  í† í°/ì‚¬ìš©ì ë°ì´í„°ë¥¼ Firestoreì—ì„œ ì§ì ‘ ê´€ë¦¬
  - Firebase Auth + Firestore ê¸°ë°˜ ë…ë¦½ ì‹œìŠ¤í…œ ì™„ì„±

- 2025-12-27 (ì €ë…): ë¶ˆë‚˜ë¹„ â†’ Firebase Auth ë…ë¦½ ë§ˆì´ê·¸ë ˆì´ì…˜ âœ… ì™„ë£Œ

  ### ë°°ê²½
  - í—¤ì–´ê²Œì´í„° ì„œë¹„ìŠ¤ë¥¼ ë¶ˆë‚˜ë¹„ ì•± ì¢…ì†ì—ì„œ ì™„ì „ ë…ë¦½ ì›¹ì•±ìœ¼ë¡œ ì „í™˜
  - MongoDB ì˜ì¡´ì„± ì œê±°, Firebase Auth + Firestore ê¸°ë°˜ìœ¼ë¡œ ì¬êµ¬ì¶•
  - ë„ë©”ì¸: `hairgator.kr` (ê°€ë¹„ì•„ì—ì„œ êµ¬ë§¤)

  ### ì¸ì¦ ì‹œìŠ¤í…œ ë³€ê²½
  - **Firebase Auth** ë„ì…: Google, ì´ë©”ì¼/ë¹„ë°€ë²ˆí˜¸, ì¹´ì¹´ì˜¤ (Custom Token)
  - **ì‹ ê·œ íŒŒì¼**:
    - `login.html`: ë¡œê·¸ì¸ í˜ì´ì§€ (Google/ì¹´ì¹´ì˜¤/ì´ë©”ì¼ ì„ íƒ)
    - `js/firebase-bridge.js`: Firestore í† í° ê´€ë¦¬ (bullnabi-bridge.js ëŒ€ì²´)
    - `netlify/functions/kakao-callback.js`: ì¹´ì¹´ì˜¤ OAuth í•¸ë“¤ëŸ¬
  - **ìˆ˜ì • íŒŒì¼**:
    - `js/auth.js`: ë¶ˆë‚˜ë¹„ â†’ Firebase Auth ì „ë©´ êµì²´
    - `js/firebase-config.js`: Auth ì´ˆê¸°í™” ì¶”ê°€, Storage SDK ì„ íƒì  ì´ˆê¸°í™”
    - HTML 4ê°œ íŒŒì¼: bullnabi-bridge.js â†’ firebase-bridge.js ì°¸ì¡° ë³€ê²½

  ### ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ì—°ë™ ì™„ë£Œ âœ…
  - **ë„ë©”ì¸ ì—°ê²°**: `hairgator.kr` â†’ Netlify ì—°ê²° ì™„ë£Œ
  - **ì¹´ì¹´ì˜¤ ê°œë°œì ì½˜ì†” ì„¤ì • ì™„ë£Œ**:
    - ì•± ID: 1298589
    - ì•± ì´ë¦„: í—¤ì–´ê²Œì´í„°
    - ì›¹ ë„ë©”ì¸: `hairgator.kr`
    - Redirect URI: `https://hairgator.kr/.netlify/functions/kakao-callback`
  - **OAuth í”Œë¡œìš° í…ŒìŠ¤íŠ¸ í†µê³¼**:
    1. ì¹´ì¹´ì˜¤ OAuth ë¦¬ë‹¤ì´ë ‰íŠ¸ ì •ìƒ
    2. ì•¡ì„¸ìŠ¤ í† í° ë°œê¸‰ ì„±ê³µ
    3. Firebase Custom Token ìƒì„± ì„±ê³µ
    4. Firestore ì‚¬ìš©ì ì €ì¥ (`kakao_4665545967`)
    5. ì‹ ê·œ ì‚¬ìš©ì 200 í† í° ìë™ ì§€ê¸‰
    6. ë©”ì¸ í˜ì´ì§€ ìë™ ë¦¬ë‹¤ì´ë ‰íŠ¸
  - **ìˆ˜ì •í•œ ë²„ê·¸**:
    - `kakao-callback.js`: Firebase Admin ì´ˆê¸°í™”ë¥¼ í•¸ë“¤ëŸ¬ ë‚´ë¶€ë¡œ ì´ë™ (í™˜ê²½ë³€ìˆ˜ ëˆ„ë½ ì‹œ ìƒì„¸ ë¡œê·¸ ì¶œë ¥)
    - `firebase-config.js`: Storage SDK ì„ íƒì  ì´ˆê¸°í™” (login.htmlì—ì„œ Storage SDK ì—†ì–´ë„ ì—ëŸ¬ ì•ˆë‚¨)

  ### Firestore ì‚¬ìš©ì ìŠ¤í‚¤ë§ˆ (`users` ì»¬ë ‰ì…˜)
  ```javascript
  {
    uid: "firebase_uid ë˜ëŠ” kakao_12345",
    email: "user@example.com",
    displayName: "í™ê¸¸ë™",
    photoURL: "https://...",
    provider: "google" | "kakao" | "email",
    tokenBalance: 200,  // ì‹ ê·œ ê°€ì… ì‹œ 200 í† í° ì§€ê¸‰
    plan: "free",
    createdAt: Timestamp,
    lastLoginAt: Timestamp
  }
  ```

  ### í˜¸í™˜ì„± ìœ ì§€
  - `window.BullnabiBridge` ë³„ì¹­ ìœ ì§€ (ê¸°ì¡´ ì½”ë“œ í˜¸í™˜)
  - `getBullnabiUser()` í•¨ìˆ˜ ìœ ì§€ (Firebase í˜•ì‹ìœ¼ë¡œ ë³€í™˜)
  - `window.currentDesigner` êµ¬ì¡° ìœ ì§€

  ### Netlify í™˜ê²½ë³€ìˆ˜ (í•„ìˆ˜) - 2025-12-29 ì—…ë°ì´íŠ¸

  **í˜„ì¬ ì„¤ì •ë¨ âœ…:**
  | ë³€ìˆ˜ëª… | ê°’ | ìš©ë„ |
  |--------|-----|------|
  | `FIREBASE_PROJECT_ID` | `hairgatormenu-4a43e` | Firebase í”„ë¡œì íŠ¸ |
  | `FIREBASE_CLIENT_EMAIL` | `firebase-adminsdk-fbsvi@hairgatormenu-4a43e.iam.gserviceaccount.com` | Firebase Admin |
  | `FIREBASE_PRIVATE_KEY` | (ë¹„ê³µê°œ) | Firebase Admin ì¸ì¦ |
  | `GEMINI_API_KEY` | (ë¹„ê³µê°œ) | Gemini AI - ì±—ë´‡/RAG |
  | `GEMINI_API_KEY_ADMIN` | (ë¹„ê³µê°œ) | Gemini AI - ì–´ë“œë¯¼ìš© |

  **ì¶”ê°€ í•„ìš” (2025-12-29 í™•ì¸ë¨):**
  | ë³€ìˆ˜ëª… | ê°’ | ìš©ë„ |
  |--------|-----|------|
  | `KAKAO_REST_API_KEY` | `e085ad4b34b316bdd26d67bf620b2ec9` | ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ |
  | `VMODEL_API_KEY` | `Zqo2gbuOlkQW1hO7LezeOPboIutgLi6pjwXmB0NBRMQh1jAJ-au4f1H0OMcfvWAvwPR-xcKdCfMwsSIyueVu0A==` | í—¤ì–´ì²´í—˜ AI í•©ì„± |
  | `PORTONE_API_SECRET` | `JEf3Ux7c+ixp74j1j4VxbMX12ww+zZYTUBx4GMCS6WHm/aNiVJbyHhUmTj7psIMI5u2nRE40meIkoh8ln6KS5w==` | ê²°ì œ ê²€ì¦ |

  **API í‚¤ í™•ì¸ ìœ„ì¹˜:**
  - **KAKAO_REST_API_KEY**: https://developers.kakao.com â†’ ì•± ì„¤ì • â†’ ì•± í‚¤ (ì•± ID: 1298589)
  - **VMODEL_API_KEY**: https://www.vmodel.ai â†’ Dashboard â†’ API Keys
  - **PORTONE_API_SECRET**: https://admin.portone.io â†’ ê²°ì œì—°ë™ â†’ API í‚¤ â†’ V2 API Secret (ì´ë¦„: hairgator_pay)

  ### âš ï¸ TODO: ë¶ˆë‚˜ë¹„ ì‚¬ìš©ì ì¼ê´„ ë§ˆì´ê·¸ë ˆì´ì…˜ (1ì£¼ì¼ ë‚´ ì‹¤í–‰ í•„ìš”!)

  **ë°°ê²½**: ë¶ˆë‚˜ë¹„ APIê°€ 1ì£¼ì¼ í›„ ì¢…ë£Œë¨. ê·¸ ì „ì— ê¸°ì¡´ ë””ìì´ë„ˆ ë°ì´í„°ë¥¼ ëª¨ë‘ Firestoreë¡œ ë³µì‚¬í•´ì•¼ í•¨.

  **ìŠ¤í¬ë¦½íŠ¸ ìœ„ì¹˜**: `scripts/migrate-bullnabi-users.js`

  **ì‹¤í–‰ ë°©ë²•**:
  ```bash
  cd C:\Users\ê¹€ë¯¼ì¬\Desktop\Hairgator_chatbot
  node scripts/migrate-bullnabi-users.js
  ```

  **í•„ìš” í™˜ê²½ë³€ìˆ˜** (.env íŒŒì¼ì— ì„¤ì •):
  - `BULLNABI_LOGIN_ID`: ë¶ˆë‚˜ë¹„ ê´€ë¦¬ì ì´ë©”ì¼
  - `BULLNABI_LOGIN_PW`: ë¶ˆë‚˜ë¹„ ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸
  - `FIREBASE_PROJECT_ID`, `FIREBASE_CLIENT_EMAIL`, `FIREBASE_PRIVATE_KEY`

  **ìŠ¤í¬ë¦½íŠ¸ ë™ì‘**:
  1. ë¶ˆë‚˜ë¹„ APIì—ì„œ `registerType == "ë””ìì´ë„ˆ"` ì „ì²´ ì¡°íšŒ
  2. Firestore `bullnabi_users` ì»¬ë ‰ì…˜ì— ì €ì¥ (email ê¸°ì¤€)
  3. ë‚˜ì¤‘ì— ë¡œê·¸ì¸ ì‹œ ì´ë©”ì¼ ë§¤ì¹­ìœ¼ë¡œ `users` ì»¬ë ‰ì…˜ìœ¼ë¡œ ì´ë™

  **ë§ˆì´ê·¸ë ˆì´ì…˜ í”Œë¡œìš°** (ì´ë¯¸ êµ¬í˜„ë¨):
  - `kakao-callback.js`: ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ì‹œ ë¶ˆë‚˜ë¹„ ì´ë©”ì¼ ë§¤ì¹­ â†’ tokenBalance/plan ë§ˆì´ê·¸ë ˆì´ì…˜
  - `login.html`: Google/ì´ë©”ì¼ ë¡œê·¸ì¸ ì‹œ ë™ì¼í•˜ê²Œ ë§ˆì´ê·¸ë ˆì´ì…˜
  - `migratedFromBullnabi: true` í”Œë˜ê·¸ë¡œ ì¤‘ë³µ ë°©ì§€

- 2025-12-27: AI ìŠ¤íƒ€ì¼ ë§¤ì¹­ ëª¨ë‹¬ ì™„ì„± + ëˆˆì¹ ë¶„ì„ ì¶”ê°€

  ### ëˆˆì¹ ë¶„ì„ ê¸°ëŠ¥
  - **5-point ëœë“œë§ˆí¬ ì‹œìŠ¤í…œ**: start, prePeak, peak, postPeak, end
  - **ëˆˆì¹ ë¼ì¸ ë¶„ì„ (Eyebrow Line)**:
    - Arch_Ratio: (baseLineY - peak.y) / browWidth â†’ ì•„ì¹˜í˜•/ìì—°í˜•/ì¼ìí˜•
    - Tail_Angle: Math.atan2(dy, dx) â†’ ìƒìŠ¹/í•˜ê°• ê°ë„
  - **ëˆˆì¹ í…ìŠ¤ì²˜ ë¶„ì„ (Eyebrow Texture)**:
    - Density: í”½ì…€ ë°€ë„ ë¶„ì„ â†’ Hard/Soft/Medium
    - Thickness: ëˆˆì¹ ë‘ê»˜ ë¹„ìœ¨
  - **ë¶„ë¥˜ ê²°ê³¼**:
    - ì•„ì¹˜í˜•(Arched): ì›ê³„, ê³¡ì„ ë¯¸ ê°•ì¡°
    - ìì—°í˜•(Natural): ë‰´íŠ¸ëŸ´ê³„, ë°¸ëŸ°ìŠ¤
    - ì¼ìí˜•(Straight): ì¿¨ê³„, ì„¸ë ¨ëœ ëŠë‚Œ
  - **í•¨ìˆ˜**: `analyzeEyebrowLine()`, `classifyEyebrowLine()`, `analyzeEyebrowTexture()`, `analyzeEyebrows()`
  - **null ì²´í¬ ë²„ê·¸ ìˆ˜ì •**: lineDataê°€ nullì¼ ë•Œ ê¸°ë³¸ê°’ ë°˜í™˜

  ### ìŠ¤íƒ€ì¼ ëª¨ë‹¬ ê°œì„ 
  - **ë²„íŠ¼ ì˜ë¦¼ ë¬¸ì œ í•´ê²°**:
    - ì´ë¯¸ì§€ max-height: 40vh, aspect-ratio: 1/1ë¡œ ì¶•ì†Œ
    - overflow-y: autoë¡œ ìŠ¤í¬ë¡¤ ê°€ëŠ¥í•˜ê²Œ
  - **ë²„íŠ¼ ìŠ¤íƒ€ì¼ ë©”ì¸ ì„œë¹„ìŠ¤ í†µì¼**:
    - ë£©ë¶/ì²´í—˜í•˜ê¸°: í•‘í¬ ê·¸ë¼ë°ì´ì…˜ (`rgba(233,30,99,...)`)
    - ë ˆì‹œí”¼: ë¯¸ë‹ˆë©€ íšŒìƒ‰ í…Œë‘ë¦¬
  - **ìºì‹œ ë²„ìŠ¤íŒ…**: app.js, styles.cssì— ë²„ì „ ì¿¼ë¦¬ ì¶”ê°€ (`?v=20251227-modal-fix`)

  ### ë£©ë¶/ì²´í—˜í•˜ê¸°/ë ˆì‹œí”¼ ë²„íŠ¼ ë©”ì¸ ì„œë¹„ìŠ¤ ì—°ë™
  - **URL íŒŒë¼ë¯¸í„° ì²˜ë¦¬** (main.js `checkUrlForStyleModal()`):
    - `action` íŒŒë¼ë¯¸í„° ì¶”ê°€: lookbook, hairtry, recipe
    - `styleId` íŒŒë¼ë¯¸í„°ë¡œ ìŠ¤íƒ€ì¼ ì¡°íšŒ
  - **ìŠ¤íƒ€ì¼ ì¡°íšŒ ê°œì„ **:
    - document IDë¡œ ì§ì ‘ ì¡°íšŒ ì‹œë„ (style-match í˜¸í™˜)
    - styleId í•„ë“œë¡œ ì¿¼ë¦¬ (í´ë°±)
  - **actionë³„ ê¸°ëŠ¥ ì‹¤í–‰**:
    - lookbook/hairtry: `HAIRGATOR_MENU.openAIPhotoModal()` í˜¸ì¶œ
    - recipe: `navigateToRecipe()` í˜¸ì¶œ
  - **íŒŒì¼ ìœ„ì¹˜**:
    - style-match/app.js: `goToLookbook()`, `goToHairTry()`, `goToRecipe()`
    - js/main.js: `checkUrlForStyleModal()` í™•ì¥

- 2025-12-26: AI ìŠ¤íƒ€ì¼ ë§¤ì¹­ + ì´ë¯¸ì§€ íƒ€ì… ì‹œìŠ¤í…œ ì¶”ê°€

  ### AI ìŠ¤íƒ€ì¼ ë§¤ì¹­ (ì–¼êµ´ ëœë“œë§ˆí¬ ê¸°ë°˜ í—¤ì–´ìŠ¤íƒ€ì¼ ì¶”ì²œ)
  - **ìœ„ì¹˜**: ì‚¬ì´ë“œë°” "í¼ìŠ¤ë„ì»¬ëŸ¬" ìœ„ì— "AI ìŠ¤íƒ€ì¼ ë§¤ì¹­" ë©”ë‰´ ì¶”ê°€
  - **í´ë”**: `style-match/` (index.html, app.js, styles.css)
  - **ê¸°ìˆ **:
    - MediaPipe Face Mesh (468 ëœë“œë§ˆí¬ í¬ì¸íŠ¸)
    - í´ë¼ì´ì–¸íŠ¸ ì‹¤í–‰ (API ë¹„ìš© 0ì›)
  - **ë¶„ì„ í•­ëª©**:
    - ìƒì•ˆë¶€/ì¤‘ì•ˆë¶€/í•˜ì•ˆë¶€ ë¹„ìœ¨ (í—¤ì–´ë¼ì¸-ë¯¸ê°„-ì½”ë-í„±ë)
    - ê´‘ëŒ€/í„± ë¹„ìœ¨ (ì–¼êµ´í˜• íŒë³„: ê³„ë€í˜•, ì‚¬ê°í˜•, í•˜íŠ¸í˜•, ê¸´ì–¼êµ´ ë“±)
    - **ëˆˆ ì‚¬ì´ ê±°ë¦¬ ë¹„ìœ¨** (ì´ë¯¸ì§€ íƒ€ì… ê²°ì •ìš©)
  - **ì¶”ì²œ ë¡œì§**:
    - ì„±ë³„ë³„ ëŒ€ë¶„ë¥˜ ì¹´í…Œê³ ë¦¬ë³„ TOP 3 ì¶”ì²œ
    - ì—¬ì: A~H LENGTH (8ê°œ ì¹´í…Œê³ ë¦¬)
    - ë‚¨ì: SF/SP/FU/PB/BZ/CR/MH (7ê°œ ì¹´í…Œê³ ë¦¬)
    - ìŠ¤ì½”ì–´ë§: ì¶”ì²œ ì¡°ê±´ +30ì , íšŒí”¼ ì¡°ê±´ -50ì , **ì´ë¯¸ì§€ íƒ€ì… ë¬´ë“œ ë§¤ì¹­ Â±15ì **
  - **í•µì‹¬ ê¸°ëŠ¥**: **ì™œ ì¶”ì²œí•˜ëŠ”ì§€ ì´ìœ  ìƒì„¸ ì„¤ëª…**
    - ëœë“œë§ˆí¬ê°„ ê±°ë¦¬/ë¹„ìœ¨ ìˆ˜ì¹˜ í‘œì‹œ
    - ì–´ë–¤ ë‹¨ì ì„ ë³´ì™„í•˜ëŠ”ì§€ ì„¤ëª…
  - **ë””ìì¸**: í´ë¦¬ë‹ˆì»¬ ë·°í‹° (Playfair Display í°íŠ¸, ê³¨ë“œ/ë¯¼íŠ¸ ì•¡ì„¼íŠ¸)
  - **5ê°œêµ­ì–´ ì§€ì›**: ko, en, ja, zh, vi
  - **i18n í‚¤**: `styleMatch.*` (menuTitle, uploadTitle, faceMetrics, faceType, imageType, eyeDistance ë“±)

  ### ì´ë¯¸ì§€ íƒ€ì… ë¶„ì„ ì‹œìŠ¤í…œ (ì›œê³„/ë‰´íŠ¸ëŸ´/ì¿¨ê³„)
  - **ëˆˆ ì‚¬ì´ ê±°ë¦¬ ë¹„ìœ¨ ê¸°ë°˜** ìë™ ë¶„ë¥˜:
    - `eyeDistanceRatio >= 1.1` â†’ **ì›œê³„(Warm)**: ë˜ë ·í•˜ê³  ì‹œì›í•œ ì¸ìƒ, ì§ì„ ì  ë¼ì¸
    - `eyeDistanceRatio <= 0.9` â†’ **ì¿¨ê³„(Cool)**: ë¶€ë“œëŸ½ê³  ì§‘ì¤‘ëœ ì¸ìƒ, ê³¡ì„  ë¼ì¸
    - ê·¸ ì™¸ â†’ **ë‰´íŠ¸ëŸ´ê³„(Neutral)**: ê· í˜• ì¡íŒ ì¸ìƒ
  - **ì„œë¸Œíƒ€ì… (í•˜ë“œ/ì†Œí”„íŠ¸)**: ê´‘ëŒ€/í„± ë¹„ìœ¨ë¡œ ê²°ì •
    - `cheekJawRatio < 1.15` â†’ Hard (ì„ ëª…í•œ ëŒ€ë¹„)
    - `cheekJawRatio > 1.25` â†’ Soft (ë¶€ë“œëŸ¬ìš´ ê·¸ë¼ë°ì´ì…˜)
  - **ìŠ¤íƒ€ì¼ ë¬´ë“œ ë§¤ì¹­**:
    - ì›œê³„: ìŠ¬ë¦­, ì‹œí¬, íˆ¬ë¸”ëŸ­, ì–¸ë”ì»·, ìƒ¤ê¸° ë“± ë¶€ìŠ¤íŠ¸
    - ì¿¨ê³„: ì›¨ì´ë¸Œ, ì»¬, Cì»¬, Sì»¬, ë ˆì´ì–´ ë“± ë¶€ìŠ¤íŠ¸
    - ë‰´íŠ¸ëŸ´: ë‚´ì¶”ëŸ´, í´ë˜ì‹ ë“± ë¶€ìŠ¤íŠ¸
  - **í•¨ìˆ˜**:
    - `determineImageType(ratios)`: ì´ë¯¸ì§€ íƒ€ì… ë¶„ë¥˜
    - `getImageTypeStyleKeywords(type, subType)`: í‚¤ì›Œë“œ ë§¤ì¹­
  - **UI**: ë¶„ì„ ê²°ê³¼ì— ì´ë¯¸ì§€ íƒ€ì… ë°°ì§€ í‘œì‹œ (ìƒ‰ìƒë³„ êµ¬ë¶„)

  ### ì œê±°ëœ ê¸°ëŠ¥
  - **ë””ìì´ë„ˆ ì²˜ë°© (Side ëˆ„ë¥´ê¸°/ì‚´ë¦¬ê¸°/ê°€ë¦¬ê¸°)**: ì´ë¯¸ì§€ íƒ€ì…ìœ¼ë¡œ ëŒ€ì²´
  - **ë©”ì¸ í˜ì´ì§€ style-match iframe**: ì¹´ë©”ë¼ ìë™ ì‹œì‘ ë²„ê·¸ ìˆ˜ì •

  ### ìŠ¤íƒ€ì¼ ëª¨ë‹¬ ì—°ë™ (ì¶”ì²œ ìŠ¤íƒ€ì¼ í´ë¦­ ì‹œ)
  - **ë¬¸ì œ**: style-matchëŠ” ë³„ë„ í˜ì´ì§€ë¼ `parent.openStyleModal` ì—†ìŒ
  - **í•´ê²°**: URL íŒŒë¼ë¯¸í„°ë¡œ ë©”ì¸ í˜ì´ì§€ ë¦¬ë‹¤ì´ë ‰íŠ¸
    - `openStyleDetail()`: styleId, gender, categoryë¥¼ URL íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬
    - `checkUrlForStyleModal()`: main.jsì—ì„œ URL ì½ê³  ëª¨ë‹¬ ì—´ê¸°
  - **Firestore ì»¬ë ‰ì…˜ ì°¨ì´**:
    - style-match: `styles` ì»¬ë ‰ì…˜ (Netlify í•¨ìˆ˜ í†µí•´ ë¡œë“œ)
    - menu.js: `hairstyles` ì»¬ë ‰ì…˜
    - í•´ê²°: `styles`ì—ì„œ ë¨¼ì € ê²€ìƒ‰, ì—†ìœ¼ë©´ `hairstyles` í´ë°±

  ### ë²„ê·¸ ìˆ˜ì •
  - **ì–¼êµ´ ê°ì§€ ì•ˆë¨**: `isCameraMode = true` ëˆ„ë½ â†’ `startCamera()`ì— ì¶”ê°€
  - **ì¹´ë©”ë¼ ì •ì§€ ì•ˆë¨**: video element ID ì˜¤íƒ€ ìˆ˜ì • (`cameraPreview` â†’ `cameraVideo`)
  - **ì„±ë³„ ì„ íƒ ì˜¤ë²„ë ˆì´ ì• ë‹ˆë©”ì´ì…˜**: CSS transition â†’ JS inline styleë¡œ ë³€ê²½
  - **ì¹´í…Œê³ ë¦¬ ëŒ€ì†Œë¬¸ì ë¶ˆì¼ì¹˜**: ì½”ë“œ 'A LENGTH' vs ë°ì´í„° 'A Length' â†’ `toLowerCase()` ë¹„êµ

  ### UX ê°œì„ 
  - **STEP 1/STEP 2 ë¶„ë¦¬**: ì„±ë³„ ì„ íƒ(STEP 1) â†’ ì¹´ë©”ë¼/ì—…ë¡œë“œ(STEP 2)
  - **ì„±ë³„ ë¯¸ì„ íƒ ì˜¤ë²„ë ˆì´**: "ğŸ‘† ë¨¼ì € ì„±ë³„ì„ ì„ íƒí•˜ì„¸ìš”" ë©”ì‹œì§€
  - **ì´¬ì˜ ë²„íŠ¼ ìœ„ì¹˜**: ì¹´ë©”ë¼ ì•ˆ â†’ ì¹´ë©”ë¼ ë°–ìœ¼ë¡œ ì´ë™ (í…ìŠ¤íŠ¸ ê°€ë¦¼ ë°©ì§€)

- 2025-12-24: OhMyApp í”Œëœ ìƒí’ˆ ë¡œì§ ì„¤ì • + í”Œëœ ì‹œìŠ¤í…œ + ë¬´ë£Œ í”Œëœ ìë™ ì´ˆê¸°í™” + ê²°ì œ ëª¨ë‹¬ ìˆ˜ì •

  ### OhMyApp í”Œëœ ìƒí’ˆ ë¡œì§ ì„¤ì •
  - **ì˜µì…˜ ì„¤ì • > ìƒí’ˆ ë¶„ë¥˜**:
    - "ë³´ê³ ì„œ" ì˜µì…˜ ì‚­ì œ
    - "í”Œëœ" (`plan`) ì˜µì…˜ ì¶”ê°€
  - **ê¸°ì¡´ ë¡œì§ ìˆ˜ì • - "[ì£¼ë¬¸] ê²°ì œ í›„ íšŸìˆ˜ê¶Œ ì¦ê°€"**:
    - ì¡°ê±´ ì¶”ê°€: `productCategory == "content"`
    - AIíšŸìˆ˜ê¶Œë§Œ `remainCount` ì¦ê°€í•˜ë„ë¡ ì œí•œ
  - **ìƒˆ ë¡œì§ ìƒì„± - "[ì£¼ë¬¸] ê²°ì œ í›„ í† í° ì¶©ì „ (í”Œëœ)"**:
    - If When: `ticketCount`
    - Where: `ticketCount`
    - Condition: `productCategory == "plan"`
    - Then: `_users.tokenBalance += tokenCount`
  - **ìƒí’ˆ ë“±ë¡ ì™„ë£Œ**:
    - ë² ì´ì§ (10,000 í† í°) - 22,000ì›
    - í”„ë¡œ (18,000 í† í°) - 38,000ì›
    - ë¹„ì¦ˆë‹ˆìŠ¤ (25,000 í† í°) - 50,000ì›
  - **í…ŒìŠ¤íŠ¸ ê²°ê³¼**: ê²°ì œ í”Œë¡œìš° ì •ìƒ ì‘ë™ (ë³¸ì¸ ì¹´ë“œ í•„ìš”)

  ### ë¬´ë£Œ í”Œëœ ìë™ 200 í† í° ì´ˆê¸°í™”
  - **ë¬¸ì œ**: ì‹ ê·œ/ê¸°ì¡´ ìœ ì € ì¤‘ í”Œëœ ê²°ì œ ì•ˆ í•œ ì‚¬ëŒì€ ìë™ìœ¼ë¡œ ë¬´ë£Œ í”Œëœ 200 í† í° í•„ìš”
  - **ìˆ˜ì • ìœ„ì¹˜**: `bullnabi-proxy.js` `handleGetTokenBalance()`
  - **ë¡œì§**: `tokenBalance`ê°€ undefined/nullì´ë©´ 200ìœ¼ë¡œ ìë™ ì´ˆê¸°í™”
  - **ì£¼ì˜**: `handleGetUserData()`ì—ì„œ `tokenBalance || 0` â†’ `tokenBalance` (undefined ìœ ì§€í•´ì•¼ ì´ˆê¸°í™” ì¡°ê±´ ì‘ë™)

  ### ê²°ì œ ëª¨ë‹¬ ìˆ˜ì •
  - **selectPlan()**: ê²°ì œ ëŒ€ì‹  "ìƒí’ˆ íƒ­ì—ì„œ ê²°ì œí•´ ì£¼ì„¸ìš”" í† ìŠ¤íŠ¸ í‘œì‹œ
  - **i18n í‚¤ ìˆ˜ì •**: HTML `pricing.*` â†’ `payment.*` (33ê°œ ìˆ˜ì •)
  - **ë²ˆì—­ ì¶”ê°€**: `payAtProductTab`, `freePlanRestricted` 7ê°œêµ­ì–´

  ### Netlify ë°°í¬ URL í™•ì¸
  - **ì •í™•í•œ URL**: `lovely-lebkuchen-4017ca.netlify.app`
  - `hairgator.netlify.app`ì€ ì˜ˆì „/ë‹¤ë¥¸ í”„ë¡œì íŠ¸

  ### ë¶ˆë‚˜ë¹„ _users.plan í•„ë“œ ì¶”ê°€
  - **bullnabi-proxy.js**:
    - `handleGetPlan()`: í”Œëœ ì¡°íšŒ
    - `handleSetPlan()`: í”Œëœ ì„¤ì • (ê´€ë¦¬ììš©)
  - **bullnabi-bridge.js**:
    - `getPlan()`: í”Œëœ ì¡°íšŒ
    - `setPlan()`: í”Œëœ ì„¤ì •
    - `isPaidUser()`: ìœ ë£Œ ì‚¬ìš©ì ì—¬ë¶€ í™•ì¸
    - `getTokenBalance()`ì—ì„œ planë„ í•¨ê»˜ ì¡°íšŒ
  - **admin.html**:
    - `setTokenBalance()`ì—ì„œ í”Œëœë„ í•¨ê»˜ ì„¤ì •
    - í”Œëœ ì„ íƒ UI ì—°ë™ ì™„ë£Œ

  ### í”Œëœ ì¢…ë¥˜
  | í”Œëœ | í† í° | ê¸°ëŠ¥ ì ‘ê·¼ |
  |------|------|----------|
  | free | 200 | ì±—ë´‡, ìŠ¤íƒ€ì¼ë©”ë‰´, í¼ìŠ¤ë„ë¶„ì„ |
  | basic | 10,000 | ëª¨ë“  ê¸°ëŠ¥ |
  | pro | 18,000 | ëª¨ë“  ê¸°ëŠ¥ |
  | business | 25,000 | ëª¨ë“  ê¸°ëŠ¥ |

  ### í† í° í‘œì‹œ ì •ì±…
  - **ê´€ë¦¬ì**: í”Œëœ + í† í° ì”ì•¡ í‘œì‹œ
  - **ì¼ë°˜ ìœ ì €**: í”Œëœë§Œ í‘œì‹œ (í† í° ìˆ¨ê¹€)

  ### í† í° ì¶©ì „ ì´ë²¤íŠ¸ í”Œë¡œìš° ë²„ê·¸ ìˆ˜ì • (ì €ë…)
  - **ë¬¸ì œ**: í”Œëœ ìƒí’ˆ ê²°ì œ ì‹œ tokenBalanceê°€ ì¶©ì „ë˜ì§€ ì•ŠìŒ
  - **ì›ì¸**: ì´ë²¤íŠ¸ í”Œë¡œìš° ì¡°ê±´ì´ `productCategory == "plan"` (ì˜ë¬¸)ìœ¼ë¡œ ì„¤ì •ë˜ì–´ ìˆì—ˆìœ¼ë‚˜, ì‹¤ì œ ìƒí’ˆ ë¶„ë¥˜ëŠ” `"í”Œëœ"` (í•œê¸€)
  - **í•´ê²°**: OhMyApp ë¡œì§ ì„¤ì •ì—ì„œ ì¡°ê±´ì„ `"plan"` â†’ `"í”Œëœ"`ìœ¼ë¡œ ìˆ˜ì •
  - **ìœ„ì¹˜**: ë¡œì§ ì„¤ì • > "[ì£¼ë¬¸] ê²°ì œ í›„ í† í° ì¶©ì „ (í”Œëœ)"
  - **ì°¸ê³ **: ê¸°ì¡´ ê²°ì œ ê±´ì€ ìˆ˜ë™ ì¶©ì „ í•„ìš”, ìƒˆ ê²°ì œë¶€í„° ìë™ ì ìš©

  ### ìš”ê¸ˆì œ ì•ˆë‚´ UI ìˆ˜ì •
  - **index.html**: "AIì–¼êµ´ë³€í™˜&ì˜ìƒë³€í™˜" ìƒí’ˆì˜ "ì´ ìƒí’ˆì€ ìƒí’ˆ íƒ­ì—ì„œë§Œ ê²°ì œê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤" ë©”ì‹œì§€ ì œê±°

- 2025-12-23: í† í° ì‹œìŠ¤í…œ ë¶ˆë‚˜ë¹„ APIë¡œ ì „í™˜

  ### Firestore â†’ ë¶ˆë‚˜ë¹„ _users.tokenBalance ë§ˆì´ê·¸ë ˆì´ì…˜
  - **bullnabi-proxy.js ìˆ˜ì •**:
    - `handleGetTokenBalance()`: tokenBalance ì¡°íšŒ
    - `handleSetTokenBalance()`: tokenBalance ì„¤ì • (ê´€ë¦¬ììš©)
    - `handleDeductTokenBalance()`: tokenBalance ì°¨ê°
    - `handleGetUserData()`ì— tokenBalance í•„ë“œ ì¶”ê°€
  - **bullnabi-bridge.js ìˆ˜ì •**:
    - `getTokenBalance()`: Firestore â†’ ë¶ˆë‚˜ë¹„ API
    - `canUseFeature()`: Firestore â†’ ë¶ˆë‚˜ë¹„ API
    - `deductTokens()`: Firestore â†’ ë¶ˆë‚˜ë¹„ API
    - `deductTokensDynamic()`: Firestore â†’ ë¶ˆë‚˜ë¹„ API
  - **admin.html ìˆ˜ì •**:
    - `queryTokenBalance()`: Firestore â†’ ë¶ˆë‚˜ë¹„ API
    - `chargeTokens()`: Firestore â†’ ë¶ˆë‚˜ë¹„ API
    - ê²°ì œ ì·¨ì†Œ í† í° ì°¨ê°: Firestore â†’ ë¶ˆë‚˜ë¹„ API
  - **auth.js ìˆ˜ì •**:
    - ë¡œê·¸ì¸ ì‹œ í† í° ì”ì•¡ ì¡°íšŒ: Firestore â†’ ë¶ˆë‚˜ë¹„ API
  - **payment-verify.js ìˆ˜ì •**:
    - `chargeTokens()`: Firestore â†’ ë¶ˆë‚˜ë¹„ API (ê²°ì œ ê²€ì¦ í›„ í† í° ì¶©ì „)
    - `refreshBullnabiToken()`, `getBullnabiUserData()` í•¨ìˆ˜ ì¶”ê°€
  - **lookbook.html ìˆ˜ì •**:
    - í† í° ì°¨ê°: token-api â†’ bullnabi-proxy
  - **DEPRECATED íŒŒì¼**:
    - `netlify/functions/token-api.js`: ë” ì´ìƒ ì‚¬ìš© ì•ˆ í•¨
  - **ì •ì§€í™˜ ê°œë°œì ìš”ì²­ ë°˜ì˜**: ë¶ˆë‚˜ë¹„ _users ì»¬ë ‰ì…˜ì— tokenBalance í•„ë“œ ì‚¬ìš©

  ### ê¸°íƒ€ ìˆ˜ì •
  - ai-studio ê³µìœ  ë²„íŠ¼ ì œê±°
  - ë¼ì´íŠ¸ ëª¨ë“œ í—¤ë” ë²„íŠ¼ ìƒ‰ìƒ ìˆ˜ì •
  - hair-change.js 12ì›” 19ì¼ ìƒíƒœë¡œ ë³µêµ¬ (node-fetch ì œê±°)
  - bullnabi-bridge.js `planName is not defined` ì—ëŸ¬ ìˆ˜ì •

  ### ë§ˆì´ê·¸ë ˆì´ì…˜ ë°°ê²½
  - **ì •ì§€í™˜ ê°œë°œì(ë¶ˆë‚˜ë¹„)**: "ë¶ˆë‚˜ë¹„APIë¥¼ í†µí•´ ìœ ì €ì •ë³´(_users)ì— tokenBalance ë°ì´í„°ë¥¼ ë„˜ê²¨ì£¼ë©´ ì¡°íšŒí•  ë•Œë„ ë³´ì¼ê±°ì˜ˆìš”"
  - ê¸°ì¡´: Firestore `user_tokens` ì»¬ë ‰ì…˜ì— ë³„ë„ ì €ì¥
  - ë³€ê²½: ë¶ˆë‚˜ë¹„ MongoDB `_users.tokenBalance` í•„ë“œì— ì €ì¥
  - ì¥ì : ë¶ˆë‚˜ë¹„ ì•±ì—ì„œë„ í† í° ì”ì•¡ í™•ì¸ ê°€ëŠ¥

- 2025-12-22 (ì €ë…): í† í° ì‹œìŠ¤í…œ ì™„ì„± + í¬ë ˆë”§ ì°¨ê° êµ¬í˜„

  ### í”„ë¡œí•„ ì´ë¯¸ì§€ ë²„ê·¸ ìˆ˜ì •
  - **ë¬¸ì œ**: userId ë³€ê²½ ì‹œ ì´ì „ ì‚¬ìš©ì í”„ë¡œí•„ ì´ë¯¸ì§€ê°€ í‘œì‹œë¨
  - **ì›ì¸**: localStorageì— í”„ë¡œí•„ ì´ë¯¸ì§€ ìºì‹± â†’ ì‚¬ìš©ìë³„ ë¶„ë¦¬ ì•ˆ ë¨
  - **í•´ê²°**:
    - `auth.js`: ì‚¬ìš©ì ë³€ê²½ ê°ì§€ ì‹œ localStorage ì´ˆê¸°í™” (í”„ë¡œí•„, ë¸Œëœë“œ ì„¤ì •)
    - `main.js`: `applyProfileImage()` Firebase `brandSettings`ì—ì„œ ì§ì ‘ ë¡œë“œ
    - `ai-studio.js`: `loadUserPhoto()` Firebaseì—ì„œ ì§ì ‘ ë¡œë“œ

  ### ì±—ë´‡ í† í° ì°¨ê° êµ¬í˜„ (ê°€ë³€ ë¹„ìš©)
  - **ì„œë²„ ìˆ˜ì •** (`chatbot-api.js`):
    - Gemini ì‘ë‹µì—ì„œ `usageMetadata` ì¶”ì¶œ
    - SSEë¡œ `token_usage` ì´ë²¤íŠ¸ ì „ì†¡ (totalTokens, promptTokens, completionTokens)
  - **í´ë¼ì´ì–¸íŠ¸ ìˆ˜ì •** (`ai-studio.js`):
    - `callAPIStreaming()`ì—ì„œ token_usage íŒŒì‹±
    - `sendMessage()`ì—ì„œ í† í° ì‚¬ìš©ëŸ‰ ê¸°ë°˜ í¬ë ˆë”§ ì°¨ê°
  - **ë¹„ìš© êµ¬ì¡°**:
    - ~500 í† í°: 3 í¬ë ˆë”§
    - 501~1500 í† í°: 10 í¬ë ˆë”§
    - 1501~3000 í† í°: 20 í¬ë ˆë”§
    - 3000+ í† í°: 30 í¬ë ˆë”§
  - **ì¸ì‚¬ë§/ìºì‹œ ì‘ë‹µ**: token=0ì´ë©´ í¬ë ˆë”§ ì°¨ê° ìŠ¤í‚µ

  ### ë ˆì‹œí”¼/ì´ë¯¸ì§€ ì§ˆë¬¸ í¬ë ˆë”§ ì°¨ê°
  - `sendImageForRecipe()`: 30 í¬ë ˆë”§ ì°¨ê°
  - `sendQuestionWithImage()`: 20 í¬ë ˆë”§ ì°¨ê°
  - `deductTokensDynamic()` í•¨ìˆ˜ ì‚¬ìš© (bullnabi-bridge.js)

  ### ai-studio.html ìˆ˜ì •
  - **ë¬¸ì œ**: `window.BullnabiBridge` undefined â†’ í¬ë ˆë”§ ì°¨ê° ì•ˆ ë¨
  - **ì›ì¸**: ai-studio.htmlì— `bullnabi-bridge.js` ìŠ¤í¬ë¦½íŠ¸ ëˆ„ë½
  - **í•´ê²°**: `<script src="js/bullnabi-bridge.js"></script>` ì¶”ê°€

  ### ì–´ë“œë¯¼ í† í° ì§ì ‘ ì„¤ì • ê¸°ëŠ¥
  - `setTokenBalance()` í•¨ìˆ˜ ì¶”ê°€ (admin.html)
  - ê¸°ì¡´ ì”ì•¡ê³¼ ê´€ê³„ì—†ì´ ì§€ì •í•œ ê°’ìœ¼ë¡œ ì§ì ‘ ì„¤ì •
  - ë¡œê·¸ ê¸°ë¡: action='set_balance', previousBalance, newBalance, difference
  - UI: ì‚¬ìš©ì ID, ëª©í‘œ í† í° ìˆ˜, ë©”ëª¨ ì…ë ¥

  ### bullnabi-bridge.js ê°œì„ 
  - `deductTokensDynamic(userId, amount, feature, metadata)` í•¨ìˆ˜ ì¶”ê°€
  - ê°€ë³€ ê¸ˆì•¡ ì°¨ê° ì§€ì› (ê¸°ì¡´ `deductTokens`ëŠ” ê³ ì • ê¸ˆì•¡)
  - `token_logs` ì»¬ë ‰ì…˜ì— ìƒì„¸ ë¡œê·¸ ê¸°ë¡

- 2025-12-22: ê²°ì œ ì—°ë™ + ë‚¨ì ë ˆì‹œí”¼ ìˆ˜ì • + ë ˆì‹œí”¼ ë²ˆí˜¸ í†µì¼

  ### í¬íŠ¸ì› V2 ê²°ì œ ì—°ë™ (í…ŒìŠ¤íŠ¸ ëª¨ë“œ)
  - **í”„ë¡ íŠ¸ì—”ë“œ**: `js/payment.js` ìƒì„±
    - `HAIRGATOR_PAYMENT` ê°ì²´: requestPayment, purchasePlan, getUserId
    - ìš”ê¸ˆì œ: basic(22,000ì›), pro(38,000ì›), business(50,000ì›), credits_5000(5,000ì›)
    - windowType: `{ pc: 'POPUP', mobile: 'REDIRECTION' }`
  - **ì„œë²„**: `netlify/functions/payment-verify.js` ìƒì„±
    - í¬íŠ¸ì› APIë¡œ ê²°ì œ ê²€ì¦ â†’ ë¶ˆë‚˜ë¹„ DB í¬ë ˆë”§ ì¶©ì „
    - Firestore `payments` ì»¬ë ‰ì…˜ì— ê²°ì œ ë‚´ì—­ ì €ì¥ (ì¤‘ë³µ ë°©ì§€)
    - `credit_logs` ì»¬ë ‰ì…˜ì— ì¶©ì „ ë¡œê·¸ ê¸°ë¡
  - **CSP ì„¤ì •**: netlify.tomlì— í¬íŠ¸ì›/ë‚˜ì´ìŠ¤í˜ì´ ë„ë©”ì¸ ì¶”ê°€
    - `https://cdn.portone.io`, `*.portone.io`, `*.iamport.co`, `*.nicepay.co.kr`
  - **í…ŒìŠ¤íŠ¸ ëª¨ë“œ ì œí•œ**:
    - `PAYMENT_ALLOWED_USER_IDS = ['691ceee09d868b5736d22007']`
    - í—ˆìš© ìœ ì €ë§Œ ê²°ì œ ë²„íŠ¼ í‘œì‹œ, ë‹¤ë¥¸ ìœ ì €ëŠ” ìˆ¨ê¹€
  - **ë¯¸í•´ê²°**: NICEPAY ë„ë©”ì¸ ë“±ë¡ í•„ìš” (ë‚˜ì´ìŠ¤í˜ì´ ê°€ë§¹ì  ê´€ë¦¬ìì—ì„œ ì„¤ì •)
  - **í™˜ê²½ë³€ìˆ˜ í•„ìš”**: `PORTONE_API_SECRET` (Netlify Dashboardì—ì„œ ì„¤ì •)

  ### ë‚¨ì ë ˆì‹œí”¼ textRecipe ìˆ˜ì •
  - **ë¬¸ì œ**: ë‚¨ì ìŠ¤íƒ€ì¼ `textRecipe` í•„ë“œê°€ 41ìë°–ì— ì—†ì–´ì„œ ë ˆì‹œí”¼ê°€ ì˜ë¦¼
  - **ì›ì¸**: `men_styles` ì»¬ë ‰ì…˜ì— ìë§‰ íŒŒì¼ ì „ì²´ ë‚´ìš©ì´ ì €ì¥ ì•ˆ ë¨
  - **í•´ê²°**:
    1. `chatbot-api.js`ì— í´ë°± ë¡œì§ ì¶”ê°€ (textRecipe < 100ìë©´ captionUrlì—ì„œ fetch)
    2. `scripts/update-men-textrecipe.py` ìŠ¤í¬ë¦½íŠ¸ë¡œ 69ê°œ ë‚¨ì ìŠ¤íƒ€ì¼ textRecipe ì—…ë°ì´íŠ¸
    3. `styles` ì»¬ë ‰ì…˜ê³¼ `men_styles` ì»¬ë ‰ì…˜ ëª¨ë‘ ì—…ë°ì´íŠ¸
  - **ê²°ê³¼**: FU0010 ë“± ëª¨ë“  ë‚¨ì ìŠ¤íƒ€ì¼ ë ˆì‹œí”¼ ì •ìƒ í‘œì‹œ

  ### ë ˆì‹œí”¼ ë²ˆí˜¸ ë§¤ê¸°ê¸° í†µì¼
  - **ë³€ê²½ ì „**: External 1,2,3... â†’ Internal 1,2,3... (ë¦¬ì…‹)
  - **ë³€ê²½ í›„**: External 1,2,3,4,5,6 â†’ Internal 7,8,9... (ì´ì–´ì„œ)
  - **ìˆ˜ì • ìœ„ì¹˜**: `chatbot-api.js` `formatRecipeSentences()` í•¨ìˆ˜
  - **ë¡œì§**: `[External]` í—¤ë”ì—ì„œë§Œ sectionNum ë¦¬ì…‹, `[Internal]`ì€ ë¦¬ì…‹ ì•ˆ í•¨

- 2025-12-22 (ì˜¤ì „): íŒ ì¸ë±ìŠ¤ RAG ì—…ë¡œë“œ + ë² íƒ€ ê¸°ëŠ¥ ì ‘ê·¼ ì œí•œ

  ### íŒ ì¸ë±ìŠ¤ í…ìŠ¤íŠ¸ RAG ì—…ë¡œë“œ
  - **Gemini Visionìœ¼ë¡œ 46ê°œ íŒ ì¸ë±ìŠ¤ ì´ë¯¸ì§€ì—ì„œ ì˜ë¯¸ í•´ì„ í…ìŠ¤íŠ¸ ì¶”ì¶œ**
  - ë‹¨ìˆœ OCRì´ ì•„ë‹Œ ë‹¤ì´ì–´ê·¸ë¨/í‘œ/í™”ì‚´í‘œì˜ ì˜ë¯¸ê¹Œì§€ í•´ì„
  - ì¶”ì¶œ ë‚´ìš©: ë³µêµ¬íŒ ë ˆì‹œí”¼, ì—°í™”ë²•(ì¼ë°˜/ì—­ì—°í™”), í™˜ì›/ì‚°í™” ì‹œìŠ¤í…œ, ë¡œë“œ/ì™€ì¸ë”© ê¸°ë²• ë“±
  - ìŠ¤í¬ë¦½íŠ¸: `scripts/extract-perm-index-to-rag.py`
  - RAG Store ë¬¸ì„œ ìˆ˜: 46ê°œ â†’ 51ê°œ

  ### ë² íƒ€ ê¸°ëŠ¥ ì ‘ê·¼ ì œí•œ (4ê°œ ê¸°ëŠ¥)
  - **ì œí•œ ê¸°ëŠ¥**: ë£©ë¶, í—¤ì–´ì²´í—˜, í¼ìŠ¤ë„ ì´ë¯¸ì§€ ë¶„ì„, ì±—ë´‡
  - **í—ˆìš© ID**: 691ceee09d868b5736d22007, 6536474789a3ad49553b46d7
  - ë¹„í—ˆìš© ì‚¬ìš©ì: ë²„íŠ¼ í´ë¦­ ì‹œ "ì•„ì§ ì˜¤í”ˆ ì „ì…ë‹ˆë‹¤." ë©”ì‹œì§€ í‘œì‹œ
  - êµ¬í˜„ ìœ„ì¹˜: main.js(ALLOWED_USER_IDS, isAllowedUser), menu.js, ai-studio.js

  ### OpenAI/GPT ë ˆê±°ì‹œ ì½”ë“œ ì •ë¦¬
  - **chatbot-api.js**:
    - OPENAI_KEY ì²´í¬ ì œê±° (í•¸ë“¤ëŸ¬ì—ì„œ)
    - `analyzeImage()` íŒŒë¼ë¯¸í„° openaiKey â†’ geminiKey ë³€ê²½
    - `generateMaleCustomRecipe()` OpenAI â†’ Gemini 2.5 Flashë¡œ ë³€í™˜
    - DEPRECATED ì£¼ì„ ì¶”ê°€: generateProfessionalResponse, generateRecipe, generateProfessionalResponseStream
  - **lib/male-recipe.js, lib/female-recipe.js**: ì „ì²´ íŒŒì¼ DEPRECATED ì²˜ë¦¬ (ë¯¸ì‚¬ìš©)
  - **ê²°ê³¼**: ëª¨ë“  AI ê¸°ëŠ¥ì´ Geminië¡œë§Œ ë™ì‘, OPENAI_API_KEY í™˜ê²½ë³€ìˆ˜ ì‚­ì œ ê°€ëŠ¥

- 2025-12-19: ë‹¤êµ­ì–´ ë²„ê·¸ ìˆ˜ì • + ê¸°ìˆ  ìš©ì–´ ë…¸ì¶œ ë°©ì§€ + ëª¨ë°”ì¼ UI ê°œì„ 

  ### ê³ ê° í™”ë©´ ê¸°ìˆ  ìš©ì–´ ë…¸ì¶œ ë°©ì§€
  - **chatbot-api.js**: "Gemini" ì—ëŸ¬ ë©”ì‹œì§€ 14ê°œ â†’ "AI ì„œë¹„ìŠ¤"ë¡œ ë³€ê²½
  - **hair-change.js**: "vModel" ì—ëŸ¬ ë©”ì‹œì§€ â†’ "í—¤ì–´ì²´í—˜ ê²°ê³¼"ë¡œ ë³€ê²½
  - **console.logëŠ” ìœ ì§€**: ë””ë²„ê¹…ìš©ì´ë¯€ë¡œ ê·¸ëŒ€ë¡œ ë‘ 

  ### ì±—ë´‡ í€µ ë²„íŠ¼ ë‹¤êµ­ì–´ ìˆ˜ì •
  - **ë¬¸ì œ**: ì¤‘êµ­ì–´ ì„¤ì • í›„ í€µ ë²„íŠ¼ í´ë¦­ â†’ í•œêµ­ì–´ë¡œ ì§ˆë¬¸ ì „ì†¡ë¨
  - **ì›ì¸**: onclickì— í•œêµ­ì–´ ì§ˆë¬¸ í•˜ë“œì½”ë”©
  - **í•´ê²°**: ë²ˆì—­ëœ í…ìŠ¤íŠ¸ë¥¼ onclickì—ë„ ì ìš©
  - **íŒŒì¼**: ai-studio.js `resetChatMessages()` í•¨ìˆ˜

  ### ë¸Œëœë“œ ì„¤ì • í°íŠ¸ ë¯¸ë¦¬ë³´ê¸° ë‹¤êµ­ì–´
  - **ë¬¸ì œ**: "ê°€ë‚˜" í…ìŠ¤íŠ¸ í•˜ë“œì½”ë”©
  - **í•´ê²°**: `t('ui.fontPreview')` ì‚¬ìš©
  - **7ê°œêµ­ì–´ ì¶”ê°€**:
    - ko: `Aa ê°€ë‚˜`, ja: `Aa ã‚ã‚¢`, zh: `Aa å­—ä½“`
    - en/vi/id/es: `Aa Bb`

  ### ëª¨ë°”ì¼ ì¹´í…Œê³ ë¦¬ íƒ­ ì¶•ì•½
  - **ë¬¸ì œ**: ê¸´ ì¹´í…Œê³ ë¦¬ëª…ì´ ëª¨ë°”ì¼ì—ì„œ ë„˜ì¹¨
  - **í•´ê²°**: 480px ì´í•˜ì—ì„œ ì¶•ì•½ëª… í‘œì‹œ
  - **ì—¬ì**: A LENGTH â†’ A, B LENGTH â†’ B, ...
  - **ë‚¨ì**: SIDE PART â†’ SP, TWO BLOCK â†’ 2B, CROP â†’ CR, ...
  - **ì¤‘ë¶„ë¥˜**: Fore Head â†’ FH, Eye Brow â†’ EB, ...
  - **CSS**: `.tab-name-full` / `.tab-name-short` + ë¯¸ë””ì–´ì¿¼ë¦¬

  ### ì¹´í…Œê³ ë¦¬ ì„¤ëª… í•œì¤„ ìŠ¤í¬ë¡¤
  - **ë³€ê²½**: ì„¤ëª… í…ìŠ¤íŠ¸ `white-space: nowrap` + ê°€ë¡œ ìŠ¤í¬ë¡¤
  - **CSS**: `.category-description-text` overflow-x: auto

  ### í—¤ì–´ì²´í—˜ ê²°ê³¼ ì €ì¥ (íƒœë¸”ë¦¿ ì§€ì›)
  - **ë¬¸ì œ**: íƒœë¸”ë¦¿ì—ì„œ ì €ì¥ ë²„íŠ¼ ì•ˆë¨ (Canvas CORS ì œí•œ)
  - **í•´ê²°**: ì˜¤ë²„ë ˆì´ ëª¨ë‹¬ë¡œ ì´ë¯¸ì§€ í‘œì‹œ â†’ ê¸¸ê²Œ ëˆŒëŸ¬ ì €ì¥ ì•ˆë‚´
  - **í•¨ìˆ˜**: `showSaveImageOverlay()`, `closeSaveImageOverlay()`
  - **i18n**: `hairTry.saveGuide` 7ê°œêµ­ì–´ ì¶”ê°€

  ### ì»¤íŠ¸ ë ˆì‹œí”¼ ì„¹ì…˜ë³„ ë²ˆí˜¸ ë§¤ê¸°ê¸°
  - **External**: ë¬¸ì¥ë§ˆë‹¤ 1, 2, 3...
  - **Internal**: ë²ˆí˜¸ ë¦¬ì…‹ í›„ 1, 2, 3...
  - **CSS**: `.step-num` ì›í˜• ë²ˆí˜¸ ìŠ¤íƒ€ì¼

  ### RAG í—¤ì–´ì¼€ì–´ ì œí’ˆ ê°€ì´ë“œ ì¶”ê°€ (ì´ì „ ì„¸ì…˜)
  - **ë¬¸ì„œ**: `hair_care_products_guide.txt` - íŠ¸ë¦¬íŠ¸ë¨¼íŠ¸/ë¦°ìŠ¤/ì»¨ë””ì…”ë„ˆ ì°¨ì´ ê°€ì´ë“œ
  - **ë‚´ìš©**: ì¹´í‹°ì˜¨ ê³„ë©´í™œì„±ì œ ì‘ìš© ì›ë¦¬, ì†ìƒë³„ ì œí’ˆ ì„ íƒ, FAQ 6ê°œ
  - **ì—…ë¡œë“œ ìŠ¤í¬ë¦½íŠ¸**: `scripts/upload-hair-care-guide.py`
  - **Store**: fileSearchStores/hairgator-theory-final-2025-kkb6n1ftfbf2 (46ê°œ ë¬¸ì„œ)

  ### íˆìŠ¤í† ë¦¬ ì´ë¯¸ì§€ Firebase Storage ì €ì¥ (ì´ì „ ì„¸ì…˜)
  - **ë¬¸ì œ**: blob URLì€ ì„¸ì…˜ ì¢…ë£Œ ì‹œ ë§Œë£Œ â†’ íˆìŠ¤í† ë¦¬ì—ì„œ ì´ë¯¸ì§€ê°€ ì—‘ë°•ìœ¼ë¡œ í‘œì‹œ
  - **í•´ê²°**: ì´ë¯¸ì§€ ì—…ë¡œë“œ ì‹œ Firebase Storageì— ì˜êµ¬ ì €ì¥ (7ì¼ ë³´ê´€)
  - **í•¨ìˆ˜**: `uploadImageToStorage()` (ai-studio.js)
  - **ê²½ë¡œ**: `temp_uploads/{userId}/{timestamp}_{random}.{ext}`
  - **ì •ë¦¬**: `cleanup-old-images.js` Netlify ìŠ¤ì¼€ì¤„ í•¨ìˆ˜ (@daily)

- 2025-12-18: í—¤ì–´ì²´í—˜ 504 íƒ€ì„ì•„ì›ƒ í•´ê²° + AI ë ˆì‹œí”¼ ì„œìˆ í˜• í¬ë§·

  ### í—¤ì–´ì²´í—˜ ë¹„ë™ê¸° í´ë§ ë°©ì‹ìœ¼ë¡œ ë³€ê²½
  - **ë¬¸ì œ**: Netlify í•¨ìˆ˜ 10ì´ˆ íƒ€ì„ì•„ì›ƒ â†’ vModel 20ì´ˆ í´ë§ + Gemini í›„ì²˜ë¦¬ ì‹œê°„ ì´ˆê³¼
  - **í•´ê²°**: action íŒŒë¼ë¯¸í„° ê¸°ë°˜ ë¹„ë™ê¸° ì²˜ë¦¬
    - `action: 'start'` â†’ vModel Task ìƒì„± í›„ taskId ë°˜í™˜ (ë¹ ë¦„)
    - `action: 'status'` â†’ ìƒíƒœ í™•ì¸, ì™„ë£Œ ì‹œ Gemini í›„ì²˜ë¦¬ ì‹¤í–‰
  - **í´ë¼ì´ì–¸íŠ¸ í´ë§**: `pollHairChangeStatus()` í•¨ìˆ˜
    - 2ì´ˆ ê°„ê²©, ìµœëŒ€ 30íšŒ (60ì´ˆ)
    - `.loading-progress` ìš”ì†Œë¡œ ì§„í–‰ ìƒíƒœ í‘œì‹œ
  - **íŒŒì¼ ìœ„ì¹˜**: hair-change.js, menu.js

  ### AI ë ˆì‹œí”¼ ì„œìˆ í˜• í¬ë§· ë³€ê²½ (ì´ì „ ì„¸ì…˜)
  - **ì»¤íŠ¸ ë ˆì‹œí”¼**: External/Internal ì„¹ì…˜ ë¶„ë¦¬, ì„œìˆ í˜• ë‹¨ê³„ë³„ ì•ˆë‚´
  - **íŒ ë ˆì‹œí”¼**: Aì¡´/Bì¡´/Cì¡´ ì„¹ì…˜ ë¶„ë¦¬, ì„œìˆ í˜• ë‹¨ê³„ë³„ ì•ˆë‚´
  - **CSS ê·¸ë¼ë°ì´ì…˜ ë°•ìŠ¤**:
    - `.recipe-section.external` (íŒŒë€ìƒ‰)
    - `.recipe-section.internal` (ë³´ë¼ìƒ‰)
    - `.recipe-section.zone-a/b/c` (ë…¹ìƒ‰/ë…¸ë‘/ë³´ë¼)

  ### Veo 3.1 Image-to-Video ì§€ì› (admin.html)
  - Veo 2.0 â†’ 3.1 ì—…ê·¸ë ˆì´ë“œ
  - `input_image` íŒŒë¼ë¯¸í„°ë¡œ ì²« í”„ë ˆì„ ì´ë¯¸ì§€ ì§€ì • ê°€ëŠ¥
  - admin.htmlì— ì²« í”„ë ˆì„ ì´ë¯¸ì§€ ì„ íƒ UI ì¶”ê°€

- 2025-12-17: ë£©ë¶ ë§¤ê±°ì§„ ìŠ¤íƒ€ì¼ + í—¤ì–´ì²´í—˜ ì „/í›„ ë¹„êµ UI

  ### ë£©ë¶ ì—ë””í† ë¦¬ì–¼ ë§¤ê±°ì§„ ìŠ¤íƒ€ì¼ ì ìš©
  - **ë””ìì¸ ì»¨ì…‰**: ê³ ê¸‰ íŒ¨ì…˜ ë§¤ê±°ì§„ ëŠë‚Œì˜ ë¯¸ë‹ˆë©€ ë””ìì¸
  - **í°íŠ¸ ë³€ê²½**: Cormorant Garamond (ì œëª©) + Libre Franklin (ë³¸ë¬¸)
  - **ë ˆì´ì•„ì›ƒ**: max-width 880px ì¤‘ì•™ ì •ë ¬, ì¢Œìš° í°ìƒ‰ ì—¬ë°±
  - **ì¥ì‹ íš¨ê³¼**: í”„ë ˆì„ ë³´ë”, ë…¸ì´ì¦ˆ í…ìŠ¤ì²˜ ë°°ê²½
  - **ë„¤ë¹„ê²Œì´ì…˜**: backdrop-filter blur íš¨ê³¼
  - **íƒœê·¸ ìŠ¤íƒ€ì¼**: pill ë²„íŠ¼ â†’ ì (Â·) êµ¬ë¶„ í…ìŠ¤íŠ¸ë¡œ ë³€ê²½
  - **íŒŒì¼ ìœ„ì¹˜**: lookbook.html ì „ì²´ ì¬ì„¤ê³„

  ### í—¤ì–´ì²´í—˜ ì „/í›„ ë¹„êµ UI
  - **ê¸°ëŠ¥**: ì›ë³¸ ì‚¬ì§„ê³¼ ê²°ê³¼ ì‚¬ì§„ì„ ë‚˜ë€íˆ ë¹„êµ
  - **ë°ìŠ¤í¬í†±**: ì¢Œìš° ë°°ì¹˜ (BEFORE â†’ AFTER)
  - **ëª¨ë°”ì¼**: ì„¸ë¡œ ë°°ì¹˜, í™”ì‚´í‘œ 90ë„ íšŒì „
  - **ì• ë‹ˆë©”ì´ì…˜**: í™”ì‚´í‘œ pulse íš¨ê³¼ (1.5ì´ˆ ì£¼ê¸°)
  - **i18n í‚¤ ì¶”ê°€**: `hairTry.before`, `hairTry.after` (7ê°œêµ­ì–´)
  - **í•¨ìˆ˜ ìœ„ì¹˜**: menu.js `showHairTryResult()`, `addHairTryResultStyles()`

  ### Veo API ì˜ìƒ ìƒì„± (ë¹„í™œì„±í™”)
  - **ì´ìŠˆ**: 1:1 ë¹„ìœ¨ ë¯¸ì§€ì›, 504 íƒ€ì„ì•„ì›ƒ, referenceImages ë¯¸ì§€ì›
  - **ìˆ˜ì •**: 2ë‹¨ê³„ í´ë§ ë°©ì‹ìœ¼ë¡œ ë³€ê²½, Veo 2.0ìœ¼ë¡œ ë‹¤ìš´ê·¸ë ˆì´ë“œ
  - **ê²°ë¡ **: text-to-videoë§Œ ì§€ì›ë˜ì–´ í—¤ì–´ ë©”ë‰´íŒ ì´ë¯¸ì§€ í™œìš© ë¶ˆê°€ â†’ ì‚¬ìš© ì•ˆ í•¨
  - **ëŒ€ì•ˆ**: Runway ML, Pika Labs, Kling AI (image-to-video ì§€ì›)

- 2025-12-16: ì»¤íŠ¸â†”íŒ ì–‘ë°©í–¥ ì—°ê²° + Vision ë§¤ì¹­ í™œì„±í™”

  ### ì»¤íŠ¸â†”íŒ ë ˆì‹œí”¼ ì–‘ë°©í–¥ ì—°ê²° ë²„íŠ¼
  - **ì»¤íŠ¸ ë ˆì‹œí”¼ â†’ íŒ ë ˆì‹œí”¼ ì—°ê²°**: "ğŸŒ€ ì´ ìŠ¤íƒ€ì¼ íŒ ë ˆì‹œí”¼ ë³´ê¸°" ë²„íŠ¼
  - **íŒ ë ˆì‹œí”¼ â†’ ì»¤íŠ¸ ë ˆì‹œí”¼ ì—°ê²°**: "âœ‚ï¸ ì´ ìŠ¤íƒ€ì¼ ì»¤íŠ¸ ë ˆì‹œí”¼ ë³´ê¸°" ë²„íŠ¼
  - **ìŠ¤íƒ€ì¼ID ë³€í™˜**: FAL0001 â†” FALP0001 (L ë’¤ì— P ì¶”ê°€/ì œê±°)
  - **ë²„íŠ¼ ìœ„ì¹˜**: ë ˆì‹œí”¼ ìº”ë²„ìŠ¤ ë§¨ ì•„ë˜ (AI ìƒì„± ë§ì¶¤ ë ˆì‹œí”¼ ë‹¤ìŒ)
  - **5ê°œêµ­ì–´ ì§€ì›**: viewPermRecipe, viewCutRecipe, permRecipeHint, cutRecipeHint ë²ˆì—­ í‚¤ ì¶”ê°€
  - **API ì—”ë“œí¬ì¸íŠ¸**: `get_perm_recipe_by_style`, `get_cut_recipe_by_style`
  - **í•¨ìˆ˜ ìœ„ì¹˜**: ai-studio.jsì˜ `showMatchingPermRecipe()`, `showMatchingCutRecipe()`, `showPermRecipeFromCut()`, `showCutRecipeFromPerm()`

  ### Vision ë§¤ì¹­ í™œì„±í™” (resultImage í•„ë“œ ì¶”ê°€)
  - **ë¬¸ì œ**: Firestore `styles` ì»¬ë ‰ì…˜ì— `resultImage` í•„ë“œê°€ ì—†ì–´ì„œ Vision ë§¤ì¹­ì´ ì•ˆ ë¨
  - **í•´ê²°**: 140ê°œ ìŠ¤íƒ€ì¼ ëª¨ë‘ì— `resultImage` í•„ë“œ ì¶”ê°€
    - Storageì—ì„œ `styles/{styleId}/result.png` ë˜ëŠ” `styles/{series}/{styleId}/result.png` URL ìˆ˜ì§‘
    - ì»¤íŠ¸ 70ê°œ: ê°ì ìì²´ result.png ì‚¬ìš©
    - íŒ 70ê°œ: ë§¤ì¹­ë˜ëŠ” ì»¤íŠ¸ì˜ result.png ì‚¬ìš© (FALP0001 â†’ FAL0001/result.png)
  - **ì½”ë“œ ìœ„ì¹˜**: chatbot-api.jsì˜ `seriesStylesWithImage.filter(s => s.resultImage)`

  ### íŒ ë ˆì‹œí”¼ ì„¹ì…˜ í—¤ë” ìë™ ë¶„ë¦¬ ê°œì„ 
  - **ê¸°ì¡´**: Zone(Aì¡´, Bì¡´, Cì¡´, ì‚¬ì´ë“œ)ë§Œ ê°ì§€
  - **ê°œì„ **: ì‚¬ì´ë“œ, ë°± ì‚¬ì´ë“œ, ì„¼í„° ë°±, ë„¤ì´í”„, í”„ë¦°ì§€, í¬ë¼ìš´, íƒ‘ ë“± ë¶€ìœ„ë³„ ìë™ ê°ì§€
  - **í•¨ìˆ˜ ìœ„ì¹˜**: chatbot-api.js `formatPermRecipe()` ë¼ì¸ ~7308
  - **í‘œì‹œ í˜•ì‹**: `**[ğŸ“ ì„¼í„° ë°± (Center Back)]**`

  ### ì¶”ê°€ë¶„ íŒ ë ˆì‹œí”¼ 11ê°œ ì—…ë¡œë“œ ì™„ë£Œ (ì´ì „ ì‘ì—…)

  ### ì¶”ê°€ë¶„ íŒ ë ˆì‹œí”¼ ì—…ë¡œë“œ
  - **ì¶”ê°€ëœ ìŠ¤íƒ€ì¼ 11ê°œ**: FALP4001, FBLP2001, FBLP2002, FBLP3001, FDLP1003, FDLP3001, FELP2004, FFLP2003, FGLP1001, FGLP1005, FGLP2004
  - **ìë§‰ ì¶”ì¶œ**: Gemini Vision APIë¡œ 11ê°œ ìŠ¤íƒ€ì¼ ìë§‰(caption.txt) ì¶”ì¶œ
  - **Firebase Storage ì—…ë¡œë“œ**: 700ê°œ ë„í•´ë„ ì´ë¯¸ì§€ ì—…ë¡œë“œ
  - **Firestore ì €ì¥**: `styles` ì»¬ë ‰ì…˜ì— 11ê°œ íŒ ë ˆì‹œí”¼ ë¬¸ì„œ ì €ì¥
  - **ì¸ë„¤ì¼ ë³€í™˜**: 700ê°œ ë„í•´ë„ 300px ì¸ë„¤ì¼ë¡œ ë³€í™˜ ì™„ë£Œ
  - **ìµœì¢… ê²°ê³¼**: 61ê°œ â†’ 70ê°œ íŒ ë ˆì‹œí”¼ (ìƒˆë¡œ 9ê°œ ì¶”ê°€, 2ê°œ ì—…ë°ì´íŠ¸)
  - **ì»¤íŠ¸-íŒ ë§¤ì¹­**: ëª¨ë“  69ê°œ ì»¤íŠ¸ì— ëŒ€ì‘í•˜ëŠ” íŒ ë ˆì‹œí”¼ ì™„ë¹„

  ### íŒ ë ˆì‹œí”¼ ìë§‰ í…ìŠ¤íŠ¸ ì •ë¦¬
  - **format-perm-recipes.py** ìŠ¤í¬ë¦½íŠ¸ë¡œ íŒ ë ˆì‹œí”¼ ìë§‰ Zoneë³„ í¬ë§·íŒ…
  - Zone êµ¬ë¶„: ë„¤ì´í”„, ì„¼í„° ë°±, ë°± ì‚¬ì´ë“œ, ì‚¬ì´ë“œ, í”„ë¦°ì§€, í”„ë¡ íŠ¸ í†±
  - íŒŒë¼ë¯¸í„° ì¶”ì¶œ: ì²œì²´ì¶• ê°ë„, ë‹¤ì´ë ‰ì…˜(D0~D8), ë¡œë“œ/ì…‹íŒ…ë¡¤, ë² ì´ìŠ¤ ìœ í˜•, ì™€ì¸ë”©/í”„ë ˆìŠ¤
  - CSS ìŠ¤íƒ€ì¼ ì¶”ê°€: `.recipe-zone-header`, `.recipe-warning`, `.recipe-tip`

  ### Firestore í˜ì´ì§€ë„¤ì´ì…˜ ë²„ê·¸ ìˆ˜ì • (ì¤‘ìš”!)
  - **ë¬¸ì œ**: Firestore REST API ê¸°ë³¸ 100ê°œ ë¬¸ì„œ ì œí•œ â†’ FHLP ì‹œë¦¬ì¦ˆ ëˆ„ë½
  - **ì›ì¸**: ì»¤íŠ¸ 69ê°œ + íŒ 61ê°œ = 130ê°œì¸ë° 100ê°œë§Œ ë¡œë“œë¨
  - **í•´ê²°**: `getFirestoreStyles()` í•¨ìˆ˜ì— `pageSize=300` + `nextPageToken` í˜ì´ì§€ë„¤ì´ì…˜ ì¶”ê°€
  - **ìœ„ì¹˜**: chatbot-api.js ë¼ì¸ ~3998-4064

  ### ë ˆì‹œí”¼ ì¤„ë°”ê¿ˆ ë²„ê·¸ ìˆ˜ì •
  - **ë¬¸ì œ**: `\s{2,}` ì •ê·œì‹ì´ ì¤„ë°”ê¿ˆ(\n)ê¹Œì§€ ì œê±° â†’ ë ˆì‹œí”¼ê°€ í•œ ì¤„ë¡œ í‘œì‹œë¨
  - **í•´ê²°**: `/ {2,}/` (ë¦¬í„°ëŸ´ ìŠ¤í˜ì´ìŠ¤ë§Œ)ìœ¼ë¡œ ë³€ê²½
  - **ìœ„ì¹˜**: chatbot-api.js ë¼ì¸ ~6684, ~7697

  ### íŒ ë„í•´ë„ ì¸ë„¤ì¼ ë³€í™˜
  - **upload-perm-thumbnails.py** ìŠ¤í¬ë¦½íŠ¸ë¡œ ê³ í•´ìƒë„ ì´ë¯¸ì§€ â†’ 300px ì¸ë„¤ì¼ ë³€í™˜
  - **ì„¤ì •**: ë„ˆë¹„ 300px, JPEG 85% í’ˆì§ˆ
  - **ê²°ê³¼**: 61ê°œ + 11ê°œ = 72ê°œ ìŠ¤íƒ€ì¼, 4810ê°œ ì¸ë„¤ì¼ ì™„ë£Œ
  - **ëª©ì **: ë„í•´ë„ ë¡œë”© ì†ë„ ê°œì„  (í•œ ìŠ¤íƒ€ì¼ë‹¹ 100ê°œ+ ì´ë¯¸ì§€)

  ### íŒ ë ˆì‹œí”¼ ì¬ë¶„ì„ ê¸°ëŠ¥ ì¶”ê°€
  - **ê¸°ì¥ + íŒíƒ€ì… ìˆ˜ì • UI**: ì»¤íŠ¸ì™€ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ì¬ë¶„ì„ ì§€ì›
  - **íŒ íƒ€ì… ë¶„ë¥˜** (styleId ë²ˆí˜¸ëŒ€ ê¸°ì¤€):
    - 0ë²ˆëŒ€: ë§¤ì§ (í”„ë ˆìŠ¤) - FALP0001, FBLP0001
    - 1ë²ˆëŒ€: ì…‹íŒ…ë¡¤ (Cì»¬) - FCLP1001, FELP1001
    - 2ë²ˆëŒ€: ë¡œë“œ (Sì»¬) - FBLP2003, FCLP2002
    - 3ë²ˆëŒ€: ë³¼ë¥¨ ì›¨ì´ë¸Œ - FALP3001, FGLP3001
    - 4ë²ˆëŒ€: íŠ¸ìœ„ìŠ¤íŠ¸ - FBLP4002
  - **í´ë¼ì´ì–¸íŠ¸**: `reanalyzePermWithStyle()` í•¨ìˆ˜ (ai-studio.js)
  - **ì„œë²„**: `regeneratePermRecipeWithStyle()` í•¨ìˆ˜ (chatbot-api.js)
  - **action**: `regenerate_perm_recipe`

- 2025-12-15: 2026 ì‚´ë¡± íŠ¸ë Œë“œ ê¸°ë°˜ ê³ ê° ì‘ëŒ€ ì½”ì¹­ í”„ë¡¬í”„íŠ¸ ì¶”ê°€
  - **5ê°œêµ­ì–´ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ì— ìœµí•©**: ê¸°ì¡´ í”„ë¡¬í”„íŠ¸ ìœ ì§€ + ìƒˆ ì„¹ì…˜ ì¶”ê°€
  - **í•µì‹¬ íŠ¸ë Œë“œ 5ê°€ì§€**:
    1. ì´ˆê°œì¸í™”: "ìœ í–‰ ìŠ¤íƒ€ì¼"ë³´ë‹¤ "ì´ ê³ ê°ì—ê²Œ ë§ëŠ”" ì„¤ê³„
    2. ê·¼ê±° ê¸°ë°˜: "ì™œ ì¢‹ì€ì§€" ê³¼í•™ì ìœ¼ë¡œ ì„¤ëª…í•´ì•¼ ì‹ ë¢° íšë“
    3. íˆ¬ëª…ì„±: "ì•Œì•„ì„œ í•´ë“œë¦´ê²Œìš”"ëŠ” ë¶ˆì‹  ì´ˆë˜, ê³¼ì •ì„ ë³´ì—¬ì¤˜ì•¼ í•¨
    4. ë£¨í‹´ ê²½í—˜: ì¼íšŒì„± ì‹œìˆ ì´ ì•„ë‹Œ ì¥ê¸° ê´€ë¦¬ í”Œëœ ì œì•ˆ
    5. ê°ì • í˜¸ìŠ¤í”¼íƒˆë¦¬í‹°: ê¸°ìˆ ë³´ë‹¤ ê³ ê° ë¶ˆì•ˆ í•´ì†Œê°€ ì¬ë°©ë¬¸ ê²°ì •
  - **ê³ ê° ì‘ëŒ€ ì§ˆë¬¸ ì‹œ ë‹µë³€ êµ¬ì¡°**:
    1. (ìƒí™© ë¶„ì„) ê³ ê°ì´ ì§„ì§œ ì›í•˜ëŠ” ê²Œ ë­”ì§€ ë¶„ì„
    2. (ì§„ë‹¨ ì§ˆë¬¸) ê³ ê°ì—ê²Œ ë¨¼ì € ë¬¼ì–´ë³¼ ì—­ì§ˆë¬¸ ì˜ˆì‹œ
    3. (ì„¤ëª… í™”ë²•) ê·¼ê±° ê¸°ë°˜ìœ¼ë¡œ ê³ ê°ì—ê²Œ ì„¤ëª…í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸
    4. (ë£¨í‹´ ì•ˆë‚´) ì‹œìˆ  í›„ í™ˆì¼€ì–´ + ì¬ë°©ë¬¸ ì£¼ê¸° ì•ˆë‚´
    5. (í”¼í•´ì•¼ í•  ë§) ì‹ ë¢°ë¥¼ ë–¨ì–´ëœ¨ë¦¬ëŠ” í‘œí˜„
  - **ê¸°ì¡´ ë°©ì‹ ìœ ì§€ ì¼€ì´ìŠ¤**: ì´ë¡ /ê¸°ìˆ  ì§ˆë¬¸, ë ˆì‹œí”¼ ì¡°íšŒ, ë‹¨ìˆœ ì •ë³´ ìš”ì²­

- 2025-12-15: ë©”ë¦¬ í¬ë¦¬ìŠ¤ë§ˆìŠ¤ í…ìŠ¤íŠ¸ ì™„ì „ ë¹„í™œì„±í™”
  - `createMerryChristmasText()` í•¨ìˆ˜: ìš”ì†Œ ì œê±°ë§Œ ìˆ˜í–‰í•˜ë„ë¡ ë³€ê²½
  - DOMContentLoadedì—ì„œ ì´ì „ ìºì‹œë¡œ ìƒì„±ëœ í¬ë¦¬ìŠ¤ë§ˆìŠ¤ íš¨ê³¼ ìš”ì†Œë“¤ ì¼ê´„ ì œê±°

- 2025-12-14: ì—°ê´€ ì§ˆë¬¸ ì¶”ì²œ ê¸°ëŠ¥ + í¬ë¦¬ìŠ¤ë§ˆìŠ¤ íš¨ê³¼ ê°„ì†Œí™”
  - **ì—°ê´€ ì§ˆë¬¸ ì¶”ì²œ**: ë‹µë³€ í›„ ê´€ë ¨ ì§ˆë¬¸ 3ê°œ ì œì•ˆ (5ê°œêµ­ì–´ ì§€ì›)
  - **type í•„ë“œ ì¶©ëŒ ë²„ê·¸ ìˆ˜ì •**: spread ì—°ì‚°ìë¡œ ë®ì–´ì“°ê¸° ë¬¸ì œ â†’ `questionType`ìœ¼ë¡œ ë¶„ë¦¬
  - **í¬ë¦¬ìŠ¤ë§ˆìŠ¤ íš¨ê³¼ ê°„ì†Œí™”**: ëˆˆë‚´ë¦¬ê¸°ë§Œ ìœ ì§€, íŠ¸ë¦¬/ì„ ë¬¼/í…ìŠ¤íŠ¸/ë°œìêµ­/ëˆˆì‚¬ëŒ/ë²„íŠ¼ëˆˆìŒ“ì„ ì œê±°

- 2024-12-11: ì»¤íŠ¸/íŒ ë ˆì‹œí”¼ RAG ì™„ì „ í†µí•© + íŒ ì¸ë±ìŠ¤ ì´ë¯¸ì§€ ì¶”ê°€

  ### RAG ì»¤íŠ¸ ìë§‰ ì¶”ê°€ (í—·ê°ˆë ¸ë˜ ë¶€ë¶„!)
  - **ì—¬ì ì»¤íŠ¸ 69ê°œ + ë‚¨ì ì»¤íŠ¸ 69ê°œ = 138ê°œ** ìë§‰ì„ **í•˜ë‚˜ì˜ í…ìŠ¤íŠ¸ íŒŒì¼**ë¡œ ë³‘í•©
  - ìŠ¤í¬ë¦½íŠ¸: `merge-cut-captions.py` â†’ `upload-cut-captions-to-rag.py`
  - **API íŒŒë¼ë¯¸í„° ì£¼ì˜**: `import_file()`ì—ì„œ `file_search_store_name=STORE_NAME` (name= ì•„ë‹˜!)
  - RAG ë¬¸ì„œ ìˆ˜: 42ê°œ â†’ 43ê°œ

  ### ìŠ¤íƒ€ì¼ ì½”ë“œ ë…¸ì¶œ ê¸ˆì§€
  - ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ì— ê·œì¹™ ì¶”ê°€: FAL0001, FALP3003, SF1001 ë“± ì½”ë“œ ë…¸ì¶œ ê¸ˆì§€
  - ëŒ€ì‹  ìì—°ì–´ë¡œ í‘œí˜„: "ê°€ìŠ´ í•˜ë‹¨ ê¸¸ì´ì˜ Sì»¬ íŒ", "ì‚¬ì´ë“œ í”„ë¦°ì§€ ë‚¨ì ì»¤íŠ¸"

  ### íŒ ì¸ë±ìŠ¤ ì´ë¯¸ì§€ ì—…ë¡œë“œ (í—·ê°ˆë ¸ë˜ ë¶€ë¶„!)
  - **Firebase Storage**: `perm_index/{lang}/` ê²½ë¡œì— 6ê°œ ì–¸ì–´ ì´ë¯¸ì§€ ì—…ë¡œë“œ
  - **Firestore êµ¬ì¡° ë¬¸ì œ**: ì²˜ìŒì— ì–¸ì–´ë³„ë¡œ ë¬¸ì„œ ë¶„ë¦¬ë¨ â†’ `fix-perm-index-merge.py`ë¡œ ë³‘í•©
    - ì˜ëª»: `perm_ko_Zone`, `perm_en_Zone` ë³„ë„ ë¬¸ì„œ
    - ì˜¬ë°”ë¦„: `perm_Zone` í•˜ë‚˜ì— `images: {ko, en, ja, zh, vi, id}` ê°ì²´
  - **detectTheoryImageForQuery ìˆ˜ì •**: `idx.type` â†’ `idx.category || idx.type` ì²´í¬
    - íŒ ì¸ë±ìŠ¤ëŠ” `category: 'perm'` ì‚¬ìš©, ê¸°ì¡´ ì»¤íŠ¸ ì¸ë±ìŠ¤ëŠ” `type` í•„ë“œ ì‚¬ìš©
  - ìµœì¢…: 46ê°œ íŒ ì¸ë±ìŠ¤, ê°ê° 6ê°œ ì–¸ì–´ ì§€ì› (ko, en, ja, zh, vi, id)

  ### ë£©ë¶ í…ìŠ¤íŠ¸ ê°€ë…ì„± ê°œì„ 
  - `.hero-description`ì— ë°˜íˆ¬ëª… ê²€ì • ê·¸ë¼ë°ì´ì…˜ ë°°ê²½ ì¶”ê°€
  - text-shadow 3ì¤‘ ê°•í™”, font-weight 500, z-index 15

- 2024-12-11 (ì´ì „): ì–¸ì–´ íŒŒë¼ë¯¸í„° ë° íŒ ë ˆì‹œí”¼ RAG ê²€ìƒ‰ ìˆ˜ì •
  - **í´ë¼ì´ì–¸íŠ¸ language íŒŒë¼ë¯¸í„° ìš°ì„  ì‚¬ìš©**: payload.language(ko/en/ja/zh/vi) â†’ ì„œë²„ì—ì„œ korean/english ë“±ìœ¼ë¡œ ë§¤í•‘
  - **íŒ ë ˆì‹œí”¼ RAG ê²€ìƒ‰ ê·œì¹™ ì¶”ê°€**: ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ì— File Search ê²°ê³¼ ìš°ì„  ì‚¬ìš© ì§€ì‹œ
    - ë¡œë“œ í¬ê¸°(mm), ì™€ì¸ë”© ê°ë„(ì²œì²´ì¶• ê°ë„), ì„¹ì…˜ ë°©í–¥, ì¡´(Zone) ì •ë³´ ë“± êµ¬ì²´ì  ìˆ˜ì¹˜ ì œê³µ
    - ê²€ìƒ‰ ê²°ê³¼ ì—†ìœ¼ë©´ ì†”ì§í•˜ê²Œ ë‹µë³€, ì¼ë°˜ì ì¸ ì¶”ì¸¡ ê¸ˆì§€
- 2024-12-10: Vision ìŠ¤íƒ€ì¼ ë§¤ì¹­ ê°œì„  ë° ì´ë¡  ì´ë¯¸ì§€ ë‹¤ì¤‘ ë°˜í™˜
  - **Caption ê¸°ë°˜ ê¸°ë²• ë§¤ì¹­**: diagrams ë©”íƒ€ë°ì´í„° ëŒ€ì‹  textRecipe/caption í…ìŠ¤íŠ¸ ë¶„ì„ìœ¼ë¡œ ë³€ê²½
    - Cì¡´ í‚¤ì›Œë“œ ì§ì ‘ ê²€ìƒ‰: 'cì¡´', 'c zone', 'ì˜¤ë²„ì¡´', 'internal' ë“±
    - ì„¹ì…˜ íƒ€ì…: 'íŒŒì´ì„¹ì…˜', 'ëŒ€ê°', 'ìˆ˜í‰', 'ìˆ˜ì§' í•œêµ­ì–´ í‚¤ì›Œë“œ ë§¤ì¹­
    - ê°ë„ ì¶”ì¶œ: ì •ê·œì‹ìœ¼ë¡œ 'XXë„' íŒ¨í„´ ë¶„ì„í•˜ì—¬ ë³µì¡ë„ íŒë‹¨
  - **ì—¬ì ìŠ¤íƒ€ì¼**: Vision 60% + ìº¡ì…˜ ê¸°ë²• 40% ê°€ì¤‘ì¹˜
  - **ë‚¨ì ìŠ¤íƒ€ì¼**: Vision 70% + ìº¡ì…˜ ê¸°ë²• 30% ê°€ì¤‘ì¹˜ (ë‚¨ìëŠ” ì™¸í˜• ë¹„êµê°€ ë” ì¤‘ìš”)
  - **ì´ë¡  ì´ë¯¸ì§€ ë‹¤ì¤‘ ë°˜í™˜**: detectTheoryImageForQueryê°€ ìµœëŒ€ 3ê°œ ì´ë¯¸ì§€ ë°°ì—´ ë°˜í™˜
    - "ì¡´ë³„ë¡œ ì„¤ëª…í•´ì¤˜" â†’ Zone, A Zone & V Zone ì´ë¯¸ì§€ í•¨ê»˜ í‘œì‹œ
    - ì¤‘ë³µ term ì œê±° ë¡œì§ ì¶”ê°€
  - **Aì¡´/Bì¡´/Cì¡´ í‚¤ì›Œë“œ ì˜ˆì™¸**: 2ê¸€ì ì´í•˜ í‚¤ì›Œë“œ ìŠ¤í‚µì—ì„œ ì¤‘ìš” í‚¤ì›Œë“œ ì˜ˆì™¸ ì²˜ë¦¬
  - **External/Internal ì—­í•  êµ¬ë¶„ ê·œì¹™**: 5ê°œêµ­ì–´ RAG ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ì— ì¶”ê°€
    - External: ê¸¸ì´ ì„¤ì •, ì•„ì›ƒë¼ì¸ í˜•íƒœ, í•˜ë“œí•œ ì§ˆê° (Under Zone / A,B Zone)
    - Internal: ë³¼ë¥¨ í˜•ì„±, ìœ¤ê³½ ì¡°ì ˆ, ì†Œí”„íŠ¸í•œ ì§ˆê° (Over Zone / C Zone)
    - ë™ì¼ ê¸°ë²•ì´ë¼ë„ ì˜ì—­ë³„ "ëª©ì "ì„ ë‹¤ë¥´ê²Œ ì„¤ëª…í•˜ë„ë¡ ì§€ì‹œ
  - **ë³´ì•ˆ ì‘ë‹µ ë©”ì‹œì§€ ìˆ˜ì •**: 5ê°œêµ­ì–´ ëª¨ë‘ ì ìš©
    - "í•µì‹¬ ì˜ì—… ê¸°ë°€" â†’ "í•µì‹¬ ë³´ì•ˆ ì‚¬í•­" ë³€ê²½
    - "ì •ê·œ êµìœ¡ê³¼ì •ì—ì„œë§Œ ë°°ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤" ë¬¸êµ¬ ì œê±°
- 2024-12-09: 5ê°œêµ­ì–´ RAG ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ì™„ì „ ì§€ì› ì¶”ê°€
  - buildGeminiSystemPromptì— ì¼ë³¸ì–´/ì¤‘êµ­ì–´/ë² íŠ¸ë‚¨ì–´ í”„ë¡¬í”„íŠ¸ ì¶”ê°€
  - ì¸ì‚¬ë§/ë³´ì•ˆ ì‘ë‹µ ë©”ì‹œì§€ 5ê°œêµ­ì–´ ì§€ì›
- 2024-12: File Search Storeì— 38ê°œ ë¬¸ì„œ import ì™„ë£Œ
- maxOutputTokens: 8000ìœ¼ë¡œ ì¦ê°€
- ë§ˆí¬ë‹¤ìš´ ê¸ˆì§€ ê·œì¹™ ê°•í™”
- ì´ë¯¸ì§€ ë§¤ì¹­ ë¡œì§ ê°œì„  (ì¼ë°˜ í‚¤ì›Œë“œ ì œì™¸)

## í•µì‹¬ í•¨ìˆ˜ ìœ„ì¹˜ (chatbot-api.js)
- `generateGeminiFileSearchResponse()`: ë¼ì¸ ~2834 (ë¹„ìŠ¤íŠ¸ë¦¬ë° RAG ì‘ë‹µ)
- `generateGeminiFileSearchResponseStream()`: ë¼ì¸ ~2962 (ìŠ¤íŠ¸ë¦¬ë° RAG ì‘ë‹µ)
- `buildGeminiSystemPrompt()`: ë¼ì¸ ~2500 (5ê°œêµ­ì–´ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸)
- `detectLanguage()`: ë¼ì¸ ~2277 (ì–¸ì–´ ê°ì§€)
- `detectTheoryImageForQuery()`: ë¼ì¸ ~3404 (ì´ë¯¸ì§€ ë§¤ì¹­, ë‹¤ì¤‘ ë°˜í™˜)
- `calculateTechniqueMatchScore()`: ë¼ì¸ ~6423 (ìº¡ì…˜ ê¸°ë°˜ ê¸°ë²• ë§¤ì¹­ ì ìˆ˜)
- `selectBestStyleByVision()`: ë¼ì¸ ~6543 (ì—¬ì Vision ë¹„êµ)
- `selectBestMaleStyleByVision()`: ë¼ì¸ ~7334 (ë‚¨ì Vision ë¹„êµ)

## AI ëª¨ë¸ ì‚¬ìš© í˜„í™© ë° ë¹„ìš©

### í˜„ì¬ ì‚¬ìš©ì¤‘ì¸ ëª¨ë¸
| ê¸°ëŠ¥ | ëª¨ë¸ | ìš©ë„ |
|------|------|------|
| í…ìŠ¤íŠ¸ Q&A + RAG | **Gemini 2.5 Flash** | ì´ë¡  ì§ˆë¬¸ ë‹µë³€ |
| ì´ë¯¸ì§€ ë¶„ì„/ë¹„êµ | **Gemini 2.0 Flash (Vision)** | ìŠ¤íƒ€ì¼ ë§¤ì¹­, íŒŒë¼ë¯¸í„° ì¶”ì¶œ |
| ìŠ¤íŠ¸ë¦¬ë° ì‘ë‹µ | **Gemini 2.5 Flash** | ì‹¤ì‹œê°„ ë‹µë³€ |
| ì„ë² ë”© ìƒì„± | **Gemini 2.5 Flash** | ë²¡í„° ê²€ìƒ‰ |

### Gemini API ê°€ê²© (100ë§Œ í† í°ë‹¹, 2025ë…„ ê¸°ì¤€)
| ëª¨ë¸ | ì…ë ¥ | ì¶œë ¥ |
|------|------|------|
| **Gemini 2.0 Flash** | $0.10 | $0.40 |
| **Gemini 2.5 Flash** | $0.30 | **$2.50** â† ì¶œë ¥ ë¹„ìŒˆ! |
| Gemini 2.5 Pro | $1.25 | $10.00 |

### ì˜ˆìƒ ë¹„ìš© (1ì¸ë‹¹/ì›”)
- **ì¼ë°˜ ìœ ì €** (í•˜ë£¨ 5-10íšŒ): ~$0.15~0.50/ì›”
- **í•˜ë“œ ìœ ì €** (í•˜ë£¨ 30-50íšŒ): ~$1.5~5/ì›”

### í• ë‹¹ëŸ‰ (Rate Limits)
- **ìœ ë£Œ í‹°ì–´ ì‚¬ìš©ì¤‘** â†’ í• ë‹¹ëŸ‰ ê±±ì • ì—†ìŒ
- ë¬´ë£Œ í‹°ì–´: RPM 10, RPD 250 (ì„œë¹„ìŠ¤ ìš´ì˜ ë¶ˆê°€)
- ìœ ë£Œ í‹°ì–´: RPM 60~1000+, RPD ë¬´ì œí•œ

### ë¹„ìš© ìµœì í™” ì˜µì…˜
- RAGë¥¼ **2.0 Flashë¡œ ë³€ê²½**í•˜ë©´ ì¶œë ¥ ë¹„ìš© **6ë°° ì ˆê°** ê°€ëŠ¥
- RAGëŠ” ë¬¸ì„œ ê¸°ë°˜ ë‹µë³€ì´ë¼ 2.0ìœ¼ë¡œ ë°”ê¿”ë„ í’ˆì§ˆ ì°¨ì´ ê±°ì˜ ì—†ìŒ
- temperature 0.2, topP 0.8ë¡œ ì„¤ì •ë˜ì–´ ìˆì–´ ì°½ì˜ì„± ì–µì œë¨

### GPT/OpenAI ì‚¬ìš© í˜„í™© (2025-12-22 ì •ë¦¬ ì™„ë£Œ)
- **í˜„ì¬ ì™„ì „ ë¯¸ì‚¬ìš©** - ëª¨ë“  AI ê¸°ëŠ¥ì´ Geminië¡œ ì²˜ë¦¬ë¨
- ë ˆê±°ì‹œ ì½”ë“œ DEPRECATED ì²˜ë¦¬ ì™„ë£Œ:
  - `chatbot-api.js`: generateProfessionalResponse, generateRecipe, generateProfessionalResponseStream
  - `lib/male-recipe.js`, `lib/female-recipe.js`: ì „ì²´ íŒŒì¼ DEPRECATED
- OPENAI_API_KEY í™˜ê²½ë³€ìˆ˜ ì œê±° ê°€ëŠ¥ (ë” ì´ìƒ ì‚¬ìš© ì•ˆ í•¨)
- `generateMaleCustomRecipe()` í•¨ìˆ˜ Geminië¡œ ì „í™˜ ì™„ë£Œ

## ìš”ê¸ˆì œ ì„¤ê³„ (2025-12-18 í™•ì •)

### ê¸°ëŠ¥ë³„ API ë¹„ìš© (1íšŒë‹¹)

| ê¸°ëŠ¥ | ì‚¬ìš© ê¸°ìˆ  | ì›ê°€ |
|------|----------|------|
| ìŠ¤íƒ€ì¼ë©”ë‰´ | Firebase Storage (ì •ì ) | **0ì›** |
| AIí¼ìŠ¤ë„ë¶„ì„ | MediaPipe (í´ë¼ì´ì–¸íŠ¸) | **0ì›** |
| ë“œë ˆì´í”„ëª¨ë“œ | MediaPipe (í´ë¼ì´ì–¸íŠ¸) | **0ì›** |
| ì±—ë´‡ | Gemini 2.5 Flash RAG | **~7.5ì›** |
| ë£©ë¶ | 2.0 Flash Vision + ì´ë¯¸ì§€ 3ì¥ | **~160ì›** |
| í—¤ì–´ì²´í—˜ | vModel + Gemini 3 Pro Image | **~278ì›** |

### API ê°€ê²© ì°¸ê³  (2025ë…„ 12ì›” ê¸°ì¤€)

| ëª¨ë¸ | ì…ë ¥ (1M í† í°) | ì¶œë ¥ (1M í† í°) |
|------|---------------|----------------|
| Gemini 2.0 Flash | $0.10 | $0.40 |
| Gemini 2.5 Flash | $0.30 | $2.50 |
| Gemini 2.5 Flash Image | - | $0.039/ì¥ |
| Gemini 3 Pro Image | - | $0.134/ì¥ |
| vModel Hair Swap | ~$0.08/íšŒ | - |

### í¬ë ˆë”§ ê¸°ë°˜ ìš”ê¸ˆì œ (ì‚¬ìš©ëŸ‰ ë¹„ê³µê°œ ë°©ì‹)

**ìš´ì˜ ì›ì¹™:**
- ì‚¬ìš©ìì—ê²Œ ë‚¨ì€ í¬ë ˆë”§ **ì•ˆ ë³´ì—¬ì¤Œ** (GPT/Claude ë°©ì‹)
- í™˜ë¶ˆ/ì´ì›” í´ë ˆì„ ë°©ì§€
- ì´ˆê³¼ ì‚¬ìš© ì‹œ ì¶”ê°€ ê²°ì œ ìœ ë„

**ê¸°ëŠ¥ë³„ í¬ë ˆë”§ ì†Œëª¨:**

| ê¸°ëŠ¥ | í¬ë ˆë”§/íšŒ |
|------|----------|
| ìŠ¤íƒ€ì¼ë©”ë‰´ | 0 (ë¬´ì œí•œ) |
| AIí¼ìŠ¤ë„ë¶„ì„ | 0 (ë¬´ì œí•œ) |
| ë“œë ˆì´í”„ëª¨ë“œ | 0 (ë¬´ì œí•œ) |
| ì±—ë´‡ | 3~30 (í† í° êµ¬ê°„ë³„) |
| ë£©ë¶ | 200 |
| í—¤ì–´ì²´í—˜ | 350 |

**ì±—ë´‡ í¬ë ˆë”§ êµ¬ê°„:**
| í† í° ìˆ˜ | í¬ë ˆë”§ | ì˜ˆì‹œ |
|---------|--------|------|
| ~500 | 3 | ì¸ì‚¬, ê°„ë‹¨ ì§ˆë¬¸ |
| 501~1500 | 10 | ì¼ë°˜ ì§ˆë¬¸ |
| 1501~3000 | 20 | ìƒì„¸ ì„¤ëª… |
| 3000+ | 30 | ë ˆì‹œí”¼, ë³µì¡í•œ ë¶„ì„ |

**ìš”ê¸ˆì œë³„ í¬ë ˆë”§ ë°°ë¶„:**

| ìš”ê¸ˆì œ | ì›” í¬ë ˆë”§ | ì›ë‹¹ í¬ë ˆë”§ | ìµœì•… ì›ê°€ | í™•ì • ì´ìµ | ë§ˆì§„ |
|--------|----------|------------|----------|----------|------|
| ë¬´ë£Œ | 200 | - | 157ì› | -157ì› | - |
| 22,000ì› | 10,000 | 0.45 | 7,800ì› | **14,200ì›** | 65% |
| 38,000ì› | **18,000** | **0.47** | 14,100ì› | **23,900ì›** | 63% |
| 50,000ì› | **25,000** | **0.50** | 19,600ì› | **30,400ì›** | 61% |

**ìƒìœ„ ìš”ê¸ˆì œ ë©”ë¦¬íŠ¸:** ì›ë‹¹ í¬ë ˆë”§ì´ ì¦ê°€í•˜ì—¬ ì—…ê·¸ë ˆì´ë“œ ìœ ì¸ ì œê³µ

**ìš”ê¸ˆì œë³„ ê¸°ëŠ¥ ì ‘ê·¼ ê¶Œí•œ:**

| ê¸°ëŠ¥ | ë¬´ë£Œ | 22,000ì› | 38,000ì› | 50,000ì› |
|------|------|----------|----------|----------|
| ìŠ¤íƒ€ì¼ë©”ë‰´íŒ | âœ… ë¬´ì œí•œ | âœ… ë¬´ì œí•œ | âœ… ë¬´ì œí•œ | âœ… ë¬´ì œí•œ |
| ì±—ë´‡ | âœ… í¬ë ˆë”§ | âœ… í¬ë ˆë”§ | âœ… í¬ë ˆë”§ | âœ… í¬ë ˆë”§ |
| í¼ìŠ¤ë„ì´ë¯¸ì§€ë¶„ì„ | âŒ ì ê¸ˆ | âœ… ë¬´ì œí•œ | âœ… ë¬´ì œí•œ | âœ… ë¬´ì œí•œ |
| ë£©ë¶ | âŒ ì ê¸ˆ | âœ… í¬ë ˆë”§ | âœ… í¬ë ˆë”§ | âœ… í¬ë ˆë”§ |
| í—¤ì–´ì²´í—˜ | âŒ ì ê¸ˆ | âœ… í¬ë ˆë”§ | âœ… í¬ë ˆë”§ | âœ… í¬ë ˆë”§ |

**í¬ë ˆë”§ ì†Œì§„ ì‹œ:**
- ë‹¤ìŒ ìš”ê¸ˆì œë¡œ ì—…ê·¸ë ˆì´ë“œ ìœ ë„ íŒì—…

## ê²°ì œ ì‹œìŠ¤í…œ (2025-12-22 ë…¼ì˜)

### í¬íŠ¸ì› V2 ì—°ë™ ì •ë³´
- storeId: store-69fa8bc3-f410-433a-a8f2-f5d922f94dcb
- channelKey: channel-key-da1e7007-39b9-4afa-8c40-0f158d323af1
- PG: nice_v2 (ë‚˜ì´ìŠ¤ V2 ì‹ ëª¨ë“ˆ)
- MID: IMPdryi1m
- ê²°ì œ ëª¨ë“ˆ: ì‹ ëª¨ë“ˆ, ê²°ì œì°½, ì¼ë°˜ê²°ì œ, API, ìˆ˜ê¸°/ì •ê¸°ê²°ì œ

### ê²°ì œ ë°©ì‹ ê²°ì •
- HairgatorëŠ” ë¶ˆë‚˜ë¹„ ì•± ë‚´ ì›¹ë·°ë¡œë§Œ ì ‘ê·¼ ê°€ëŠ¥ (ë…ë¦½ ì›¹ ì ‘ê·¼ ì—†ìŒ)
- ê²°ì œëŠ” ë¶ˆë‚˜ë¹„ ì•±ì—ì„œ ì²˜ë¦¬ (í¬íŠ¸ì› ì›¹ë·° ê²°ì œ ë¶ˆí•„ìš”)
- ë¶ˆë‚˜ë¹„ ì½˜í…ì¸  ìƒì„±ê¶Œì— í—¤ì–´ê²Œì´í„° ì „ìš© ìƒí’ˆ ì¶”ê°€ ì˜ˆì •
- í—¤ì–´ê²Œì´í„° í¬ë ˆë”§ì€ ê¸°ì¡´ ì½˜í…ì¸  ìƒì„±ê¶Œê³¼ ë¶„ë¦¬ ê´€ë¦¬

### ë¶ˆë‚˜ë¹„ ê¸°ì¡´ ìƒí’ˆ êµ¬ì¡° (ì½˜í…ì¸  ìƒì„±ê¶Œ)
- ë² ì´ì§ 3íšŒ: 8,000ì›
- ìŠ¤íƒ ë‹¤ë“œ 6íšŒ: 15,000ì›
- ì–´ë“œë°´ìŠ¤ë“œ 12íšŒ: 25,000ì›
- í”„ë¡œ 20íšŒ: 38,000ì›
- ë¹„ì¦ˆë‹ˆìŠ¤ 50íšŒ: 80,000ì›

### í˜„ì¬ í† í° ì‹œìŠ¤í…œ êµ¬ì¡° (2025-12-23 ì—…ë°ì´íŠ¸)
- **ë¶ˆë‚˜ë¹„ DB `_users.tokenBalance`** í•„ë“œì— í—¤ì–´ê²Œì´í„° í† í° ì €ì¥
- `remainCount`ëŠ” ë¶ˆë‚˜ë¹„ ê¸°ì¡´ í¬ë ˆë”§ (ë¶„ë¦¬ë¨)
- bullnabi-proxy.js API ì—”ë“œí¬ì¸íŠ¸:
  - `getTokenBalance`: í† í° ì”ì•¡ ì¡°íšŒ
  - `setTokenBalance`: í† í° ì”ì•¡ ì„¤ì • (ê´€ë¦¬ììš©)
  - `deductTokenBalance`: í† í° ì°¨ê°
- í† í° ë¹„ìš©:
  - ë£©ë¶: 200 í† í°
  - í—¤ì–´ì²´í—˜: 350 í† í°
  - ì±—ë´‡: 10 í† í°

### í† í° ì‚¬ìš© ë¡œê·¸
- Firestore `credit_logs` ì»¬ë ‰ì…˜ì— ì‚¬ìš© ê¸°ë¡ ì €ì¥
- êµ¬ì¡°:
  ```javascript
  {
    userId: "ë¶ˆë‚˜ë¹„_ì‚¬ìš©ì_ID",
    action: "lookbook" | "hairTry" | "chatbot",
    creditsUsed: 200,
    timestamp: Firestore.Timestamp,
    createdAt: "2025-12-23T10:00:00.000Z",
    metadata: {
      userName: "ê¹€ë¯¼ì¬",
      previousBalance: 1000,
      newBalance: 800,
      type: "tokenBalance"
    }
  }
  ```
- ë¹„ë™ê¸° ì €ì¥: ë¡œê·¸ ì‹¤íŒ¨í•´ë„ í† í° ì°¨ê°ì€ ì„±ê³µ ì²˜ë¦¬

### TODO
- ë¶ˆë‚˜ë¹„ ì•±ì—ì„œ userInfoì— tokenBalance í•„ë“œ ì „ë‹¬ í™•ì¸
- ë¶ˆë‚˜ë¹„ ì•±ì— í—¤ì–´ê²Œì´í„° ì „ìš© ìƒí’ˆ ì¶”ê°€
