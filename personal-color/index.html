<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>HAIRGATOR Personal Color</title>

    <!-- MediaPipe CDN -->
    <script crossorigin="anonymous" src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>
    <script crossorigin="anonymous"
        src="https://cdn.jsdelivr.net/npm/@mediapipe/control_utils/control_utils.js"></script>
    <script crossorigin="anonymous"
        src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js"></script>
    <script crossorigin="anonymous"
        src="https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh@0.4.1633559619/face_mesh.js"></script>

    <link rel="stylesheet" href="styles.css">
    <!-- í—¤ì–´ì»¬ëŸ¬ 614ê°œ ë°ì´í„° -->
    <script src="hair-color-data.js"></script>
    <!-- ë‹¤êµ­ì–´ ì‹œìŠ¤í…œ -->
    <script src="../js/i18n.js"></script>
    <style>
        @keyframes flashFade {
            0% { opacity: 1; }
            100% { opacity: 0; }
        }

        /* ì•±ìš© í—¤ë” ìŠ¤íƒ€ì¼ */
        #ai-analysis.active .section-nav,
        #draping-mode.active .section-nav {
            position: sticky !important;
            top: 0 !important;
            z-index: 100 !important;
            background: #ffffff !important;
            margin: 0 -20px 0 -20px !important;
            padding: 70px 20px 25px 20px !important;
            padding-top: calc(70px + env(safe-area-inset-top, 0px)) !important;
            border-radius: 0 !important;
            border-bottom: 2px solid #e0e0e0 !important;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08) !important;
        }

        /* ì•ˆë“œë¡œì´ë“œ ëª¨ë°”ì¼ ìµœì í™” */
        html, body {
            width: 100%;
            max-width: 100%;
            overflow-x: hidden;
        }

        * {
            box-sizing: border-box;
        }

        img {
            max-width: 100%;
            height: auto;
        }

        /* Personal Analysis ëª¨ë‹¬ ë²„íŠ¼ ì„ íƒ ìŠ¤íƒ€ì¼ (ì—¬ì„±: í•‘í¬) */
        .pa-height-btn.selected,
        .pa-current-length-btn.selected,
        .pa-desired-length-btn.selected,
        .pa-fringe-btn.selected,
        .pa-skin-btn.selected,
        .pa-curl-btn.selected {
            border-color: var(--primary-color, #E91E63) !important;
            background: linear-gradient(135deg, rgba(233,30,99,0.1), rgba(194,24,91,0.1)) !important;
            color: var(--primary-color, #E91E63) !important;
        }

        /* ë‚¨ì„± í…Œë§ˆ ì„ íƒ ìŠ¤íƒ€ì¼ (ë¸”ë£¨) */
        body.male-theme .pa-height-btn.selected,
        body.male-theme .pa-current-length-btn.selected,
        body.male-theme .pa-desired-length-btn.selected,
        body.male-theme .pa-fringe-btn.selected,
        body.male-theme .pa-skin-btn.selected,
        body.male-theme .pa-curl-btn.selected {
            border-color: #4A90E2 !important;
            background: linear-gradient(135deg, rgba(74,144,226,0.1), rgba(58,123,200,0.1)) !important;
            color: #4A90E2 !important;
        }

        .pa-step-indicator.active {
            background: var(--primary-color, #E91E63) !important;
            color: #fff !important;
        }

        .pa-step-indicator.completed {
            background: var(--primary-dark, #C2185B) !important;
            color: #fff !important;
        }

        /* ë‚¨ì„± í…Œë§ˆ step indicator */
        body.male-theme .pa-step-indicator.active {
            background: #4A90E2 !important;
        }
        body.male-theme .pa-step-indicator.completed {
            background: #3A7BC8 !important;
        }

        #pa-step-1:not(.active),
        #pa-step-2:not(.active),
        #pa-step-3:not(.active) {
            display: none !important;
        }

        #pa-step-1.active,
        #pa-step-2.active,
        #pa-step-3.active {
            display: block !important;
        }

        /* Step ì œëª© ë°‘ì¤„ */
        .pa-step-title {
            font-size: 15px;
            font-weight: 600;
            color: #333;
            margin-bottom: 20px;
            padding-bottom: 8px;
            border-bottom: 2px solid var(--primary-color, #E91E63);
            display: inline-block;
        }
        body.male-theme .pa-step-title {
            border-bottom-color: #4A90E2;
        }

        /* ë‹¤ìŒ ë²„íŠ¼ */
        .pa-next-btn {
            margin-left: auto;
            padding: 12px 24px;
            background: linear-gradient(135deg, var(--primary-color, #E91E63), var(--primary-dark, #C2185B));
            color: #fff;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
        }
        body.male-theme .pa-next-btn {
            background: linear-gradient(135deg, #4A90E2, #3A7BC8);
        }

        /* ê³ ê° ìš”ì•½ íŒ¨ë„ */
        .pa-summary-panel {
            background: linear-gradient(135deg, #fff5f8, #fff0f5);
            border: 1px solid rgba(233,30,99,0.2);
        }
        body.male-theme .pa-summary-panel {
            background: linear-gradient(135deg, #f0f7ff, #e8f4fd);
            border-color: rgba(74,144,226,0.2);
        }
        .pa-summary-title {
            color: var(--primary-color, #E91E63);
        }
        body.male-theme .pa-summary-title {
            color: #4A90E2;
        }
    </style>
</head>

<body>
    <script>
        // â­ Android í™˜ê²½ ê°ì§€ ìœ í‹¸ë¦¬í‹°
        const DeviceDetection = {
            isAndroid: () => /Android/.test(navigator.userAgent),
            isIOS: () => /iPhone|iPad|iPod/.test(navigator.userAgent),
            isWebView: () => {
                const ua = navigator.userAgent;
                // Android WebView ê°ì§€ (Chromeì´ ì•„ë‹Œ Android)
                if (/Android/.test(ua)) {
                    // wvëŠ” WebView í‘œì‹œ, Chrome ì—†ìœ¼ë©´ WebView
                    if (/wv/.test(ua) || !/Chrome/.test(ua)) return true;
                    // Chrome ë²„ì „ì´ ë§¤ìš° ë‚®ìœ¼ë©´ WebView
                    const chromeMatch = ua.match(/Chrome\/(\d+)/);
                    if (chromeMatch && parseInt(chromeMatch[1]) < 50) return true;
                }
                return false;
            },
            isSamsungBrowser: () => /SamsungBrowser/.test(navigator.userAgent),
            getInfo: () => ({
                isAndroid: DeviceDetection.isAndroid(),
                isIOS: DeviceDetection.isIOS(),
                isWebView: DeviceDetection.isWebView(),
                isSamsungBrowser: DeviceDetection.isSamsungBrowser(),
                userAgent: navigator.userAgent
            })
        };

        // ì´ˆê¸°í™” ì‹œ í™˜ê²½ ì •ë³´ ë¡œê¹…
        console.log('ğŸ“± Device Info:', DeviceDetection.getInfo());

        // URL íŒŒë¼ë¯¸í„°ì—ì„œ ì„±ë³„ ì½ì–´ì„œ í…Œë§ˆ ì ìš©
        (function() {
            const urlParams = new URLSearchParams(window.location.search);
            const gender = urlParams.get('gender');
            if (gender === 'male') {
                document.body.classList.add('male-theme');
            }
        })();
    </script>
    <!-- ==================== Personal Analysis Modal ==================== -->
    <div id="personal-analysis-modal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.6); backdrop-filter: blur(8px); z-index: 10001; display: none; align-items: center; justify-content: center; padding: 16px;">
        <div style="background: #ffffff; border-radius: 20px; width: 100%; max-width: 480px; max-height: 90vh; overflow-y: auto; box-shadow: 0 20px 40px rgba(0,0,0,0.3);">
            <!-- Header -->
            <div style="display: flex; align-items: center; justify-content: space-between; padding: 20px 24px; border-bottom: 1px solid #e0e0e0; position: sticky; top: 0; background: #fff; z-index: 10;">
                <h2 style="font-size: 18px; font-weight: 700; color: #333; margin: 0; display: flex; align-items: center; gap: 8px;">ğŸ“‹ Personal Analysis</h2>
                <button onclick="closePersonalAnalysisModal()" style="width: 36px; height: 36px; border: none; background: #f5f5f5; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; color: #666;">âœ•</button>
            </div>

            <!-- Progress -->
            <div style="display: flex; align-items: center; justify-content: center; padding: 20px; gap: 8px;">
                <div class="pa-step-indicator active" style="width: 32px; height: 32px; border-radius: 50%; background: #E91E63; color: #fff; display: flex; align-items: center; justify-content: center; font-size: 13px; font-weight: 600;">1</div>
                <div style="width: 40px; height: 2px; background: #e0e0e0;"></div>
                <div class="pa-step-indicator" style="width: 32px; height: 32px; border-radius: 50%; background: #f5f5f5; color: #999; display: flex; align-items: center; justify-content: center; font-size: 13px; font-weight: 600;">2</div>
                <div style="width: 40px; height: 2px; background: #e0e0e0;"></div>
                <div class="pa-step-indicator" style="width: 32px; height: 32px; border-radius: 50%; background: #f5f5f5; color: #999; display: flex; align-items: center; justify-content: center; font-size: 13px; font-weight: 600;">3</div>
            </div>

            <!-- Step 1 -->
            <div id="pa-step-1" class="active" style="padding: 0 24px 20px;">
                <div class="pa-step-title">Step 1: ê¸°ë³¸ ì •ë³´</div>
                <p style="font-size: 12px; color: #666; margin: 0 0 16px 0; padding: 10px; background: #f8f9fa; border-radius: 8px; line-height: 1.5;">
                    ğŸ“ <b>í‚¤ì™€ í˜„ì¬ ê¸°ì¥</b>ì„ íŒŒì•…í•˜ì—¬ ì²´í˜•ì— ë§ëŠ” <b>ìµœì  ê¸°ì¥</b>ì„ ì¶”ì²œí•˜ê³ , ì‹œìˆ  ì‹œ <b>ë³€í™”ëŸ‰ê³¼ ë‚œì´ë„</b>ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.
                </p>

                <div style="margin-bottom: 24px;">
                    <label style="display: block; font-size: 13px; font-weight: 600; color: #666; margin-bottom: 8px;">í‚¤ (cm)</label>
                    <div style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 8px;">
                        <button class="pa-height-btn" data-height="150" onclick="paSelectHeight(150)" style="padding: 10px; border: 2px solid #e0e0e0; background: #fff; border-radius: 10px; cursor: pointer; font-weight: 600;">150</button>
                        <button class="pa-height-btn" data-height="155" onclick="paSelectHeight(155)" style="padding: 10px; border: 2px solid #e0e0e0; background: #fff; border-radius: 10px; cursor: pointer; font-weight: 600;">155</button>
                        <button class="pa-height-btn" data-height="160" onclick="paSelectHeight(160)" style="padding: 10px; border: 2px solid #e0e0e0; background: #fff; border-radius: 10px; cursor: pointer; font-weight: 600;">160</button>
                        <button class="pa-height-btn" data-height="165" onclick="paSelectHeight(165)" style="padding: 10px; border: 2px solid #e0e0e0; background: #fff; border-radius: 10px; cursor: pointer; font-weight: 600;">165</button>
                        <button class="pa-height-btn" data-height="170" onclick="paSelectHeight(170)" style="padding: 10px; border: 2px solid #e0e0e0; background: #fff; border-radius: 10px; cursor: pointer; font-weight: 600;">170</button>
                        <button class="pa-height-btn" data-height="175" onclick="paSelectHeight(175)" style="padding: 10px; border: 2px solid #e0e0e0; background: #fff; border-radius: 10px; cursor: pointer; font-weight: 600;">175</button>
                        <button class="pa-height-btn" data-height="180" onclick="paSelectHeight(180)" style="padding: 10px; border: 2px solid #e0e0e0; background: #fff; border-radius: 10px; cursor: pointer; font-weight: 600;">180</button>
                        <button class="pa-height-btn" data-height="185" onclick="paSelectHeight(185)" style="padding: 10px; border: 2px solid #e0e0e0; background: #fff; border-radius: 10px; cursor: pointer; font-weight: 600;">185</button>
                        <button class="pa-height-btn" data-height="190" onclick="paSelectHeight(190)" style="padding: 10px; border: 2px solid #e0e0e0; background: #fff; border-radius: 10px; cursor: pointer; font-weight: 600;">190</button>
                    </div>
                </div>

                <div style="margin-bottom: 24px;">
                    <label style="display: block; font-size: 13px; font-weight: 600; color: #666; margin-bottom: 8px;">í˜„ì¬ ê¸°ì¥</label>
                    <div style="display: flex; gap: 8px;">
                        <button class="pa-current-length-btn" data-length="short" onclick="paSelectCurrentLength('short')" style="flex: 1; padding: 16px; border: 2px solid #e0e0e0; background: #fff; border-radius: 12px; cursor: pointer; text-align: center;">
                            <div style="font-size: 24px; margin-bottom: 4px;">âœ‚ï¸</div>
                            <div style="font-weight: 600;">ìˆ</div>
                        </button>
                        <button class="pa-current-length-btn" data-length="medium" onclick="paSelectCurrentLength('medium')" style="flex: 1; padding: 16px; border: 2px solid #e0e0e0; background: #fff; border-radius: 12px; cursor: pointer; text-align: center;">
                            <div style="font-size: 24px; margin-bottom: 4px;">ğŸ’‡</div>
                            <div style="font-weight: 600;">ë¯¸ë””ì—„</div>
                        </button>
                        <button class="pa-current-length-btn" data-length="long" onclick="paSelectCurrentLength('long')" style="flex: 1; padding: 16px; border: 2px solid #e0e0e0; background: #fff; border-radius: 12px; cursor: pointer; text-align: center;">
                            <div style="font-size: 24px; margin-bottom: 4px;">ğŸ‘©</div>
                            <div style="font-weight: 600;">ë¡±</div>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Step 2 -->
            <div id="pa-step-2" style="display: none; padding: 0 24px 20px;">
                <div class="pa-step-title">Step 2: ì›í•˜ëŠ” ìŠ¤íƒ€ì¼</div>
                <p style="font-size: 12px; color: #666; margin: 0 0 16px 0; padding: 10px; background: #f8f9fa; border-radius: 8px; line-height: 1.5;">
                    âœ‚ï¸ <b>í¬ë§ ê¸°ì¥ê³¼ ì•ë¨¸ë¦¬</b>ë¥¼ ì„ íƒí•˜ë©´ ê³ ê° ì²´í˜•ê³¼ì˜ <b>ì í•©ë„</b>ë¥¼ ë¶„ì„í•˜ê³ , AI ë¶„ì„ ê²°ê³¼ì™€ í•¨ê»˜ <b>ë§ì¶¤ ìŠ¤íƒ€ì¼</b>ì„ ì œì•ˆí•©ë‹ˆë‹¤.
                </p>

                <div style="margin-bottom: 24px;">
                    <label style="display: block; font-size: 13px; font-weight: 600; color: #666; margin-bottom: 8px;">ì›í•˜ëŠ” ê¸°ì¥</label>
                    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px;">
                        <button class="pa-desired-length-btn" data-length="H" onclick="paSelectDesiredLength('H')" style="padding: 12px 8px; border: 2px solid #e0e0e0; background: #fff; border-radius: 10px; cursor: pointer; text-align: center;">
                            <div style="font-size: 18px; font-weight: 700;">H</div>
                            <div style="font-size: 11px; color: #999;">ìˆ</div>
                        </button>
                        <button class="pa-desired-length-btn" data-length="G" onclick="paSelectDesiredLength('G')" style="padding: 12px 8px; border: 2px solid #e0e0e0; background: #fff; border-radius: 10px; cursor: pointer; text-align: center;">
                            <div style="font-size: 18px; font-weight: 700;">G</div>
                            <div style="font-size: 11px; color: #999;">í„±ì„  ìœ„</div>
                        </button>
                        <button class="pa-desired-length-btn" data-length="F" onclick="paSelectDesiredLength('F')" style="padding: 12px 8px; border: 2px solid #e0e0e0; background: #fff; border-radius: 10px; cursor: pointer; text-align: center;">
                            <div style="font-size: 18px; font-weight: 700;">F</div>
                            <div style="font-size: 11px; color: #999;">í„±ì„  ì•„ë˜</div>
                        </button>
                        <button class="pa-desired-length-btn" data-length="E" onclick="paSelectDesiredLength('E')" style="padding: 12px 8px; border: 2px solid #e0e0e0; background: #fff; border-radius: 10px; cursor: pointer; text-align: center;">
                            <div style="font-size: 18px; font-weight: 700;">E</div>
                            <div style="font-size: 11px; color: #999;">ì–´ê¹¨ ìœ„</div>
                        </button>
                        <button class="pa-desired-length-btn" data-length="D" onclick="paSelectDesiredLength('D')" style="padding: 12px 8px; border: 2px solid #e0e0e0; background: #fff; border-radius: 10px; cursor: pointer; text-align: center;">
                            <div style="font-size: 18px; font-weight: 700;">D</div>
                            <div style="font-size: 11px; color: #999;">ì–´ê¹¨ì„ </div>
                        </button>
                        <button class="pa-desired-length-btn" data-length="C" onclick="paSelectDesiredLength('C')" style="padding: 12px 8px; border: 2px solid #e0e0e0; background: #fff; border-radius: 10px; cursor: pointer; text-align: center;">
                            <div style="font-size: 18px; font-weight: 700;">C</div>
                            <div style="font-size: 11px; color: #999;">ì‡„ê³¨ ì•„ë˜</div>
                        </button>
                        <button class="pa-desired-length-btn" data-length="B" onclick="paSelectDesiredLength('B')" style="padding: 12px 8px; border: 2px solid #e0e0e0; background: #fff; border-radius: 10px; cursor: pointer; text-align: center;">
                            <div style="font-size: 18px; font-weight: 700;">B</div>
                            <div style="font-size: 11px; color: #999;">ê°€ìŠ´</div>
                        </button>
                        <button class="pa-desired-length-btn" data-length="A" onclick="paSelectDesiredLength('A')" style="padding: 12px 8px; border: 2px solid #e0e0e0; background: #fff; border-radius: 10px; cursor: pointer; text-align: center;">
                            <div style="font-size: 18px; font-weight: 700;">A</div>
                            <div style="font-size: 11px; color: #999;">í—ˆë¦¬</div>
                        </button>
                    </div>
                </div>

                <div style="margin-bottom: 24px;">
                    <label style="display: block; font-size: 13px; font-weight: 600; color: #666; margin-bottom: 12px;">ì•ë¨¸ë¦¬ ì„ í˜¸</label>
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px;">
                        <button class="pa-fringe-btn" data-fringe="forehead" onclick="paSelectFringe('forehead')" style="padding: 12px; border: 2px solid #e0e0e0; background: #fff; border-radius: 10px; cursor: pointer; font-weight: 600;">ì´ë§ˆì„ </button>
                        <button class="pa-fringe-btn" data-fringe="eyebrow" onclick="paSelectFringe('eyebrow')" style="padding: 12px; border: 2px solid #e0e0e0; background: #fff; border-radius: 10px; cursor: pointer; font-weight: 600;">ëˆˆì¹ì„ </button>
                        <button class="pa-fringe-btn" data-fringe="eye" onclick="paSelectFringe('eye')" style="padding: 12px; border: 2px solid #e0e0e0; background: #fff; border-radius: 10px; cursor: pointer; font-weight: 600;">ëˆˆì„ </button>
                        <button class="pa-fringe-btn" data-fringe="cheekbone" onclick="paSelectFringe('cheekbone')" style="padding: 12px; border: 2px solid #e0e0e0; background: #fff; border-radius: 10px; cursor: pointer; font-weight: 600;">ê´‘ëŒ€ì„ </button>
                        <button class="pa-fringe-btn" data-fringe="lips" onclick="paSelectFringe('lips')" style="padding: 12px; border: 2px solid #e0e0e0; background: #fff; border-radius: 10px; cursor: pointer; font-weight: 600;">ì…ìˆ ì„ </button>
                        <button class="pa-fringe-btn" data-fringe="none" onclick="paSelectFringe('none')" style="padding: 12px; border: 2px solid #e0e0e0; background: #fff; border-radius: 10px; cursor: pointer; font-weight: 600;">ì—†ìŒ</button>
                    </div>
                </div>
            </div>

            <!-- Step 3 -->
            <div id="pa-step-3" style="display: none; padding: 0 24px 20px;">
                <div class="pa-step-title">Step 3: í”¼ë¶€ & ì»¬ ì„ í˜¸</div>
                <p style="font-size: 12px; color: #666; margin: 0 0 16px 0; padding: 10px; background: #f8f9fa; border-radius: 8px; line-height: 1.5;">
                    ğŸ¨ <b>í”¼ë¶€ íƒ€ì…ê³¼ ì»¬ ì„ í˜¸ë„</b>ëŠ” AI í¼ìŠ¤ë„ì»¬ëŸ¬ ë¶„ì„ê³¼ ë¹„êµí•˜ì—¬ <b>í†¤ ë§¤ì¹­ ì •í™•ë„</b>ë¥¼ ë†’ì´ê³ , <b>í—¤ì–´ì»¬ëŸ¬ ì¶”ì²œ</b>ì— ë°˜ì˜ë©ë‹ˆë‹¤.
                </p>

                <div style="margin-bottom: 24px;">
                    <label style="display: block; font-size: 13px; font-weight: 600; color: #666; margin-bottom: 12px;">í”¼ë¶€ íƒ€ì…</label>
                    <div style="display: flex; flex-direction: column; gap: 10px;">
                        <button class="pa-skin-btn" data-skin="TP" onclick="paSelectSkinType('TP')" style="padding: 14px 16px; border: 2px solid #e0e0e0; background: #fff; border-radius: 12px; cursor: pointer; text-align: left;">
                            <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 6px;">
                                <span style="font-size: 16px; font-weight: 700; color: #5C6BC0;">TP</span>
                                <span style="font-size: 13px; font-weight: 600; color: #333;">íˆ¬ëª… í”¼ë¶€ (COOL)</span>
                            </div>
                            <div style="font-size: 11px; color: #888; line-height: 1.4; padding-left: 2px;">
                                í˜ˆê´€ì´ ë¹„ì¹˜ëŠ” ì–‡ì€ í”¼ë¶€ Â· í•‘í¬/ë¸”ë£¨ ì–¸ë”í†¤ Â· ì—¬ë¦„/ê²¨ìš¸ íƒ€ì…ì— í•´ë‹¹
                            </div>
                        </button>
                        <button class="pa-skin-btn" data-skin="NP" onclick="paSelectSkinType('NP')" style="padding: 14px 16px; border: 2px solid #e0e0e0; background: #fff; border-radius: 12px; cursor: pointer; text-align: left;">
                            <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 6px;">
                                <span style="font-size: 16px; font-weight: 700; color: #78909C;">NP</span>
                                <span style="font-size: 13px; font-weight: 600; color: #333;">ì¤‘ì„± í”¼ë¶€ (NEUTRAL)</span>
                            </div>
                            <div style="font-size: 11px; color: #888; line-height: 1.4; padding-left: 2px;">
                                ì›œ/ì¿¨ êµ¬ë¶„ì´ ëª¨í˜¸í•œ í”¼ë¶€ Â· ì˜¬ë¦¬ë¸Œ/ë² ì´ì§€ í†¤ Â· ë‹¤ì–‘í•œ ì»¬ëŸ¬ ì†Œí™” ê°€ëŠ¥
                            </div>
                        </button>
                        <button class="pa-skin-btn" data-skin="BP" onclick="paSelectSkinType('BP')" style="padding: 14px 16px; border: 2px solid #e0e0e0; background: #fff; border-radius: 12px; cursor: pointer; text-align: left;">
                            <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 6px;">
                                <span style="font-size: 16px; font-weight: 700; color: #FF8A65;">BP</span>
                                <span style="font-size: 13px; font-weight: 600; color: #333;">ë² ì´ìŠ¤ í”¼ë¶€ (WARM)</span>
                            </div>
                            <div style="font-size: 11px; color: #888; line-height: 1.4; padding-left: 2px;">
                                í™©ìƒ‰/ê³¨ë“œ ì–¸ë”í†¤ Â· ë‘êº¼ìš´ í”¼ë¶€ê²° Â· ë´„/ê°€ì„ íƒ€ì…ì— í•´ë‹¹
                            </div>
                        </button>
                    </div>
                </div>

                <div style="margin-bottom: 24px;">
                    <label style="display: block; font-size: 13px; font-weight: 600; color: #666; margin-bottom: 12px;">ì»¬ ì„ í˜¸</label>
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px;">
                        <button class="pa-curl-btn" data-curl="straight" onclick="paSelectCurl('straight')" style="padding: 12px; border: 2px solid #e0e0e0; background: #fff; border-radius: 10px; cursor: pointer; font-weight: 600;">ìŠ¤íŠ¸ë ˆì´íŠ¸</button>
                        <button class="pa-curl-btn" data-curl="C" onclick="paSelectCurl('C')" style="padding: 12px; border: 2px solid #e0e0e0; background: #fff; border-radius: 10px; cursor: pointer; font-weight: 600;">Cì»¬</button>
                        <button class="pa-curl-btn" data-curl="S" onclick="paSelectCurl('S')" style="padding: 12px; border: 2px solid #e0e0e0; background: #fff; border-radius: 10px; cursor: pointer; font-weight: 600;">Sì»¬</button>
                        <button class="pa-curl-btn" data-curl="CS" onclick="paSelectCurl('CS')" style="padding: 12px; border: 2px solid #e0e0e0; background: #fff; border-radius: 10px; cursor: pointer; font-weight: 600;">C+Sì»¬</button>
                        <button class="pa-curl-btn" data-curl="SS" onclick="paSelectCurl('SS')" style="padding: 12px; border: 2px solid #e0e0e0; background: #fff; border-radius: 10px; cursor: pointer; font-weight: 600;">SSì»¬</button>
                        <button class="pa-curl-btn" data-curl="none" onclick="paSelectCurl('none')" style="padding: 12px; border: 2px solid #e0e0e0; background: #fff; border-radius: 10px; cursor: pointer; font-weight: 600;">ì„ í˜¸ ì—†ìŒ</button>
                    </div>
                </div>
            </div>

            <!-- Navigation -->
            <div style="display: flex; justify-content: space-between; padding: 16px 24px; border-top: 1px solid #e0e0e0; background: #f9f9f9;">
                <button id="pa-prev-btn" onclick="paPrevStep()" style="display: none; padding: 12px 20px; background: #fff; border: 1px solid #e0e0e0; border-radius: 10px; cursor: pointer; font-weight: 600; color: #666;">â† ì´ì „</button>
                <button id="pa-next-btn" class="pa-next-btn" onclick="paNextStep()">ë‹¤ìŒ â†’</button>
                <button id="pa-submit-btn" onclick="paSubmitAnalysis()" style="display: none; margin-left: auto; padding: 12px 24px; background: #10b981; color: #fff; border: none; border-radius: 10px; cursor: pointer; font-weight: 600;">ë¶„ì„ ì™„ë£Œ âœ“</button>
            </div>
        </div>
    </div>

    <!-- ë¡œë”© í™”ë©´ -->
    <div class="loading-screen" id="loading-screen">
        <div class="loading-content">
            <img src="/ë¡œê³ .png" alt="HAIRGATOR" class="loading-logo">
            <h2 class="loading-title">HAIRGATOR</h2>
            <p class="loading-text" id="loading-text">ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì¤‘...</p>
            <div class="loading-progress">
                <div class="loading-bar" id="loading-bar"></div>
            </div>
        </div>
    </div>

    <!-- ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ -->
    <div class="main-app" id="main-app">
        <!-- ë‹«ê¸° ë²„íŠ¼ë§Œ (í—¤ë” ì œê±°) -->
        <button class="close-btn-floating" onclick="closePersonalColor()" title="Close">Close</button>

        <main class="main-content">
            <!-- ëª¨ë“œ ì„ íƒ ì„¹ì…˜ -->
            <section class="section active" id="mode-selection">
                <div class="mode-cards">
                    <!-- AI ë¶„ì„ ì¹´ë“œ -->
                    <div class="mode-card mode-card-image" onclick="selectMode('ai')">
                        <div class="mode-card-img-wrapper">
                            <img src="images/ai-analysis.jpeg" alt="AI Personal Color Analysis" class="mode-card-img">
                        </div>
                        <div class="mode-description-bubble" data-i18n="personalColor.aiMode.description">
                            ì‹¤ì‹œê°„ ì¹´ë©”ë¼ë¡œ AIê°€ í”¼ë¶€í†¤ì„ ë¶„ì„í•©ë‹ˆë‹¤. ì •í™•í•œ ì§„ë‹¨ì„ ìœ„í•´ í™”ì¥ê¸° ì—†ëŠ” ë§¨ì–¼êµ´ë¡œ, ìì—°ê´‘ì—ì„œ ì´¬ì˜í•´ì£¼ì„¸ìš”.
                        </div>
                        <button class="mode-btn" data-i18n="personalColor.aiMode.startBtn">AI ë¶„ì„ ì‹œì‘</button>
                    </div>

                    <!-- ë“œë˜ì´í•‘ ì¹´ë“œ -->
                    <div class="mode-card mode-card-image" onclick="selectMode('draping')">
                        <div class="mode-card-img-wrapper">
                            <img src="images/draping.jpeg" alt="Expert Draping" class="mode-card-img">
                        </div>
                        <div class="mode-description-bubble" data-i18n="personalColor.drapingMode.description">
                            ë´„, ì—¬ë¦„, ê°€ì„, ê²¨ìš¸ 4ê³„ì ˆ ì»¬ëŸ¬ë¥¼ ì–¼êµ´ì— ëŒ€ë³´ë©° ê°€ì¥ ì˜ ì–´ìš¸ë¦¬ëŠ” ìƒ‰ìƒì„ ì§ì ‘ ì°¾ì•„ë³´ì„¸ìš”.
                        </div>
                        <button class="mode-btn" data-i18n="personalColor.drapingMode.startBtn">ë“œë˜ì´í•‘ ì‹œì‘</button>
                    </div>
                </div>
            </section>

            <!-- AI ë¶„ì„ ëª¨ë“œ -->
            <section class="section" id="ai-analysis">
                <div class="section-nav">
                    <button class="nav-btn" onclick="goHome()" data-i18n="personalColor.aiMode.backHome">â† í™ˆìœ¼ë¡œ</button>
                    <h2 class="section-title" data-i18n="personalColor.aiMode.title">AI í¼ìŠ¤ë„ì»¬ëŸ¬ ë¶„ì„</h2>
                </div>

                <div class="analysis-grid">
                    <!-- ===== ì™¼ìª½: ì¹´ë©”ë¼ + AI ë¶„ì„ ì§„í–‰ìƒí™© ===== -->
                    <div class="camera-wrapper">
                        <div class="camera-container" id="camera-container">
                            <div class="video-container">
                                <video id="camera-feed" autoplay muted playsinline style="display:none;"></video>
                                <canvas id="camera-canvas" style="width: 100%; max-width: 640px; border-radius: 8px;"></canvas>
                                <div class="face-guide" id="ai-face-guide" data-i18n-html="personalColor.aiMode.faceGuide">
                                    ì–¼êµ´ì„ í™”ë©´ ì¤‘ì•™ì—<br>ìœ„ì¹˜ì‹œì¼œì£¼ì„¸ìš”
                                </div>
                            </div>
                            <div class="camera-controls">
                                <button class="control-btn" id="start-camera" onclick="startAICamera()" data-i18n="personalColor.aiMode.startCamera">ğŸ“¹ ì¹´ë©”ë¼ ì‹œì‘</button>
                                <button class="control-btn" id="capture-btn" onclick="captureAndAnalyze()" style="display: none; background: linear-gradient(135deg, #FF6B6B, #FF8E53);" data-i18n="personalColor.aiMode.capture">ğŸ“¸ ì´¬ì˜í•˜ê¸°</button>
                                <button class="control-btn" id="retry-btn" onclick="retryCapture()" style="display: none; background: linear-gradient(135deg, #6B7FFF, #53A8FF);" data-i18n="personalColor.aiMode.retry">ğŸ”„ ë‹¤ì‹œ ì´¬ì˜</button>
                            </div>

                            <!-- ì´¬ì˜ ì•ˆë‚´ ë©”ì‹œì§€ -->
                            <div id="capture-guide" style="display: none; margin-top: 15px; padding: 12px; background: rgba(255,180,0,0.15); border: 1px solid rgba(255,180,0,0.3); border-radius: 8px; text-align: center;">
                                <span style="color: #FFB400; font-size: 14px;" data-i18n-html="personalColor.aiMode.captureGuide">âœ¨ ì–¼êµ´ì´ ì¸ì‹ë˜ì—ˆìŠµë‹ˆë‹¤! <b>ì´¬ì˜í•˜ê¸°</b> ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”</span>
                            </div>

                            <!-- AI ë¶„ì„ ì§„í–‰ìƒí™© (ì¶•ì†Œ ë²„ì „) -->
                            <div class="analysis-steps-compact" style="margin-top: 15px; padding: 12px; background: #f8f9fa; border-radius: 10px; border: 1px solid #e0e0e0;">
                                <div style="font-size: 13px; color: #666; margin-bottom: 10px;">ğŸ“Š AI ë¶„ì„ ì§„í–‰ìƒí™©</div>
                                <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px;">
                                    <div class="step-compact" id="ai-step-1" style="text-align: center; padding: 8px; background: #ffffff; border-radius: 8px; border: 1px solid #e0e0e0;">
                                        <div style="width: 24px; height: 24px; background: linear-gradient(135deg, var(--primary-color), var(--primary-dark)); border-radius: 50%; margin: 0 auto 4px; display: flex; align-items: center; justify-content: center; font-size: 12px; color: #fff;">1</div>
                                        <div style="font-size: 10px; color: #666;">ì–¼êµ´ ì¸ì‹</div>
                                    </div>
                                    <div class="step-compact" id="ai-step-2" style="text-align: center; padding: 8px; background: #ffffff; border-radius: 8px; border: 1px solid #e0e0e0;">
                                        <div style="width: 24px; height: 24px; background: linear-gradient(135deg, var(--primary-color), var(--primary-dark)); border-radius: 50%; margin: 0 auto 4px; display: flex; align-items: center; justify-content: center; font-size: 12px; color: #fff;">2</div>
                                        <div style="font-size: 10px; color: #666;">í”¼ë¶€í†¤</div>
                                    </div>
                                    <div class="step-compact" id="ai-step-3" style="text-align: center; padding: 8px; background: #ffffff; border-radius: 8px; border: 1px solid #e0e0e0;">
                                        <div style="width: 24px; height: 24px; background: linear-gradient(135deg, var(--primary-color), var(--primary-dark)); border-radius: 50%; margin: 0 auto 4px; display: flex; align-items: center; justify-content: center; font-size: 12px; color: #fff;">3</div>
                                        <div style="font-size: 10px; color: #666;">ìƒ‰ì°¨ ê³„ì‚°</div>
                                    </div>
                                    <div class="step-compact" id="ai-step-4" style="text-align: center; padding: 8px; background: #ffffff; border-radius: 8px; border: 1px solid #e0e0e0;">
                                        <div style="width: 24px; height: 24px; background: linear-gradient(135deg, var(--primary-color), var(--primary-dark)); border-radius: 50%; margin: 0 auto 4px; display: flex; align-items: center; justify-content: center; font-size: 12px; color: #fff;">4</div>
                                        <div style="font-size: 10px; color: #666;">ê²°ê³¼ ìƒì„±</div>
                                    </div>
                                </div>
                            </div>

                            <!-- ===== ê³ ê° ì •ë³´ ìš”ì•½ (ìˆ˜ë™ì…ë ¥ + AI ë¶„ì„) ===== -->
                            <div id="customer-summary-panel" class="pa-summary-panel" style="display: none; margin-top: 15px; padding: 15px; border-radius: 12px;">
                                <div class="pa-summary-title" style="font-size: 14px; font-weight: 600; margin-bottom: 12px; display: flex; align-items: center; gap: 6px;">
                                    <span>ğŸ“‹</span> ê³ ê° ë¶„ì„ ìš”ì•½
                                </div>
                                <div id="customer-summary-content" style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; font-size: 12px;">
                                    <!-- JSì—ì„œ ë™ì  ìƒì„± -->
                                </div>
                            </div>
                        </div>
                        <!-- ì»¤ìŠ¤í…€ ìŠ¤í¬ë¡¤ë°” (íƒœë¸”ë¦¿ìš©) -->
                        <div class="custom-scrollbar" id="custom-scrollbar">
                            <div class="scrollbar-thumb" id="scrollbar-thumb"></div>
                        </div>
                    </div>

                    <!-- ===== ì˜¤ë¥¸ìª½: ë¶„ì„ ê²°ê³¼ íŒ¨ë„ (í—¤ì–´ì¶”ì²œ + ì „ë¬¸ê°€ê°€ì´ë“œ + ë²„íŠ¼) ===== -->
                    <div class="analysis-panel">
                        <!-- ë¶„ì„ ì „ ì•ˆë‚´ -->
                        <div id="analysis-panel-guide" style="text-align: center; padding: 40px 20px;">
                            <div style="font-size: 48px; margin-bottom: 15px;">ğŸ“¸</div>
                            <h3 style="color: #333; margin-bottom: 10px;">ì‚¬ì§„ì„ ì´¬ì˜í•´ì£¼ì„¸ìš”</h3>
                            <p style="color: #666; font-size: 14px; line-height: 1.6;">
                                ì™¼ìª½ì—ì„œ ì¹´ë©”ë¼ë¥¼ ì‹œì‘í•˜ê³ <br>
                                ì–¼êµ´ì„ ì´¬ì˜í•˜ë©´ AIê°€ ë¶„ì„í•©ë‹ˆë‹¤
                            </p>
                        </div>

                        <!-- Personal Analysis ê²°ê³¼ í‘œì‹œ ì˜ì—­ -->
                        <div id="pa-result-container" style="display: none; padding: 15px; border-bottom: 1px solid #e0e0e0;">
                            <!-- JSì—ì„œ ë™ì  ìƒì„± -->
                        </div>

                        <!-- ë¶„ì„ ê²°ê³¼ (ì´¬ì˜ í›„ í‘œì‹œ) -->
                        <div id="realtime-results-wrapper" style="display: none;">
                            <div id="realtime-results-container" style="padding: 15px;">
                                <!-- JSì—ì„œ ë™ì  ìƒì„± -->
                            </div>
                        </div>

                        <!-- ìˆ¨ê²¨ì§„ ê¸°ì¡´ ê²°ê³¼ ìš”ì†Œ (JS í˜¸í™˜ìš©) -->
                        <div style="display: none;">
                            <div class="analysis-results" id="ai-analysis-results">
                                <div class="result-summary">
                                    <div class="season-result" id="ai-season-result">Analyzing...</div>
                                    <div class="confidence-score" id="ai-confidence">-</div>
                                </div>
                                <div class="color-analysis-data" id="ai-analysis-data"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ë“œë˜ì´í•‘ ëª¨ë“œ -->
            <section class="section" id="draping-mode">
                <div class="section-nav">
                    <button class="nav-btn" onclick="goHome()" data-i18n="personalColor.aiMode.backHome">â† Home</button>
                    <h2 class="section-title" data-i18n="personalColor.drapingMode.title">Expert Draping Mode</h2>
                    <button class="nav-btn guide-btn" onclick="openDrapingGuide()" style="margin-left: auto;">GUIDE</button>
                </div>

                <!-- ë“œë˜ì´í•‘ ê°€ì´ë“œ ëª¨ë‹¬ -->
                <div id="draping-guide-modal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.85); z-index: 10000; overflow-y: auto; padding: 20px;">
                    <div style="max-width: 600px; margin: 0 auto; background: #1a1a1a; border-radius: 16px; padding: 24px; border: 1px solid rgba(255,255,255,0.1);">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h2 style="color: #ffffff; font-size: 20px; margin: 0; font-weight: 600;" data-i18n="personalColor.drapingGuide.title">4ê³„ì ˆ ë“œë˜ì´í•‘ ì§„ë‹¨ ê°€ì´ë“œ</h2>
                            <button onclick="closeDrapingGuide()" style="background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); color: white; padding: 8px 16px; border-radius: 8px; cursor: pointer; font-size: 14px;">âœ•</button>
                        </div>

                        <!-- ë“œë˜ì´í•‘ ì›ë¦¬ -->
                        <div style="background: rgba(255,255,255,0.05); padding: 16px; border-radius: 12px; margin-bottom: 16px; border: 1px solid rgba(255,255,255,0.08);">
                            <h3 style="color: #e0e0e0; font-size: 15px; margin: 0 0 10px 0; font-weight: 600;" data-i18n="personalColor.drapingGuide.principleTitle">ë“œë˜ì´í•‘ì˜ ì›ë¦¬</h3>
                            <p style="color: #b0b0b0; font-size: 14px; line-height: 1.7; margin: 0;" data-i18n="personalColor.drapingGuide.principleText">íŠ¹ì • ìƒ‰ìƒì˜ ì²œì„ ì–¼êµ´ ë°‘ì— ëŒ”ì„ ë•Œ, ê·¸ ìƒ‰ì´ ì–¼êµ´ì— ë°˜ì‚¬ë˜ë©´ì„œ ì•ˆìƒ‰, ë‹¤í¬ì„œí´, ì£¼ë¦„, ì¡í‹° ë“±ì´ ì–´ë–»ê²Œ ë³€í•˜ëŠ”ì§€ë¥¼ ê´€ì°°í•˜ì—¬ ë² ìŠ¤íŠ¸(Best)ì™€ ì›ŒìŠ¤íŠ¸(Worst)ë¥¼ ê°€ë ¤ë‚´ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.</p>
                        </div>

                        <!-- ë´„ ì›œí†¤ -->
                        <div style="background: rgba(255,255,255,0.03); padding: 16px; border-radius: 12px; margin-bottom: 12px; border: 1px solid rgba(255,255,255,0.08);">
                            <h3 style="color: #ffffff; font-size: 16px; margin: 0 0 10px 0; font-weight: 600;" data-i18n="personalColor.drapingGuide.spring.title">ë´„ ì›œí†¤ (Spring Warm)</h3>
                            <p style="color: #a0a0a0; font-size: 13px; margin: 0 0 8px 0;"><span style="color: #d0d0d0;">ì´ë¯¸ì§€:</span> <span data-i18n="personalColor.drapingGuide.spring.image">ë°ê³  ë”°ëœ»í•œ ë…¸ë€ ê¸°ìš´</span></p>
                            <p style="color: #a0a0a0; font-size: 13px; margin: 0 0 12px 0;"><span style="color: #d0d0d0;">ì†ì„±:</span> <span data-i18n="personalColor.drapingGuide.spring.attribute">ê³ ëª…ë„ + ì¤‘~ê³ ì±„ë„ + ì›œ(í™©ìƒ‰)</span></p>
                            <p style="color: #a0a0a0; font-size: 13px; margin: 0 0 6px 0;"><span style="color: #70c070;">âœ“ Best:</span> <span data-i18n="personalColor.drapingGuide.spring.best">ì½”ë„, í”¼ì¹˜, ì•„ì´ë³´ë¦¬, ë°ì€ ì˜¤ë Œì§€</span></p>
                            <p style="color: #a0a0a0; font-size: 13px; margin: 0;"><span style="color: #c07070;">âœ— Worst:</span> <span data-i18n="personalColor.drapingGuide.spring.worst">íšŒìƒ‰ë¹› í•‘í¬, ë²„ê±´ë””, ë„¤ì´ë¹„</span></p>
                        </div>

                        <!-- ì—¬ë¦„ ì¿¨í†¤ -->
                        <div style="background: rgba(255,255,255,0.03); padding: 16px; border-radius: 12px; margin-bottom: 12px; border: 1px solid rgba(255,255,255,0.08);">
                            <h3 style="color: #ffffff; font-size: 16px; margin: 0 0 10px 0; font-weight: 600;" data-i18n="personalColor.drapingGuide.summer.title">ì—¬ë¦„ ì¿¨í†¤ (Summer Cool)</h3>
                            <p style="color: #a0a0a0; font-size: 13px; margin: 0 0 8px 0;"><span style="color: #d0d0d0;">ì´ë¯¸ì§€:</span> <span data-i18n="personalColor.drapingGuide.summer.image">ë¶€ë“œëŸ½ê³  ì‹œì›í•œ íšŒìƒ‰/í•‘í¬ ê¸°ìš´</span></p>
                            <p style="color: #a0a0a0; font-size: 13px; margin: 0 0 12px 0;"><span style="color: #d0d0d0;">ì†ì„±:</span> <span data-i18n="personalColor.drapingGuide.summer.attribute">ì¤‘ëª…ë„ + ì €~ì¤‘ì±„ë„ + ì¿¨(íšŒì²­)</span></p>
                            <p style="color: #a0a0a0; font-size: 13px; margin: 0 0 6px 0;"><span style="color: #70c070;">âœ“ Best:</span> <span data-i18n="personalColor.drapingGuide.summer.best">ë¼ë²¤ë”, ë¡œì¦ˆí•‘í¬, ìŠ¤ì¹´ì´ë¸”ë£¨, ì†Œí”„íŠ¸ í™”ì´íŠ¸</span></p>
                            <p style="color: #a0a0a0; font-size: 13px; margin: 0;"><span style="color: #c07070;">âœ— Worst:</span> <span data-i18n="personalColor.drapingGuide.summer.worst">ì˜¤ë Œì§€, ì¹´í‚¤, ë¨¸ìŠ¤íƒ€ë“œ</span></p>
                        </div>

                        <!-- ê°€ì„ ì›œí†¤ -->
                        <div style="background: rgba(255,255,255,0.03); padding: 16px; border-radius: 12px; margin-bottom: 12px; border: 1px solid rgba(255,255,255,0.08);">
                            <h3 style="color: #ffffff; font-size: 16px; margin: 0 0 10px 0; font-weight: 600;" data-i18n="personalColor.drapingGuide.autumn.title">ê°€ì„ ì›œí†¤ (Autumn Warm)</h3>
                            <p style="color: #a0a0a0; font-size: 13px; margin: 0 0 8px 0;"><span style="color: #d0d0d0;">ì´ë¯¸ì§€:</span> <span data-i18n="personalColor.drapingGuide.autumn.image">ê¹Šê³  í’ë¶€í•œ í™©ê°ˆìƒ‰ ê¸°ìš´</span></p>
                            <p style="color: #a0a0a0; font-size: 13px; margin: 0 0 12px 0;"><span style="color: #d0d0d0;">ì†ì„±:</span> <span data-i18n="personalColor.drapingGuide.autumn.attribute">ì €~ì¤‘ëª…ë„ + ì €~ì¤‘ì±„ë„ + ì›œ(í™©ê¸ˆ)</span></p>
                            <p style="color: #a0a0a0; font-size: 13px; margin: 0 0 6px 0;"><span style="color: #70c070;">âœ“ Best:</span> <span data-i18n="personalColor.drapingGuide.autumn.best">ì¹´í‚¤, í…Œë¼ì½”íƒ€, ë¨¸ìŠ¤íƒ€ë“œ, ì˜¬ë¦¬ë¸Œ</span></p>
                            <p style="color: #a0a0a0; font-size: 13px; margin: 0;"><span style="color: #c07070;">âœ— Worst:</span> <span data-i18n="personalColor.drapingGuide.autumn.worst">ì—°í•‘í¬, íŒŒìŠ¤í…” ë¸”ë£¨, ë¹„ë¹„ë“œ ë ˆë“œ</span></p>
                        </div>

                        <!-- ê²¨ìš¸ ì¿¨í†¤ -->
                        <div style="background: rgba(255,255,255,0.03); padding: 16px; border-radius: 12px; margin-bottom: 16px; border: 1px solid rgba(255,255,255,0.08);">
                            <h3 style="color: #ffffff; font-size: 16px; margin: 0 0 10px 0; font-weight: 600;" data-i18n="personalColor.drapingGuide.winter.title">ê²¨ìš¸ ì¿¨í†¤ (Winter Cool)</h3>
                            <p style="color: #a0a0a0; font-size: 13px; margin: 0 0 8px 0;"><span style="color: #d0d0d0;">ì´ë¯¸ì§€:</span> <span data-i18n="personalColor.drapingGuide.winter.image">ì„ ëª…í•˜ê³  ì°¨ê°€ìš´ ì²­ììƒ‰ ê¸°ìš´</span></p>
                            <p style="color: #a0a0a0; font-size: 13px; margin: 0 0 12px 0;"><span style="color: #d0d0d0;">ì†ì„±:</span> <span data-i18n="personalColor.drapingGuide.winter.attribute">ê·¹ì €/ê·¹ê³ ëª…ë„ + ê³ ì±„ë„ + ì¿¨(ì²­ì)</span></p>
                            <p style="color: #a0a0a0; font-size: 13px; margin: 0 0 6px 0;"><span style="color: #70c070;">âœ“ Best:</span> <span data-i18n="personalColor.drapingGuide.winter.best">ìˆœë°±, ë¸”ë™, ë¡œì—´ë¸”ë£¨, ë²„ê±´ë””, í•«í•‘í¬</span></p>
                            <p style="color: #a0a0a0; font-size: 13px; margin: 0;"><span style="color: #c07070;">âœ— Worst:</span> <span data-i18n="personalColor.drapingGuide.winter.worst">ë² ì´ì§€, ì˜¤ë Œì§€, ì—°í•œ ì¹´í‚¤</span></p>
                        </div>

                        <button onclick="closeDrapingGuide()" style="width: 100%; padding: 14px; border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; background: rgba(255,255,255,0.1); color: white; font-size: 15px; font-weight: 600; cursor: pointer;" data-i18n="personalColor.drapingGuide.closeBtn">ë‹«ê¸°</button>
                    </div>
                </div>

                <div class="draping-layout">
                    <!-- ë“œë˜ì´í•‘ ì¹´ë©”ë¼ -->
                    <div class="draping-camera-section">
                        <div class="video-container">
                            <video id="draping-camera" autoplay muted playsinline webkit-playsinline="true" style="display:none;"></video>
                            <canvas id="draping-canvas" style="width: 100%; max-width: 640px; border-radius: 8px; transform: scaleX(-1);"></canvas>
                            <canvas id="draping-overlay" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none;"></canvas>
                            <div class="face-guide" id="draping-face-guide" data-i18n-html="personalColor.drapingMode.faceGuide">
                                Align your face<br>with the guideline
                            </div>
                        </div>

                        <div class="camera-controls">
                            <button class="control-btn" onclick="startDrapingCamera()" data-i18n="personalColor.drapingMode.startCamera">Start Camera</button>
                            <button class="control-btn" onclick="saveCurrentColor()" data-i18n="personalColor.drapingMode.saveColor">Save Current Color</button>
                            <button class="control-btn" onclick="toggleCompareMode()" id="compare-mode-btn" style="background: linear-gradient(135deg, #E91E63, #9C27B0);">ğŸ”€ ë¹„êµ ëª¨ë“œ</button>
                        </div>

                        <!-- ë¹„êµ ëª¨ë“œ UI -->
                        <div id="compare-mode-panel" style="display: none; margin-top: 15px; padding: 15px; background: linear-gradient(135deg, rgba(233,30,99,0.15), rgba(156,39,176,0.15)); border-radius: 12px; border: 1px solid rgba(233,30,99,0.3);">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                                <span style="font-size: 16px; color: #E91E63; font-weight: bold;">ğŸ”¥ ì›œ vs ì¿¨ ë¹„êµ</span>
                                <span id="compare-progress" style="font-size: 14px; color: #CE93D8;">1/4</span>
                            </div>

                            <div id="compare-colors-display" style="display: flex; gap: 10px; margin-bottom: 12px;">
                                <div style="flex: 1; text-align: center; padding: 10px; background: rgba(0,0,0,0.2); border-radius: 8px;">
                                    <div id="compare-left-swatch" style="width: 50px; height: 50px; border-radius: 50%; margin: 0 auto 8px; border: 3px solid white;"></div>
                                    <div id="compare-left-name" style="font-size: 14px; color: #fff;"></div>
                                    <div id="compare-left-season" style="font-size: 12px; color: #F48FB1;"></div>
                                </div>
                                <div style="display: flex; align-items: center; font-size: 20px; color: #E91E63;">VS</div>
                                <div style="flex: 1; text-align: center; padding: 10px; background: rgba(0,0,0,0.2); border-radius: 8px;">
                                    <div id="compare-right-swatch" style="width: 50px; height: 50px; border-radius: 50%; margin: 0 auto 8px; border: 3px solid white;"></div>
                                    <div id="compare-right-name" style="font-size: 14px; color: #fff;"></div>
                                    <div id="compare-right-season" style="font-size: 12px; color: #90CAF9;"></div>
                                </div>
                            </div>

                            <div style="text-align: center; margin-bottom: 12px; font-size: 15px; color: #E1BEE7;">ì–´ëŠ ìª½ì´ ë” ì–´ìš¸ë¦¬ë‚˜ìš”?</div>

                            <div style="display: flex; gap: 10px;">
                                <button onclick="selectCompareColor('left')" style="flex: 1; padding: 12px; border: none; border-radius: 8px; background: linear-gradient(135deg, #FF9800, #FF5722); color: white; font-size: 15px; font-weight: bold; cursor: pointer;">ğŸ‘ˆ ì™¼ìª½</button>
                                <button onclick="selectCompareColor('right')" style="flex: 1; padding: 12px; border: none; border-radius: 8px; background: linear-gradient(135deg, #2196F3, #673AB7); color: white; font-size: 15px; font-weight: bold; cursor: pointer;">ì˜¤ë¥¸ìª½ ğŸ‘‰</button>
                            </div>

                            <div id="compare-score-display" style="margin-top: 12px; padding: 10px; background: rgba(0,0,0,0.2); border-radius: 8px; display: none;">
                                <div style="font-size: 14px; color: #CE93D8; margin-bottom: 8px; font-weight: bold;">ğŸ“Š í˜„ì¬ ì ìˆ˜</div>
                                <div style="display: flex; justify-content: space-around;">
                                    <span style="color: #FFCC80;">ğŸŒ¸ ë´„: <b id="score-spring">0</b></span>
                                    <span style="color: #90CAF9;">ğŸŒŠ ì—¬ë¦„: <b id="score-summer">0</b></span>
                                    <span style="color: #FFAB91;">ğŸ‚ ê°€ì„: <b id="score-autumn">0</b></span>
                                    <span style="color: #B39DDB;">â„ï¸ ê²¨ìš¸: <b id="score-winter">0</b></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ìƒ‰ìƒ íŒ”ë ˆíŠ¸ -->
                    <div class="color-palette-section">
                        <h3 data-i18n="personalColor.drapingMode.seasonPalette">4 Season Color Palette</h3>

                        <!-- ê³„ì ˆ íƒ­ -->
                        <div class="season-tabs">
                            <button class="season-tab active" data-season="spring"
                                onclick="selectSeason('spring')" data-i18n="personalColor.drapingMode.spring">Spring</button>
                            <button class="season-tab" data-season="summer" onclick="selectSeason('summer')" data-i18n="personalColor.drapingMode.summer">Summer</button>
                            <button class="season-tab" data-season="autumn" onclick="selectSeason('autumn')" data-i18n="personalColor.drapingMode.autumn">Autumn</button>
                            <button class="season-tab" data-season="winter" onclick="selectSeason('winter')" data-i18n="personalColor.drapingMode.winter">Winter</button>
                        </div>

                        <!-- ìƒ‰ìƒ ê·¸ë¦¬ë“œ -->
                        <div class="color-grid" id="color-grid">
                            <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
                        </div>

                        <!-- ì„¸ë¶€ ì¡°ì • -->
                        <div class="color-adjustments">
                            <h4 data-i18n="personalColor.drapingMode.colorAdjust">Color Adjustment</h4>

                            <div class="adjustment-slider">
                                <label data-i18n="personalColor.drapingMode.lightness">Lightness</label>
                                <input type="range" id="lightness-slider" min="-30" max="30" value="0"
                                    oninput="adjustColor()">
                                <span id="lightness-value">0</span>
                            </div>

                            <div class="adjustment-slider">
                                <label data-i18n="personalColor.drapingMode.saturation">Saturation</label>
                                <input type="range" id="saturation-slider" min="-50" max="50" value="0"
                                    oninput="adjustColor()">
                                <span id="saturation-value">0</span>
                            </div>

                            <div class="adjustment-slider">
                                <label data-i18n="personalColor.drapingMode.warmth">Warmth</label>
                                <input type="range" id="warmth-slider" min="-40" max="40" value="0"
                                    oninput="adjustColor()">
                                <span id="warmth-value">0</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ê³µí†µ ê²°ê³¼ ì„¹ì…˜ -->
            <div class="results-section" id="results-section" style="display: none;">
                <h3 data-i18n="personalColor.aiMode.result.title">Personal Color Analysis Result</h3>
                <div class="final-results" id="final-results">
                    <!-- ê²°ê³¼ ë‚´ìš©ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                </div>

                <div class="product-recommendations" id="product-recommendations">
                    <h4 data-i18n="personalColor.drapingMode.recommendProducts">Recommended Hair Color Products</h4>
                    <div class="brand-sections" id="brand-sections">
                        <!-- ë¸Œëœë“œë³„ ì œí’ˆ ì¶”ì²œì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                    </div>
                </div>
            </div>

        </main>
    </div>


    <!-- Main Application Script -->
    <script src="app.js?v=20251209-1800"></script>
</body>

</html>
