<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0, minimum-scale=1.0, viewport-fit=cover">
    <title>HAIRGATOR - 헤어스타일 메뉴판</title>
    
    <!-- PWA 메타 태그 -->
    <meta name="theme-color" content="#000000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="mobile-web-app-capable" content="yes">
    <link rel="manifest" href="manifest.json">
    
    <!-- 파비콘 -->
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" href="/icons/icon-192x192.png">
    
    <!-- CSS 파일들 -->
    <link rel="stylesheet" href="css/index-styles.css">
    <link rel="stylesheet" href="css/index-modal.css">
    <link rel="stylesheet" href="css/index-customer.css">
    <link rel="stylesheet" href="css/index-stats.css">
    <link rel="stylesheet" href="css/designer-profile.css">
    <link rel="stylesheet" href="css/promotion-manager.css">
    <link rel="stylesheet" href="css/kakao-notification.css">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage-compat.js"></script>
</head>
<body>
    <!-- 동기화 상태 표시 -->
    <div id="syncStatus" class="sync-status">Firebase 연결 중...</div>
    
    <!-- 디바이스 최적화 안내 -->
    <div id="deviceNotice" class="device-notice"></div>
    
    <!-- 디자이너 로그인 화면 -->
    <div id="designerLogin" class="designer-login">
        <div class="login-card">
            <h2>💇 HAIRGATOR 로그인</h2>
            
            <div class="info-notice">
                ⚡ <strong>최초 접속시 디자이너 정보 등록</strong><br>
                처음 사용하시는 디자이너님은 아래 정보를 입력하면<br>
                자동으로 등록됩니다. (어드민 등록 불필요)
            </div>
            
            <div class="input-group">
                <label>👤 이름 (실명)</label>
                <input type="text" id="designerName" placeholder="김민수">
                <small>* 정확한 이름을 입력해주세요</small>
            </div>
            
            <div class="input-group">
                <label>📱 휴대폰 끝 4자리</label>
                <input type="number" id="designerPhone" placeholder="2709" maxlength="4">
                <small>* 개인 식별용 - 다른 사람과 겹치지 않도록</small>
            </div>
            
            <div class="input-group">
                <label>🔒 개인 비밀번호 (4자리)</label>
                <input type="password" id="designerPin" placeholder="••••" maxlength="4">
                <small>* 본인만 아는 4자리 숫자</small>
            </div>
            
            <button class="login-btn" onclick="checkDesignerLogin()">
                🔍 확인 후 로그인
            </button>
            
            <div id="loginResult" class="check-result"></div>
        </div>
    </div>
    
    <!-- 성별 선택 화면 -->
    <div id="genderSelection" class="gender-selection">
        <div class="gender-card male" onclick="selectGender('male')">
            <div class="gender-icon">♂</div>
            <div class="gender-title">남성</div>
            <div class="gender-subtitle">Men's Hairstyle</div>
        </div>
        
        <div class="gender-card female" onclick="selectGender('female')">
            <div class="gender-icon">♀</div>
            <div class="gender-title">여성</div>
            <div class="gender-subtitle">Women's Hairstyle</div>
        </div>
    </div>
    
    <!-- 메인 컨테이너 -->
    <div id="mainContainer" class="main-container">
        <!-- 헤더 -->
        <header class="header">
            <div class="logo-section">
                <button class="back-btn" onclick="backToGenderSelection()">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                        <path d="M12 16L6 10L12 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
                <h1 class="logo-text">HAIRGATOR</h1>
            </div>
            
            <button class="menu-btn" onclick="toggleSlideMenu()">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M3 12H21M3 6H21M3 18H21" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </button>
        </header>
        
        <!-- 네비게이션 탭 -->
        <nav id="navTabs" class="nav-tabs"></nav>
        
        <!-- 콘텐츠 영역 -->
        <div id="content" class="content"></div>
    </div>
    
    <!-- 슬라이드 메뉴 -->
    <div id="slideMenu" class="slide-menu">
        <div class="slide-menu-header">
            <h3>메뉴</h3>
            <button class="close-btn" onclick="toggleSlideMenu()">✕</button>
        </div>
        
        <div class="menu-designer-info">
            <div class="designer-avatar">👤</div>
            <div id="menuDesignerName" class="designer-name">디자이너</div>
        </div>
        
        <div class="menu-items">
            <button class="menu-item" onclick="openCustomerListModal()">
                <span class="menu-icon">👥</span>
                <span>고객 조회</span>
            </button>
            <button class="menu-item" onclick="openStatsModal()">
                <span class="menu-icon">📊</span>
                <span>인기 통계</span>
            </button>
            <button class="menu-item" onclick="openPromotionModal()">
                <span class="menu-icon">🎯</span>
                <span>프로모션 관리</span>
            </button>
            <button class="menu-item" onclick="openDesignerProfileModal()">
                <span class="menu-icon">👤</span>
                <span>프로필 설정</span>
            </button>
            <button class="menu-item" onclick="openKakaoNotificationModal()">
                <span class="menu-icon">💬</span>
                <span>카카오톡 알림</span>
            </button>
            <button class="menu-item" onclick="openNaverExtractorModal()">
                <span class="menu-icon">📱</span>
                <span>네이버 예약 연동</span>
            </button>
            <button class="menu-item logout" onclick="logoutDesigner()">
                <span class="menu-icon">🚪</span>
                <span>로그아웃</span>
            </button>
        </div>
    </div>
    
    <!-- 슬라이드 메뉴 오버레이 -->
    <div id="menuOverlay" class="menu-overlay" onclick="toggleSlideMenu()"></div>
    
    <!-- 새 고객 추가 버튼 -->
    <button class="add-customer-btn" id="addCustomerBtn" onclick="showNewCustomerModal()">+</button>
    
    <!-- 이미지 모달 -->
    <div id="imageModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <img class="modal-image" id="modalImage" src="" alt="">
            <div class="modal-info">
                <h3 id="modalCode"></h3>
                <p id="modalName"></p>
                <button class="like-btn" id="likeBtn" onclick="toggleStyleLike()">❤️ 좋아요</button>
                <button class="customer-register-btn" id="customerRegisterBtn" onclick="showCustomerRegisterModal()">👤 고객 등록</button>
            </div>
        </div>
    </div>
    
    <!-- 고객 등록 모달 -->
    <div id="customerRegisterModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>👤 고객 등록</h2>
                <button class="modal-close" onclick="closeCustomerRegisterModal()">✕</button>
            </div>
            
            <div class="modal-body">
                <div class="style-preview">
                    <img id="registerStyleImage" src="">
                    <div class="style-info">
                        <div id="registerStyleCode"></div>
                        <div id="registerStyleName"></div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>고객 이름 <span class="required">*</span></label>
                    <input type="text" id="registerCustomerName" placeholder="이름을 입력하세요">
                </div>
                
                <div class="form-group">
                    <label>전화번호 <span class="required">*</span></label>
                    <input type="tel" id="registerCustomerPhone" placeholder="010-1234-5678">
                </div>
                
                <div class="form-group">
                    <label>메모</label>
                    <textarea id="registerCustomerMemo" rows="3" placeholder="특별 요청사항이나 메모"></textarea>
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="btn-secondary" onclick="closeCustomerRegisterModal()">취소</button>
                <button class="btn-primary" onclick="saveCustomerWithStyle()">등록</button>
            </div>
        </div>
    </div>
    
    <!-- 새 고객 추가 모달 -->
    <div id="newCustomerModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>➕ 새 고객 추가</h2>
                <button class="modal-close" onclick="closeNewCustomerModal()">✕</button>
            </div>
            
            <div class="modal-body">
                <div class="form-group">
                    <label>고객 이름 <span class="required">*</span></label>
                    <input type="text" id="newCustomerName" placeholder="이름을 입력하세요">
                </div>
                
                <div class="form-group">
                    <label>전화번호 <span class="required">*</span></label>
                    <input type="tel" id="newCustomerPhone" placeholder="010-1234-5678">
                </div>
                
                <div class="form-group">
                    <label>성별</label>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="newCustomerGender" value="male" checked>
                            <span>남성</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="newCustomerGender" value="female">
                            <span>여성</span>
                        </label>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>첫 방문 스타일</label>
                    <input type="text" id="newCustomerStyle" placeholder="스타일 선택 (선택사항)" readonly>
                </div>
                
                <div class="form-group">
                    <label>메모</label>
                    <textarea id="newCustomerMemo" rows="3" placeholder="특별 요청사항이나 메모"></textarea>
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="btn-secondary" onclick="closeNewCustomerModal()">취소</button>
                <button class="btn-primary" onclick="saveNewCustomer()">저장</button>
            </div>
        </div>
    </div>
    
    <!-- 고객 조회 모달 -->
    <div id="customerListModal" class="modal">
        <div class="modal-content large">
            <div class="modal-header">
                <h2>👥 고객 조회</h2>
                <button class="modal-close" onclick="closeCustomerListModal()">✕</button>
            </div>
            
            <div class="search-section">
                <input type="text" id="customerSearch" placeholder="이름 또는 전화번호로 검색..." onkeyup="searchCustomers()">
            </div>
            
            <div id="customerListContent" class="customer-list-content">
                <!-- 동적으로 고객 목록이 로드됩니다 -->
            </div>
        </div>
    </div>
    
    <!-- 인기 통계 모달 -->
    <div id="statsModal" class="modal">
        <div class="modal-content large">
            <div class="modal-header">
                <h2>📊 인기 스타일 통계</h2>
                <button class="modal-close" onclick="closeStatsModal()">✕</button>
            </div>
            
            <div class="stats-tabs">
                <button class="stats-tab active" onclick="switchStatsTab('all')">전체</button>
                <button class="stats-tab" onclick="switchStatsTab('male')">남성</button>
                <button class="stats-tab" onclick="switchStatsTab('female')">여성</button>
            </div>
            
            <div id="statsContent" class="stats-content">
                <!-- 동적으로 통계가 로드됩니다 -->
            </div>
        </div>
    </div>
    
    <!-- 프로모션 관리 모달 -->
    <div id="promotionModal" class="modal">
        <div class="modal-content large">
            <div class="modal-header">
                <h2>🎯 프로모션 관리</h2>
                <button class="modal-close" onclick="closePromotionModal()">✕</button>
            </div>
            <div id="promotionContent" class="promotion-content">
                <!-- 프로모션 내용이 동적으로 로드됩니다 -->
            </div>
        </div>
    </div>
    
    <!-- 디자이너 프로필 모달 -->
    <div id="designerProfileModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>👤 디자이너 프로필</h2>
                <button class="modal-close" onclick="closeDesignerProfileModal()">✕</button>
            </div>
            <div id="designerProfileContent" class="designer-profile-content">
                <!-- 프로필 내용이 동적으로 로드됩니다 -->
            </div>
        </div>
    </div>
    
    <!-- 카카오톡 알림 설정 모달 -->
    <div id="kakaoNotificationModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>💬 카카오톡 알림 설정</h2>
                <button class="modal-close" onclick="closeKakaoNotificationModal()">✕</button>
            </div>
            <div id="kakaoNotificationContent" class="kakao-notification-content">
                <!-- 카카오톡 알림 설정이 동적으로 로드됩니다 -->
            </div>
        </div>
    </div>
    
    <!-- 네이버 예약 추출 모달 -->
    <div id="naverExtractorModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>📱 네이버 예약 연동</h2>
                <button class="modal-close" onclick="closeNaverExtractorModal()">✕</button>
            </div>
            <div id="naverExtractorContent" class="naver-extractor-content">
                <!-- 네이버 예약 추출 내용이 동적으로 로드됩니다 -->
            </div>
        </div>
    </div>
    
    <!-- 알림 토스트 -->
    <div id="notificationToast" class="notification-toast"></div>
    
    <!-- 로딩 오버레이 -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-spinner"></div>
    </div>
    
    <!-- JavaScript 파일들 (올바른 순서) -->
    <script src="js/firebase-config.js"></script>
    <script src="js/index-firebase.js"></script>
    <script src="js/index-customer.js"></script>
    <script src="js/index-stats.js"></script>
    <script src="js/designer-profile.js"></script>
    <script src="js/promotion-manager.js"></script>
    <script src="js/kakao-notification.js"></script>
    <script src="js/naver-booking-extractor.js"></script>
    
    <!-- 메인 스크립트 (마지막에 로드) -->
    <script src="js/index-main.js"></script>
</body>
</html>
