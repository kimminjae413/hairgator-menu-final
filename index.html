<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0, minimum-scale=1.0, viewport-fit=cover">
    <title>HAIRGATOR - 헤어스타일 메뉴판</title>
    
    <!-- PWA 메타 태그 - 네이티브앱처럼 보이게 -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="HAIRGATOR">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#000000">
    
    <!-- PWA Manifest 연결 -->
    <link rel="manifest" href="/manifest.json">
    
    <!-- iOS 상태바 숨기기 + 전체화면 -->
    <meta name="apple-touch-fullscreen" content="yes">
    <meta name="format-detection" content="telephone=no">
    
    <!-- 주소창 숨기기 -->
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <!-- PWA 아이콘 (iOS용) -->
    <link rel="apple-touch-icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 192 192'%3E%3Cdefs%3E%3ClinearGradient id='grad' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%23FF1493;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%23FF69B4;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='192' height='192' fill='url(%23grad)' rx='20'/%3E%3Ctext x='96' y='120' font-family='Arial,sans-serif' font-size='60' font-weight='bold' text-anchor='middle' fill='white'%3EH%3C/text%3E%3C/svg%3E">
    
    <style>
        /* 모바일/태블릿 전용 - PC 고려 안함 */
        html {
            height: 100vh;
            overflow: hidden;
            -webkit-text-size-adjust: none;
            -ms-text-size-adjust: none;
            text-size-adjust: none;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: #000;
            color: #fff;
            margin: 0;
            padding: 0;
            
            /* 기본 상태 - 회전 없음, 반응형 크기 */
            width: 100vw;
            height: 100vh;
            position: fixed;
            top: 0;
            left: 0;
            
            /* 모바일 최적화 */
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -webkit-tap-highlight-color: transparent;
            -webkit-overflow-scrolling: touch;
            touch-action: manipulation;
            overscroll-behavior: none;
            -webkit-overscroll-behavior: none;
        }

        /* 기기별 최적화 안내 */
        .device-notice {
            position: fixed;
            top: 15px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 20, 147, 0.9);
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 12px;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.5s ease;
            text-align: center;
            max-width: 90%;
            box-sizing: border-box;
        }

        .device-notice.show {
            opacity: 1;
        }

        @keyframes slideDown {
            from { 
                opacity: 0; 
                transform: translateX(-50%) translateY(-20px); 
            }
            to { 
                opacity: 1; 
                transform: translateX(-50%) translateY(0); 
            }
        }

        /* 닫기 버튼 - 제거됨 */

        /* 디자이너 로그인 화면 */
        .designer-login {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
            background-color: #000;
            padding: 40px 20px;
            box-sizing: border-box;
        }

        .login-card {
            background: rgba(255, 255, 255, 0.08);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 25px;
            padding: 40px 30px;
            text-align: center;
            max-width: 400px;
            width: 100%;
            box-shadow: 0 20px 40px rgba(255, 20, 147, 0.1);
        }

        .login-card h2 {
            color: #FF1493;
            margin-bottom: 30px;
            font-size: 24px;
        }

        .info-notice {
            background: rgba(255, 20, 147, 0.1);
            border: 1px solid rgba(255, 20, 147, 0.3);
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 30px;
            font-size: 12px;
            line-height: 1.5;
            color: #ccc;
        }

        .input-group {
            margin-bottom: 20px;
            text-align: left;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            color: #fff;
            font-weight: 500;
            font-size: 14px;
        }

        .input-group input {
            width: 100%;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            color: #fff;
            font-size: 16px;
            box-sizing: border-box;
            transition: all 0.3s ease;
        }

        .input-group input:focus {
            outline: none;
            border-color: #FF1493;
            background: rgba(255, 255, 255, 0.15);
        }

        .input-group input::placeholder {
            color: #aaa;
        }

        .input-group small {
            display: block;
            margin-top: 5px;
            color: #999;
            font-size: 11px;
        }

        .login-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #FF1493, #FF69B4);
            border: none;
            border-radius: 15px;
            color: white;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .login-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(255, 20, 147, 0.3);
        }

        .check-result {
            margin-top: 20px;
        }

        /* 성별 선택 화면 - 세로로 긴 직사각형 카드 */
        .gender-selection {
            display: none;
            align-items: center;
            justify-content: center;
            height: 100vh;
            background-color: #000;
            padding: 40px 20px;
            box-sizing: border-box;
            gap: 30px;
        }

        .gender-selection.show {
            display: flex;
        }

        /* 핸드폰용 반응형 (768px 미만) - 세로로 긴 직사각형 */
        @media screen and (max-width: 768px) {
            .device-notice {
                background: rgba(255, 20, 147, 0.9);
                font-size: 12px;
                padding: 8px 15px;
            }

            .gender-selection {
                flex-direction: column;
                gap: 25px;
                padding: 30px 20px;
            }

            .gender-card {
                width: 100%;
                max-width: 180px; /* 세로로 긴 직사각형: 가로 짧게 */
                height: 220px;    /* 세로로 긴 직사각형: 세로 길게 */
                padding: 30px 20px;
                background: rgba(255, 255, 255, 0.08);
                border: 2px solid rgba(255, 255, 255, 0.3);
                border-radius: 20px;
                text-align: center;
                cursor: pointer;
                transition: all 0.3s ease;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                position: relative;
                overflow: hidden;
            }

            .gender-icon {
                width: 70px;
                height: 70px;
                margin-bottom: 20px;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 35px;
                background: linear-gradient(135deg, #FF1493, #FF69B4);
                border-radius: 50%;
                flex-shrink: 0;
            }

            .gender-card.male .gender-icon {
                background: linear-gradient(135deg, #4169E1, #1E90FF);
            }

            .gender-title {
                font-size: 20px;
                font-weight: bold;
                margin-bottom: 8px;
                color: #fff;
            }

            .gender-subtitle {
                color: #aaa;
                font-size: 12px;
                font-weight: 400;
            }
        }

        /* 태블릿용 반응형 (769px 이상) - 세로로 긴 직사각형 */
        @media screen and (min-width: 769px) {
            .device-notice {
                background: rgba(0, 150, 255, 0.9);
                font-size: 14px;
                padding: 10px 20px;
            }

            .gender-selection {
                flex-direction: row;
                gap: 50px;
                padding: 40px;
            }

            .gender-card {
                flex: 1;
                max-width: 200px; /* 세로로 긴 직사각형: 가로 짧게 */
                height: 250px;    /* 세로로 긴 직사각형: 세로 길게 */
                padding: 40px 25px;
                background: rgba(255, 255, 255, 0.05);
                border: 2px solid rgba(255, 255, 255, 0.25);
                border-radius: 25px;
                text-align: center;
                cursor: pointer;
                transition: all 0.3s ease;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                position: relative;
                overflow: hidden;
            }

            .gender-icon {
                width: 90px;
                height: 90px;
                margin-bottom: 25px;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 45px;
                background: linear-gradient(135deg, #FF1493, #FF69B4);
                border-radius: 50%;
                flex-shrink: 0;
            }

            .gender-card.male .gender-icon {
                background: linear-gradient(135deg, #4169E1, #1E90FF);
            }

            .gender-title {
                font-size: 24px;
                font-weight: bold;
                margin-bottom: 10px;
                color: #fff;
            }

            .gender-subtitle {
                color: #aaa;
                font-size: 14px;
                font-weight: 400;
            }
        }

        /* 터치 효과 - 세로 직사각형 최적화 */
        .gender-card:active {
            transform: scale(0.96);
            background: rgba(255, 255, 255, 0.15);
            border-color: #FF1493;
        }

        .gender-card:hover {
            background: rgba(255, 255, 255, 0.12);
            border-color: #FF69B4;
            box-shadow: 0 8px 25px rgba(255, 20, 147, 0.2);
        }

        /* 메인 컨테이너 */
        .main-container {
            display: none;
        }

        .main-container.active {
            display: block;
        }

        /* 헤더 */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background-color: #000;
            z-index: 100;
            border-bottom: 1px solid #333;
        }

        .logo-section {
            padding: 10px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .logo-img {
            height: 24px;
            width: auto;
            opacity: 0.9;
        }

        /* 뒤로가기 버튼 */
        .back-btn {
            background: none;
            border: none;
            color: #999;
            cursor: pointer;
            padding: 8px;
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 14px;
            transition: color 0.3s ease;
        }

        .back-btn:hover {
            color: #FF1493;
        }

        /* 햄버거 버튼 */
        .hamburger-btn {
            background: none;
            border: none;
            cursor: pointer;
            padding: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .hamburger-btn:hover {
            transform: scale(1.1);
        }

        .hamburger-icon {
            width: 24px;
            height: 18px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .hamburger-icon span {
            display: block;
            width: 100%;
            height: 2px;
            background: #fff;
            border-radius: 1px;
            transition: all 0.3s ease;
        }

        /* 햄버거 메뉴 */
        .hamburger-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 9999;
            display: none;
        }

        .hamburger-menu {
            position: fixed;
            top: 0;
            right: 0;
            width: 320px;
            max-width: 90vw;
            height: 100%;
            background: linear-gradient(135deg, #1a1a1a, #2a2a2a);
            color: white;
            padding: 0;
            box-shadow: -5px 0 25px rgba(0, 0, 0, 0.5);
            animation: slideInRight 0.3s ease;
            overflow-y: auto;
        }

        @keyframes slideInRight {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }

        .menu-header {
            padding: 30px 25px 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .menu-header h3 {
            margin: 0;
            color: #FF1493;
            font-size: 18px;
        }

        .close-menu {
            background: none;
            border: none;
            color: #999;
            font-size: 24px;
            cursor: pointer;
            padding: 5px;
            transition: color 0.3s ease;
        }

        .close-menu:hover {
            color: #fff;
        }

        .menu-items {
            padding: 20px 0;
        }

        .menu-item {
            display: flex;
            align-items: center;
            padding: 20px 25px;
            margin: 0;
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .menu-item:hover {
            background: rgba(255, 20, 147, 0.1);
        }

        .menu-icon {
            font-size: 24px;
            margin-right: 15px;
            width: 40px;
            text-align: center;
        }

        .menu-text {
            flex: 1;
        }

        .menu-text strong {
            display: block;
            color: #fff;
            margin-bottom: 3px;
            font-size: 16px;
        }

        .menu-text small {
            color: #aaa;
            font-size: 12px;
        }

        /* 고객 검색 모달 */
        .customer-search-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
        }

        .search-container {
            background: linear-gradient(135deg, #1a1a1a, #2a2a2a);
            border: 2px solid #FF1493;
            border-radius: 25px;
            padding: 30px;
            max-width: 90%;
            width: 450px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .search-container h3 {
            color: #FF1493;
            margin-bottom: 20px;
            text-align: center;
        }

        .search-input {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .search-input input {
            flex: 1;
            padding: 12px 15px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            color: #fff;
            font-size: 14px;
        }

        .search-input input:focus {
            outline: none;
            border-color: #FF1493;
        }

        .search-input button {
            padding: 12px 15px;
            background: #FF1493;
            border: none;
            border-radius: 10px;
            color: white;
            cursor: pointer;
            font-size: 14px;
        }

        .customer-result {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            margin: 10px 0;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .customer-result:hover {
            background: rgba(255, 20, 147, 0.2);
        }

        .customer-info strong {
            color: #fff;
            margin-right: 10px;
        }

        .customer-info .phone {
            color: #aaa;
            font-size: 12px;
        }

        .visit-count {
            color: #FF69B4;
            font-size: 12px;
        }

        .no-results {
            text-align: center;
            color: #666;
            padding: 20px;
        }

        .close-search {
            width: 100%;
            padding: 12px;
            background: #333;
            border: none;
            border-radius: 10px;
            color: #fff;
            cursor: pointer;
            margin-top: 20px;
        }

        /* 고객 상세 모달 */
        .customer-detail-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 10001;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
        }

        .detail-container {
            background: linear-gradient(135deg, #1a1a1a, #2a2a2a);
            border: 2px solid #FF1493;
            border-radius: 25px;
            padding: 30px;
            max-width: 90%;
            width: 500px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .customer-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .customer-header h3 {
            color: #FF1493;
            margin: 0;
        }

        .customer-header button {
            background: none;
            border: none;
            color: #999;
            font-size: 24px;
            cursor: pointer;
        }

        .visit-history h4,
        .favorite-styles h4 {
            color: #fff;
            margin-bottom: 15px;
            font-size: 16px;
        }

        .visit-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .visit-date {
            color: #FF69B4;
            font-size: 12px;
            margin-bottom: 10px;
        }

        .style-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 0;
        }

        .style-item.liked {
            color: #FF69B4;
        }

        .style-code {
            font-weight: bold;
            min-width: 60px;
        }

        .style-name {
            flex: 1;
        }

        .heart {
            color: #FF1493;
        }

        .visit-notes {
            margin-top: 10px;
            padding: 8px;
            background: rgba(255, 20, 147, 0.1);
            border-radius: 5px;
            font-style: italic;
            color: #ccc;
            font-size: 12px;
        }

        .no-history {
            text-align: center;
            color: #666;
            padding: 20px;
        }

        /* 네비게이션 탭 */
        .nav-tabs {
            display: flex;
            background-color: #000;
            overflow-x: auto;
            scrollbar-width: none;
            -ms-overflow-style: none;
            padding: 0 20px;
        }

        .nav-tabs::-webkit-scrollbar {
            display: none;
        }

        .nav-tab {
            padding: 15px 25px;
            cursor: pointer;
            white-space: nowrap;
            color: #888;
            transition: all 0.3s ease;
            position: relative;
            font-weight: 500;
            letter-spacing: 0.5px;
        }

        .nav-tab.active {
            color: #fff;
        }

        .nav-tab.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #FF1493, #FF69B4);
        }

        .nav-tab:hover {
            color: #FF69B4;
        }

        /* 콘텐츠 영역 - 스와이프 새로고침 방지 */
        .content {
            margin-top: 100px;
            padding: 20px;
            min-height: calc(100vh - 100px);
            overflow-x: auto;
            overflow-y: auto;
            
            /* 스와이프 새로고침 완전 방지 */
            overscroll-behavior-y: none;
            -webkit-overscroll-behavior-y: none;
            touch-action: pan-x pan-y; /* 확대/축소 방지, 스크롤만 허용 */
        }

        .category-section {
            display: none;
        }

        .category-section.active {
            display: block;
        }

        .category-description {
            margin-bottom: 20px;
            padding: 20px;
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            line-height: 1.6;
            color: #ccc;
        }

        /* 앞머리 길이 탭 (가운데 정렬) */
        .length-tabs {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin-bottom: 30px;
            padding: 20px;
            overflow-x: auto;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        .length-tabs::-webkit-scrollbar {
            display: none;
        }

        .length-tab {
            padding: 10px 20px;
            cursor: pointer;
            white-space: nowrap;
            color: #888;
            transition: all 0.3s ease;
            position: relative;
            font-weight: 500;
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            font-size: 14px;
        }

        .length-tab.active {
            color: #fff;
            background-color: #FF1493;
        }

        .length-tab:hover {
            color: #fff;
            background-color: rgba(255, 20, 147, 0.7);
        }

        /* 헤어스타일 그리드 - 고정 크기 카드 + 확대방지 */
        .hairstyle-grid {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: thin;
            padding-bottom: 10px;
            
            /* 확대/축소 방지 */
            touch-action: pan-x; /* 가로 스크롤만 허용 */
        }

        /* 스크롤바 스타일링 */
        .hairstyle-grid::-webkit-scrollbar {
            height: 6px;
        }

        .hairstyle-grid::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
        }

        .hairstyle-grid::-webkit-scrollbar-thumb {
            background: #FF1493;
            border-radius: 3px;
        }

        .hairstyle-grid::-webkit-scrollbar-thumb:hover {
            background: #FF69B4;
        }

        /* 헤어스타일 카드 반응형 */
        .hairstyle-card {
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            flex-shrink: 0;
        }

        /* 세로 모드 - 작은 카드 */
        @media screen and (max-width: 768px) {
            .hairstyle-card {
                width: 140px;
            }
        }

        /* 가로 모드 - 큰 카드 */
        @media screen and (min-width: 769px) {
            .hairstyle-card {
                width: 180px;
            }
        }

        .hairstyle-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(255, 20, 147, 0.3);
        }

        /* 터치 디바이스 최적화 */
        @media (hover: none) {
            .hairstyle-card:active {
                transform: scale(0.95);
                transition: transform 0.1s ease;
            }
        }

        .hairstyle-image {
            width: 100%;
            aspect-ratio: 3/4;
            object-fit: cover;
            background-color: #222;
        }

        .hairstyle-info {
            padding: 15px;
            text-align: center;
        }

        .hairstyle-code {
            font-size: 12px;
            color: #FF69B4;
            margin-bottom: 5px;
            font-weight: 600;
        }

        .hairstyle-name {
            font-size: 14px;
            color: #fff;
            font-weight: 500;
        }

        /* 앞머리 길이 섹션 */
        .length-section {
            display: none;
        }

        .length-section.active {
            display: block;
        }

        /* 이미지 모달 - 터치 최적화 + 핀치 줌 */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.95);
            animation: fadeIn 0.3s ease;
            -webkit-overflow-scrolling: touch;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            position: relative;
            margin: auto;
            padding: 20px;
            width: 95%;
            max-width: 800px;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .close {
            position: absolute;
            top: 10px;
            right: 20px;
            color: #fff;
            font-size: 40px;
            font-weight: bold;
            cursor: pointer;
            z-index: 1001;
            padding: 10px;
        }

        .close:hover {
            color: #FF69B4;
        }

        .modal-image {
            max-width: 100%;
            max-height: 70vh;
            object-fit: contain;
            border-radius: 10px;
            touch-action: pinch-zoom; /* 핀치 줌 허용 */
            user-select: none;
        }

        .modal-info {
            margin-top: 20px;
            text-align: center;
            background-color: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
            width: 100%;
            max-width: 400px;
        }

        .modal-info h3 {
            color: #FF69B4;
            margin-bottom: 10px;
            font-size: 24px;
        }

        .modal-info p {
            font-size: 18px;
            color: #fff;
        }

        /* 좋아요 버튼 */
        .like-btn {
            margin-top: 15px;
            padding: 10px 20px;
            background: linear-gradient(135deg, #FF1493, #FF69B4);
            border: none;
            border-radius: 10px;
            color: white;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .like-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 20, 147, 0.3);
        }

        .like-btn.liked {
            background: linear-gradient(135deg, #e91e63, #f48fb1);
        }

        /* 모바일 모달 최적화 */
        @media screen and (max-width: 600px) {
            .close {
                font-size: 35px;
                top: 5px;
                right: 15px;
                padding: 15px;
            }
            
            .modal-image {
                max-height: 60vh;
            }
            
            .modal-info {
                padding: 15px;
                margin-top: 15px;
            }
            
            .modal-info h3 {
                font-size: 20px;
            }
            
            .modal-info p {
                font-size: 16px;
            }
        }

        /* 로딩 스피너 */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 200px;
        }

        .spinner {
            border: 3px solid rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            border-top: 3px solid #FF1493;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* 동기화 상태 표시 */
        .sync-status {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: rgba(0, 0, 0, 0.8);
            color: #fff;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            z-index: 200;
            display: none;
            max-width: 300px;
            text-align: center;
        }

        .sync-status.connected {
            background-color: rgba(40, 167, 69, 0.9);
        }

        .sync-status.disconnected {
            background-color: rgba(220, 53, 69, 0.9);
        }

        .sync-status.updating {
            background-color: rgba(255, 193, 7, 0.9);
            color: #000;
        }

        /* 빈 상태 메시지 */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #666;
        }

        .empty-state-icon {
            font-size: 48px;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        .empty-state-title {
            font-size: 18px;
            margin-bottom: 10px;
            color: #999;
        }

        .empty-state-message {
            font-size: 14px;
            line-height: 1.5;
            color: #666;
        }

        /* 새 고객 추가 버튼 */
        .add-customer-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #FF1493, #FF69B4);
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(255, 20, 147, 0.3);
            transition: all 0.3s ease;
            z-index: 500;
            display: none;
        }

        .add-customer-btn.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .add-customer-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 25px rgba(255, 20, 147, 0.4);
        }

        /* 새 고객 등록 모달 */
        .new-customer-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
        }

        .new-customer-container {
            background: linear-gradient(135deg, #1a1a1a, #2a2a2a);
            border: 2px solid #FF1493;
            border-radius: 25px;
            padding: 30px;
            max-width: 90%;
            width: 400px;
        }

        .new-customer-container h3 {
            color: #FF1493;
            margin-bottom: 20px;
            text-align: center;
        }

        .customer-input-group {
            margin-bottom: 15px;
        }

        .customer-input-group label {
            display: block;
            margin-bottom: 5px;
            color: #fff;
            font-size: 14px;
        }

        .customer-input-group input {
            width: 100%;
            padding: 12px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            color: #fff;
            font-size: 14px;
            box-sizing: border-box;
        }

        .customer-input-group input:focus {
            outline: none;
            border-color: #FF1493;
        }

        .customer-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .customer-buttons button {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .save-customer-btn {
            background: linear-gradient(135deg, #FF1493, #FF69B4);
            color: white;
        }

        .cancel-customer-btn {
            background: #333;
            color: #fff;
        }
    </style>
</head>
<body>


    <!-- 기기별 최적화 안내 -->
    <div class="device-notice" id="deviceNotice">
        📱 태블릿에서 최적의 경험을 제공합니다
    </div>

    <!-- 디자이너 로그인 화면 -->
    <div class="designer-login" id="designerLogin">
        <div class="login-card">
            <h2>🎨 디자이너 로그인</h2>
            
            <div class="info-notice">
                💡 <strong>중요 안내</strong><br>
                • 이 정보는 고객 관리용 <strong>고유 ID</strong>가 됩니다<br>
                • 핸드폰, 태블릿에서 <strong>동일하게 입력</strong>해주세요<br>
                • 한번 정하면 계속 사용하니 <strong>꼭 기억</strong>해주세요!
            </div>
            
            <div class="input-group">
                <label>👤 이름 (실명)</label>
                <input type="text" id="designerName" placeholder="김민수">
                <small>* 정확한 이름을 입력해주세요</small>
            </div>
            
            <div class="input-group">
                <label>📱 휴대폰 끝 4자리</label>
                <input type="number" id="designerPhone" placeholder="2709" maxlength="4">
                <small>* 개인 식별용 - 다른 사람과 겹치지 않도록</small>
            </div>
            
            <div class="input-group">
                <label>🔒 개인 비밀번호 (4자리)</label>
                <input type="password" id="designerPin" placeholder="••••" maxlength="4">
                <small>* 본인만 아는 4자리 숫자</small>
            </div>
            
            <button class="login-btn" onclick="checkDesignerLogin()">
                🔍 확인 후 로그인
            </button>
            
            <div id="loginResult" class="check-result"></div>
        </div>
    </div>

    <!-- 성별 선택 화면 - 세로로 긴 직사각형 -->
    <div class="gender-selection" id="genderSelection">
        <div class="gender-card male" onclick="selectGender('male')">
            <div class="gender-icon">♂</div>
            <div class="gender-title">남성</div>
            <div class="gender-subtitle">Men's Hairstyle</div>
        </div>
        
        <div class="gender-card female" onclick="selectGender('female')">
            <div class="gender-icon">♀</div>
            <div class="gender-title">여성</div>
            <div class="gender-subtitle">Women's Hairstyle</div>
        </div>
    </div>

    <!-- 메인 컨테이너 -->
    <div class="main-container" id="mainContainer">
        <!-- 헤더 -->
        <header class="header">
            <div class="logo-section">
                <button class="back-btn" onclick="backToGenderSelection()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M19 12H5M5 12L12 19M5 12L12 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span>뒤로</span>
                </button>
                
                <div class="logo">
                    <span style="color: #FF1493; font-size: 18px; font-weight: 700; letter-spacing: -0.5px;">HAIRGATOR</span>
                </div>
                
                <button class="hamburger-btn" onclick="toggleHamburgerMenu()" title="메뉴">
                    <div class="hamburger-icon">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                </button>
            </div>
            
            <!-- 네비게이션 탭 -->
            <nav class="nav-tabs" id="navTabs">
                <!-- 동적으로 생성됩니다 -->
            </nav>
        </header>

        <!-- 콘텐츠 영역 -->
        <main class="content" id="content">
            <!-- 카테고리별 섹션들이 동적으로 추가됩니다 -->
        </main>
    </div>

    <!-- 햄버거 메뉴 -->
    <div class="hamburger-overlay" id="hamburgerOverlay" onclick="closeHamburgerMenu()">
        <div class="hamburger-menu" onclick="event.stopPropagation()">
            <div class="menu-header">
                <h3 id="menuDesignerName">🎨 디자이너</h3>
                <button class="close-menu" onclick="closeHamburgerMenu()">×</button>
            </div>
            
            <div class="menu-items">
                <div class="menu-item" onclick="showCustomerSearch()">
                    <div class="menu-icon">👤</div>
                    <div class="menu-text">
                        <strong>고객 조회</strong>
                        <small>이전 방문 기록 확인</small>
                    </div>
                </div>
                
                <div class="menu-item" onclick="openAIFaceAnalysis()">
                    <div class="menu-icon">🔍</div>
                    <div class="menu-text">
                        <strong>AI 얼굴 분석</strong>
                        <small>얼굴형 맞춤 추천</small>
                    </div>
                </div>
                
                <div class="menu-item" onclick="closeApp()">
                    <div class="menu-icon">❌</div>
                    <div class="menu-text">
                        <strong>앱 닫기</strong>
                        <small>네이티브 앱으로 돌아가기</small>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 새 고객 추가 버튼 -->
    <button class="add-customer-btn" id="addCustomerBtn" onclick="showNewCustomerModal()">+</button>

    <!-- 이미지 모달 -->
    <div id="imageModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <img class="modal-image" id="modalImage" src="" alt="">
            <div class="modal-info">
                <h3 id="modalCode"></h3>
                <p id="modalName"></p>
                <button class="like-btn" id="likeBtn" onclick="toggleStyleLike()">❤️ 좋아요</button>
            </div>
        </div>
    </div>

    <!-- 동기화 상태 표시 -->
    <div class="sync-status" id="syncStatus">Firebase 연결 중...</div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

    <script>
        // 닫기 기능 - 뒤로가기로 앱 돌아가기
        function closeApp() {
            // 브라우저 뒤로가기로 네이티브 앱으로 돌아가기
            if (window.history.length > 1) {
                window.history.back();
            } else {
                // 뒤로갈 곳이 없으면 창 닫기 시도
                window.close();
            }
        }

        // Firebase 설정
        const firebaseConfig = {
            apiKey: "AIzaSyBeTlHZwgx36hR-F35QPtGG2xvE5EY0XmY",
            authDomain: "hairgatormenu-4a43e.firebaseapp.com",
            projectId: "hairgatormenu-4a43e",
            storageBucket: "hairgatormenu-4a43e.firebasestorage.app",
            messagingSenderId: "800038006875",
            appId: "1:800038006875:web:2a4de70e3a306986e0cf7e"
        };

        // Firebase 초기화
        let db;
        let firebaseConnected = false;
        
        try {
            firebase.initializeApp(firebaseConfig);
            db = firebase.firestore();
            firebaseConnected = true;
            console.log('✅ Firebase 연결 성공');
            updateSyncStatus('connected', '✅ Firebase 연결됨');
        } catch (error) {
            console.error('❌ Firebase 초기화 오류:', error);
            updateSyncStatus('disconnected', '❌ Firebase 연결 실패');
            firebaseConnected = false;
        }

        // 전역 변수
        let currentDesigner = null;
        let currentDesignerName = null;
        let currentGender = null;
        let currentCategory = null;
        let currentCustomer = null;
        let currentStyleCode = null;
        let currentStyleName = null;
        let hierarchyStructure = {};

        // 동기화 상태 업데이트
        function updateSyncStatus(status, message) {
            const syncStatus = document.getElementById('syncStatus');
            syncStatus.className = `sync-status ${status}`;
            syncStatus.textContent = message;
            syncStatus.style.display = 'block';
            
            if (status !== 'connected') {
                setTimeout(() => {
                    syncStatus.style.display = 'none';
                }, 5000);
            }
        }

        // 결과 표시 함수
        function showLoginResult(type, message) {
            const resultDiv = document.getElementById('loginResult');
            const colors = {
                success: '#28a745',
                warning: '#ffc107', 
                error: '#dc3545'
            };
            
            resultDiv.innerHTML = `
                <div style="
                    background: ${colors[type]}22; 
                    border: 2px solid ${colors[type]}; 
                    border-radius: 10px; 
                    padding: 15px; 
                    margin-top: 20px;
                    text-align: center;
                ">
                    ${message}
                </div>
            `;
        }

        // 디자이너 로그인 확인
        async function checkDesignerLogin() {
            const name = document.getElementById('designerName').value.trim();
            const phone = document.getElementById('designerPhone').value.trim();
            const pin = document.getElementById('designerPin').value.trim();
            
            if (!name || phone.length !== 4 || pin.length !== 4) {
                showLoginResult('error', '모든 정보를 정확히 입력해주세요<br>전화번호 4자리, 비밀번호 4자리');
                return;
            }
            
            const designerId = `${name}_${phone}`;
            
            try {
                const designerDoc = await db.collection('designers').doc(designerId).get();
                
                if (designerDoc.exists) {
                    const data = designerDoc.data();
                    
                    // 비밀번호 확인
                    if (data.pin === pin) {
                        // 로그인 성공
                        await db.collection('designers').doc(designerId).update({
                            lastLogin: new Date()
                        });
                        
                        startDesignerSession(designerId, name);
                    } else {
                        // 비밀번호 틀림
                        showLoginResult('error', '❌ 비밀번호가 틀렸습니다!');
                    }
                } else {
                    // 신규 등록
                    showLoginResult('warning', `
                        🆕 신규 디자이너 등록<br>
                        📝 ID: <strong>${designerId}</strong><br>
                        🔒 비밀번호: <strong>••••</strong> (설정됨)<br>
                        ⚠️ <strong>비밀번호를 잊어버리면 복구 불가능합니다!</strong><br>
                        <button onclick="confirmRegistration('${designerId}', '${name}', '${pin}')" 
                                style="background: #FF1493; color: white; border: none; padding: 10px 20px; border-radius: 10px; margin-top: 10px; cursor: pointer;">
                            ✅ 등록하고 시작
                        </button>
                    `);
                }
            } catch (error) {
                console.error('로그인 확인 오류:', error);
                showLoginResult('error', '로그인 확인 중 오류가 발생했습니다');
            }
        }

        // 신규 디자이너 등록 확인
        async function confirmRegistration(designerId, name, pin) {
            try {
                await db.collection('designers').doc(designerId).set({
                    name: name,
                    pin: pin,
                    createdAt: new Date(),
                    customerCount: 0,
                    lastLogin: new Date()
                });
                
                startDesignerSession(designerId, name);
            } catch (error) {
                console.error('등록 실패:', error);
                showLoginResult('error', '등록에 실패했습니다. 다시 시도해주세요.');
            }
        }

        // 디자이너 세션 시작
        function startDesignerSession(designerId, name) {
            currentDesigner = designerId;
            currentDesignerName = name;
            
            sessionStorage.setItem('currentDesigner', designerId);
            sessionStorage.setItem('designerName', name);
            
            showLoginResult('success', `🎉 ${name} 디자이너님 환영합니다!`);
            
            setTimeout(() => {
                document.getElementById('designerLogin').style.display = 'none';
                document.getElementById('genderSelection').classList.add('show');
                document.getElementById('addCustomerBtn').classList.add('show');
                
                // 햄버거 메뉴 헤더 업데이트
                document.getElementById('menuDesignerName').textContent = `🎨 ${name}`;
            }, 2000);
        }

        // 성별 선택
        function selectGender(gender) {
            console.log(`🎯 성별 선택: ${gender}`);
            currentGender = gender;
            document.getElementById('genderSelection').classList.remove('show');
            document.getElementById('mainContainer').classList.add('active');
            
            updateSyncStatus('updating', '📊 어드민 실시간 동기화 중...');
            loadHierarchyFromFirebaseOnly(gender);
        }

        // 성별 선택 화면으로 돌아가기
        function backToGenderSelection() {
            document.getElementById('genderSelection').classList.add('show');
            document.getElementById('mainContainer').classList.remove('active');
            currentGender = null;
            currentCategory = null;
            hierarchyStructure = {};
        }

        // 햄버거 메뉴 토글
        function toggleHamburgerMenu() {
            const overlay = document.getElementById('hamburgerOverlay');
            overlay.style.display = overlay.style.display === 'block' ? 'none' : 'block';
        }

        function closeHamburgerMenu() {
            document.getElementById('hamburgerOverlay').style.display = 'none';
        }

        // AI 얼굴 분석 열기
        function openAIFaceAnalysis() {
            window.open('https://hairgator-face.web.app', '_blank');
            closeHamburgerMenu();
        }

        // 고객 검색 모달 표시
        function showCustomerSearch() {
            const modalHTML = `
                <div class="customer-search-modal" id="customerSearchModal">
                    <div class="search-container">
                        <h3>👤 고객 조회</h3>
                        
                        <div class="search-input">
                            <input type="text" id="customerSearchInput" 
                                   placeholder="이름 또는 전화번호 끝자리로 검색">
                            <button onclick="searchCustomers()">🔍</button>
                        </div>
                        
                        <div id="customerSearchResults"></div>
                        
                        <button class="close-search" onclick="closeCustomerSearch()">닫기</button>
                    </div>
                </div>
            `;
            
            document.body.insertAdjacentHTML('beforeend', modalHTML);
            closeHamburgerMenu();
        }

        // 고객 검색
        async function searchCustomers() {
            const searchTerm = document.getElementById('customerSearchInput').value.trim();
            
            if (!searchTerm || !currentDesigner) return;
            
            try {
                const customersSnapshot = await db.collection('customers')
                    .where('designerId', '==', currentDesigner)
                    .get();
                
                const matchedCustomers = [];
                customersSnapshot.forEach(doc => {
                    const data = doc.data();
                    if (data.customerName.includes(searchTerm) || 
                        data.phoneLastDigits.includes(searchTerm)) {
                        matchedCustomers.push({id: doc.id, ...data});
                    }
                });
                
                showSearchResults(matchedCustomers);
            } catch (error) {
                console.error('고객 검색 오류:', error);
            }
        }

        // 검색 결과 표시
        function showSearchResults(customers) {
            const resultsDiv = document.getElementById('customerSearchResults');
            
            if (customers.length === 0) {
                resultsDiv.innerHTML = '<div class="no-results">검색 결과가 없습니다</div>';
                return;
            }
            
            const resultsHTML = customers.map(customer => `
                <div class="customer-result" onclick="showCustomerDetail('${customer.id}')">
                    <div class="customer-info">
                        <strong>${customer.customerName}</strong>
                        <span class="phone">(${customer.phoneLastDigits})</span>
                    </div>
                    <div class="visit-count">${customer.visitHistory?.length || 0}회 방문</div>
                </div>
            `).join('');
            
            resultsDiv.innerHTML = resultsHTML;
        }

        // 고객 상세 정보 표시
        async function showCustomerDetail(customerId) {
            try {
                const customerDoc = await db.collection('customers').doc(customerId).get();
                const customerData = customerDoc.data();
                
                const detailHTML = `
                    <div class="customer-detail-modal" id="customerDetailModal">
                        <div class="detail-container">
                            <div class="customer-header">
                                <h3>${customerData.customerName} (${customerData.phoneLastDigits})</h3>
                                <button onclick="closeCustomerDetail()">×</button>
                            </div>
                            
                            <div class="visit-history">
                                <h4>📅 방문 기록</h4>
                                ${renderVisitHistory(customerData.visitHistory || [])}
                            </div>
                            
                            <div class="favorite-styles">
                                <h4>❤️ 좋아하는 스타일</h4>
                                ${renderFavoriteStyles(customerData.favoriteStyles || [])}
                            </div>
                        </div>
                    </div>
                `;
                
                document.body.insertAdjacentHTML('beforeend', detailHTML);
            } catch (error) {
                console.error('고객 상세 조회 오류:', error);
            }
        }

        // 방문 기록 렌더링
        function renderVisitHistory(visitHistory) {
            if (visitHistory.length === 0) {
                return '<div class="no-history">방문 기록이 없습니다</div>';
            }
            
            return visitHistory.map(visit => `
                <div class="visit-item">
                    <div class="visit-date">${formatDate(visit.date)}</div>
                    <div class="visit-styles">
                        ${visit.selectedStyles.map(style => `
                            <div class="style-item ${style.isLiked ? 'liked' : ''}">
                                <span class="style-code">${style.code}</span>
                                <span class="style-name">${style.name}</span>
                                ${style.isLiked ? '<span class="heart">❤️</span>' : ''}
                            </div>
                        `).join('')}
                    </div>
                    ${visit.notes ? `<div class="visit-notes">"${visit.notes}"</div>` : ''}
                </div>
            `).join('');
        }

        // 즐겨찾는 스타일 렌더링
        function renderFavoriteStyles(favoriteStyles) {
            if (favoriteStyles.length === 0) {
                return '<div class="no-history">좋아하는 스타일이 없습니다</div>';
            }
            
            return favoriteStyles.map(style => `
                <div class="style-item liked">
                    <span class="style-code">${style.code}</span>
                    <span class="style-name">${style.name}</span>
                    <span class="heart">❤️</span>
                </div>
            `).join('');
        }

        // 날짜 포맷팅
        function formatDate(dateValue) {
            if (!dateValue) return '날짜 정보 없음';
            
            let date;
            if (dateValue.toDate) {
                date = dateValue.toDate(); // Firebase Timestamp
            } else {
                date = new Date(dateValue);
            }
            
            return date.toLocaleDateString('ko-KR', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
        }

        // 고객 검색 모달 닫기
        function closeCustomerSearch() {
            const modal = document.getElementById('customerSearchModal');
            if (modal) {
                modal.remove();
            }
        }

        // 고객 상세 모달 닫기
        function closeCustomerDetail() {
            const modal = document.getElementById('customerDetailModal');
            if (modal) {
                modal.remove();
            }
        }

        // 새 고객 모달 표시
        function showNewCustomerModal() {
            const modalHTML = `
                <div class="new-customer-modal" id="newCustomerModal">
                    <div class="new-customer-container">
                        <h3>✨ 새 고객 등록</h3>
                        
                        <div class="customer-input-group">
                            <label>👤 고객 이름</label>
                            <input type="text" id="newCustomerName" placeholder="홍길동">
                        </div>
                        
                        <div class="customer-input-group">
                            <label>📱 연락처 끝 4자리</label>
                            <input type="number" id="newCustomerPhone" placeholder="5678" maxlength="4">
                        </div>
                        
                        <div class="customer-buttons">
                            <button class="save-customer-btn" onclick="saveNewCustomer()">💾 저장</button>
                            <button class="cancel-customer-btn" onclick="closeNewCustomerModal()">취소</button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.insertAdjacentHTML('beforeend', modalHTML);
        }

        // 새 고객 저장
        async function saveNewCustomer() {
            const name = document.getElementById('newCustomerName').value.trim();
            const phone = document.getElementById('newCustomerPhone').value.trim();
            
            if (!name || phone.length !== 4) {
                alert('이름과 전화번호 끝 4자리를 정확히 입력해주세요');
                return;
            }
            
            const customerId = `${currentDesigner}_${name}_${phone}`;
            
            try {
                // 중복 체크
                const existingCustomer = await db.collection('customers').doc(customerId).get();
                
                if (existingCustomer.exists) {
                    alert('이미 등록된 고객입니다');
                    return;
                }
                
                // 새 고객 등록
                await db.collection('customers').doc(customerId).set({
                    designerId: currentDesigner,
                    designerName: currentDesignerName,
                    customerName: name,
                    phoneLastDigits: phone,
                    createdAt: new Date(),
                    visitHistory: [],
                    favoriteStyles: []
                });
                
                // 현재 고객 설정
                currentCustomer = {
                    id: customerId,
                    name: name,
                    phone: phone
                };
                
                sessionStorage.setItem('currentCustomer', JSON.stringify(currentCustomer));
                
                alert(`✅ ${name}(${phone}) 고객이 등록되었습니다!`);
                closeNewCustomerModal();
                
                // 디자이너 고객 수 업데이트
                await db.collection('designers').doc(currentDesigner).update({
                    customerCount: firebase.firestore.FieldValue.increment(1)
                });
                
            } catch (error) {
                console.error('고객 등록 오류:', error);
                alert('고객 등록에 실패했습니다');
            }
        }

        // 새 고객 모달 닫기
        function closeNewCustomerModal() {
            const modal = document.getElementById('newCustomerModal');
            if (modal) {
                modal.remove();
            }
        }

        // 스타일 좋아요 토글
        async function toggleStyleLike() {
            if (!currentCustomer || !currentStyleCode) {
                alert('먼저 고객을 선택해주세요');
                return;
            }
            
            try {
                const today = new Date();
                const visitData = {
                    date: today,
                    selectedStyles: [{
                        code: currentStyleCode,
                        name: currentStyleName,
                        isLiked: true,
                        timestamp: today
                    }]
                };
                
                // 고객 방문 기록에 추가
                await db.collection('customers').doc(currentCustomer.id).update({
                    visitHistory: firebase.firestore.FieldValue.arrayUnion(visitData),
                    favoriteStyles: firebase.firestore.FieldValue.arrayUnion({
                        code: currentStyleCode,
                        name: currentStyleName
                    })
                });
                
                // 좋아요 버튼 업데이트
                const likeBtn = document.getElementById('likeBtn');
                likeBtn.classList.add('liked');
                likeBtn.textContent = '💖 좋아요 완료!';
                
                alert('❤️ 스타일이 저장되었습니다!');
                
            } catch (error) {
                console.error('좋아요 저장 오류:', error);
                alert('저장에 실패했습니다');
            }
        }

        // Firebase에서만 계층 구조 로드
        async function loadHierarchyFromFirebaseOnly(gender) {
            console.log(`=== 🔥 Firebase 실시간 동기화: ${gender} ===`);
            
            const navTabs = document.getElementById('navTabs');
            navTabs.innerHTML = '<div class="loading"><div class="spinner"></div></div>';
            
            if (!firebaseConnected) {
                console.log('❌ Firebase 연결 실패');
                showAdminInitializationRequired('Firebase 연결이 필요합니다. 페이지를 새로고침해주세요.');
                updateSyncStatus('disconnected', '❌ Firebase 연결 실패');
                return;
            }

            try {
                console.log('📊 어드민과 동일한 category_hierarchy 실시간 쿼리...');
                
                const hierarchySnapshot = await db.collection('category_hierarchy')
                    .where('gender', '==', gender)
                    .get();
                
                console.log(`📋 실시간 쿼리 결과: ${hierarchySnapshot.size}개 문서`);
                
                if (hierarchySnapshot.empty) {
                    console.log('⚠️ category_hierarchy가 비어있음 - 어드민 초기화 필요');
                    showAdminInitializationRequired('어드민에서 "Excel 데이터로 Firebase 초기화" 버튼을 먼저 클릭해주세요.');
                    updateSyncStatus('disconnected', '⚠️ 어드민 초기화 필요');
                    return;
                }
                
                // 어드민과 동일한 구조 생성
                const mainCategories = {};
                let lastUpdateTime = null;
                let totalDocs = 0;
                
                hierarchySnapshot.forEach(doc => {
                    const data = doc.data();
                    console.log('📄 실시간 동기화된 문서:', data);
                    
                    const mainCat = data.mainCategory;
                    const subCat = data.subCategory;
                    
                    if (!mainCategories[mainCat]) {
                        mainCategories[mainCat] = [];
                    }
                    if (!mainCategories[mainCat].includes(subCat)) {
                        mainCategories[mainCat].push(subCat);
                    }
                    
                    if (data.updatedAt && (!lastUpdateTime || data.updatedAt.toDate() > lastUpdateTime)) {
                        lastUpdateTime = data.updatedAt.toDate();
                    }
                    
                    totalDocs++;
                });
                
                console.log('✅ 어드민과 100% 동일한 실시간 구조 생성:', mainCategories);
                
                hierarchyStructure[gender] = mainCategories;
                
                // 대분류 탭 렌더링
                renderMainCategoryTabs(Object.keys(mainCategories));
                
                // 첫 번째 카테고리 자동 로드
                const firstCategory = Object.keys(mainCategories)[0];
                if (firstCategory) {
                    currentCategory = firstCategory;
                    loadStylesFromHierarchyRealtime(firstCategory);
                }
                
                const timeStr = lastUpdateTime ? lastUpdateTime.toLocaleString('ko-KR') : '방금전';
                updateSyncStatus('connected', `✅ 실시간 동기화 완료 (${timeStr}) - ${totalDocs}개 문서`);
                
            } catch (error) {
                console.error('❌ 실시간 동기화 오류:', error);
                
                if (error.code === 'failed-precondition') {
                    showAdminInitializationRequired('Firebase 인덱스가 생성 중입니다. 잠시 후 다시 시도해주세요.');
                    updateSyncStatus('updating', '🔄 Firebase 인덱스 생성 중...');
                } else {
                    showAdminInitializationRequired(`실시간 동기화 실패: ${error.message}`);
                    updateSyncStatus('disconnected', '❌ 실시간 동기화 실패');
                }
            }
        }

        // 어드민 초기화 필요 메시지 표시
        function showAdminInitializationRequired(message) {
            const navTabs = document.getElementById('navTabs');
            const content = document.getElementById('content');
            
            navTabs.innerHTML = `
                <div style="color: #FF69B4; padding: 15px 25px; text-align: center; width: 100%;">
                    ⚠️ 어드민 초기화 필요
                </div>
            `;
            
            content.innerHTML = `
                <div class="empty-state">
                    <div class="empty-state-icon">🔧</div>
                    <div class="empty-state-title">어드민 초기화가 필요합니다</div>
                    <div class="empty-state-message">
                        ${message}<br><br>
                        <strong>해결 방법:</strong><br>
                        1. 어드민 페이지로 이동<br>
                        2. "🚀 Excel 데이터로 Firebase 초기화" 버튼 클릭<br>
                        3. 이 페이지 새로고침
                    </div>
                </div>
            `;
        }

        // 대분류 탭 렌더링 (어드민 순서 고정)
        function renderMainCategoryTabs(mainCategories) {
            const navTabs = document.getElementById('navTabs');
            navTabs.innerHTML = '';
            
            if (!mainCategories || mainCategories.length === 0) {
                navTabs.innerHTML = '<div style="color: #666; padding: 20px;">카테고리를 불러올 수 없습니다.</div>';
                return;
            }
            
            // 고정된 순서 정의 (어드민과 동일)
            const categoryOrder = {
                male: ['SIDE FRINGE', 'SIDE PART', 'FRINGE UP', 'PUSHED BACK', 'BUZZ', 'CROP', 'MOHICAN'],
                female: ['LONG', 'SEMI LONG', 'MEDIUM', 'BOB', 'SHORT']
            };
            
            const orderedCategories = categoryOrder[currentGender] || mainCategories;
            
            orderedCategories.forEach((mainCategory, index) => {
                if (mainCategories.includes(mainCategory)) {
                    const tab = document.createElement('div');
                    tab.className = index === 0 ? 'nav-tab active' : 'nav-tab';
                    tab.dataset.category = mainCategory;
                    tab.textContent = mainCategory;
                    tab.onclick = () => switchCategory(mainCategory);
                    navTabs.appendChild(tab);
                }
            });
        }

        // 카테고리 전환
        function switchCategory(categoryId) {
            if (categoryId === currentCategory) return;
            
            console.log(`🔄 카테고리 전환: ${categoryId}`);
            
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
                if (tab.dataset.category === categoryId) {
                    tab.classList.add('active');
                }
            });
            
            currentCategory = categoryId;
            loadStylesFromHierarchyRealtime(categoryId);
        }

        // 헤어스타일 실시간 로드
        async function loadStylesFromHierarchyRealtime(mainCategory) {
            console.log(`=== 🎨 헤어스타일 실시간 로드: ${currentGender}, ${mainCategory} ===`);
            
            const content = document.getElementById('content');
            content.innerHTML = '<div class="loading"><div class="spinner"></div></div>';
            
            if (!firebaseConnected) {
                console.log('❌ Firebase 연결 없음');
                showEmptyState('Firebase 연결이 필요합니다');
                updateSyncStatus('disconnected', '❌ Firebase 연결 필요');
                return;
            }

            try {
                const subCategories = hierarchyStructure[currentGender]?.[mainCategory] || [];
                console.log(`📂 실시간 중분류 목록: ${subCategories.join(', ')}`);
                
                if (subCategories.length === 0) {
                    console.log('⚠️ 중분류가 없음');
                    showEmptyState('중분류가 설정되지 않았습니다. 어드민에서 확인해주세요.');
                    updateSyncStatus('disconnected', '⚠️ 중분류 없음');
                    return;
                }

                let allStyles = {};
                let foundData = false;
                let totalStyles = 0;
                
                console.log('📊 실시간 스타일 데이터 로드 중...');
                
                for (const subCategory of subCategories) {
                    const categoryPath = `${currentGender}_${mainCategory}_${subCategory}`;
                    console.log(`🔍 실시간 categoryPath 조회: ${categoryPath}`);
                    
                    try {
                        const pathSnapshot = await db.collection('hairstyles')
                            .where('categoryPath', '==', categoryPath)
                            .get();
                        
                        if (!pathSnapshot.empty) {
                            allStyles[subCategory] = [];
                            pathSnapshot.forEach(doc => {
                                const style = doc.data();
                                allStyles[subCategory].push({
                                    ...style,
                                    id: doc.id
                                });
                                totalStyles++;
                            });
                            foundData = true;
                            console.log(`✅ ${subCategory}: ${pathSnapshot.size}개 스타일 발견`);
                        } else {
                            console.log(`📄 ${subCategory}: 스타일 없음`);
                        }
                    } catch (error) {
                        console.log(`⚠️ categoryPath 쿼리 실패 (${categoryPath}):`, error.message);
                    }
                }
                
                if (foundData && Object.keys(allStyles).length > 0) {
                    console.log('🎨 실시간 스타일 데이터 렌더링:', allStyles);
                    renderCategoryRealtime({
                        description: getMainCategoryDescription(mainCategory),
                        styles: allStyles
                    });
                    updateSyncStatus('connected', `✅ ${totalStyles}개 스타일 실시간 로드 완료`);
                } else {
                    console.log('📄 실시간 스타일 데이터 없음');
                    renderEmptyStylesRealtime(mainCategory, subCategories);
                    updateSyncStatus('connected', '📄 등록된 스타일이 없습니다 (실시간 확인 완료)');
                }
                
            } catch (error) {
                console.error('❌ 실시간 헤어스타일 로드 오류:', error);
                showEmptyState('실시간 스타일 데이터를 불러올 수 없습니다');
                updateSyncStatus('disconnected', '❌ 실시간 로드 실패: ' + error.message);
            }
        }

        // 대분류 설명 가져오기
        function getMainCategoryDescription(mainCategory) {
            const descriptions = {
                'SIDE FRINGE': '사이드프린지는 살짝 볼륨이 있으면서 앞으로 떨어지는 스타일과 앞머리 숱을 줄여 소프트한 시스루 느낌을 다양하게 표현할 수 있습니다. M자 이마와 넓은 이마를 커버하면서 볼륨과 플랫, 웨이브와 스트레이트의 구성 요소를 디테일하게 표현하는 것이 스타일링의 핵심 포인트입니다.',
                'SIDE PART': '사이드 파트는 클래식함과 모던함의 대명사로 스타일링에 따라 원하는 이미지를 자유롭게 표현할 수 있습니다. 가르마를 기준으로 단순히 넘어가는 스타일을 넘어 개인의 특성과 트렌드에 맞춰 고급한 헤어스타일을 표현하는 것이 매우 중요합니다.',
                'FRINGE UP': '프린지 업은 흔히 아이비리그 컷이라고 하여, 이마를 적극적으로 드러내어 남성적인 이미지를 어필하기 유리한 스타일입니다. 다운펌을 통해 뒷머리와 앞머리를 정리하는 것이 스타일링의 특성상 트렌드에 얽매이지 말고 나름의 포인트와 특색으로 관리하는 것이 중요합니다.',
                'PUSHED BACK': '푸시드 백은 앞머리 부분의 볼륨감을 강조한 스타일로써, 뒷부분으로 넘기면서 뒤로 갈수록 볼륨이 적어지는 것이 특징인 스타일입니다. 모발의 길이가 중간 정도 이상인 분들에게 가장 적합하며, 정교하고 섬세한 길이 조절을 통해 고급스러운 이미지를 유지할 수 있습니다.',
                'BUZZ': '버즈컷은 흔히 반삭이라고 하여 클리퍼의 길이와 헤어 스타일에 따라 다양한 스타일을 연출할 수 있습니다. 정교하고 섬세한 길이 조절이 가장 중요하지만 강함이 아닌 곡선미가 주는 특성인 개성을 강점으로 할 수 있습니다.',
                'CROP': '크롭컷은 매우 짧은 라운드 형태로 깔끔하면서도 세련된 남성미를 강조한 스타일입니다. 앞머리를 짧게 하여 깔끔한 인상을 주며, 양쪽과 뒷머리의 이미지를 단정하게 강조하여 모발의 길이와 절단에 따라 다양한 이미지를 연출할 수 있습니다.',
                'MOHICAN': '모히칸은 옆머리를 짧게 하고 윗머리에 앞머리에서 뒷머리로 이어지는 라인을 표현하여, 둥근 얼굴형을 보완할 수 있는 개성이 남다른 스타일입니다.',
                'LONG': '롱 헤어는 여성스러움과 우아함을 동시에 표현할 수 있는 대표적인 스타일입니다. 다양한 연출이 가능하며 개인의 취향에 따라 웨이브나 스트레이트 등으로 변화를 줄 수 있습니다.',
                'SEMI LONG': '세미 롱 헤어는 롱과 미디엄의 중간 길이로, 여성스러움을 유지하면서도 관리가 용이한 실용적인 스타일입니다.',
                'MEDIUM': '미디엄 헤어는 관리의 편의성과 스타일링의 다양성을 모두 갖춘 실용적인 길이입니다. 직장인부터 학생까지 다양한 연령대에 적합합니다.',
                'BOB': '밥 헤어는 턱선 근처의 깔끔한 라인이 특징으로, 모던하고 세련된 느낌을 연출할 수 있는 클래식한 스타일입니다.',
                'SHORT': '숏 헤어는 세련되고 시크한 분위기를 연출하며, 얼굴형을 또렷하게 부각시키는 스타일입니다. 관리가 쉽고 활동적인 이미지를 표현할 수 있습니다.'
            };
            
            return descriptions[mainCategory] || `${mainCategory} 스타일에 대한 설명입니다.`;
        }

        // 카테고리 실시간 렌더링
        function renderCategoryRealtime(categoryData) {
            const content = document.getElementById('content');
            
            if (!categoryData || !categoryData.styles) {
                showEmptyState('실시간 카테고리 데이터를 불러올 수 없습니다');
                return;
            }

            const lengthTypes = Object.keys(categoryData.styles);
            
            if (lengthTypes.length === 0) {
                showEmptyState('등록된 스타일이 없습니다 (실시간 확인 완료)');
                return;
            }
            
            let html = `
                <div class="category-section active">
                    <div class="category-description">${categoryData.description}</div>
                    
                    <div class="length-tabs">
            `;

            const orderedLengthTypes = hierarchyStructure[currentGender]?.[currentCategory] || lengthTypes;
            orderedLengthTypes.forEach((lengthType, index) => {
                if (lengthTypes.includes(lengthType)) {
                    const isActive = index === 0 ? 'active' : '';
                    html += `<div class="length-tab ${isActive}" data-length="${lengthType}" onclick="switchLengthTab('${lengthType}')">${lengthType}</div>`;
                }
            });

            html += `</div>`;

            const orderedLengthList = hierarchyStructure[currentGender]?.[currentCategory] || Object.keys(categoryData.styles);
            const primaryLengthType = orderedLengthList[0];
            
            for (const lengthType of orderedLengthList) {
                if (!categoryData.styles[lengthType]) continue;
                
                const styles = categoryData.styles[lengthType];
                const isActive = lengthType === primaryLengthType ? 'active' : '';
                
                html += `<div class="length-section ${isActive}" data-length="${lengthType}">`;

                if (!styles || styles.length === 0) {
                    html += `
                        <div class="empty-state">
                            <div class="empty-state-icon">✂️</div>
                            <div class="empty-state-title">${lengthType}</div>
                            <div class="empty-state-message">해당 앞머리 길이에 대한 스타일이 없습니다.<br>어드민에서 스타일을 추가해주세요.</div>
                        </div>
                    `;
                } else {
                    html += `<div class="hairstyle-grid">`;
                    
                    const sortedStyles = styles.sort((a, b) => {
                        const codeA = a.code || '';
                        const codeB = b.code || '';
                        return codeA.localeCompare(codeB);
                    });
                    
                    sortedStyles.forEach(style => {
                        const imageUrl = style.imageUrl || generatePlaceholderImage(style.name);
                        
                        html += `
                            <div class="hairstyle-card" onclick="openModal('${style.code || '코드없음'}', '${style.name || '이름없음'}', '${style.imageUrl || ''}')">
                                <img class="hairstyle-image" src="${imageUrl}" alt="${style.name || '이름없음'}" 
                                     onerror="this.src='${generatePlaceholderImage(style.name || '이름없음')}'">
                                <div class="hairstyle-info">
                                    <div class="hairstyle-code">${style.code || '코드없음'}</div>
                                    <div class="hairstyle-name">${style.name || '이름없음'}</div>
                                </div>
                            </div>
                        `;
                    });
                    
                    html += `</div>`;
                }

                html += `</div>`;
            }

            html += '</div>';
            content.innerHTML = html;
        }

        // 빈 스타일 실시간 렌더링
        function renderEmptyStylesRealtime(mainCategory, subCategories) {
            const content = document.getElementById('content');
            
            let html = `
                <div class="category-section active">
                    <div class="category-description">${getMainCategoryDescription(mainCategory)}</div>
                    
                    <div class="length-tabs">
            `;

            const orderedSubCategories = hierarchyStructure[currentGender]?.[mainCategory] || subCategories;
            orderedSubCategories.forEach((subCategory, index) => {
                const isActive = index === 0 ? 'active' : '';
                html += `<div class="length-tab ${isActive}" data-length="${subCategory}" onclick="switchLengthTab('${subCategory}')">${subCategory}</div>`;
            });
            
            html += `</div>`;

            const orderedEmptyCategories = hierarchyStructure[currentGender]?.[mainCategory] || subCategories;
            orderedEmptyCategories.forEach((subCategory, index) => {
                const isActive = index === 0 ? 'active' : '';
                html += `
                    <div class="length-section ${isActive}" data-length="${subCategory}">
                        <div class="empty-state">
                            <div class="empty-state-icon">✂️</div>
                            <div class="empty-state-title">${subCategory}</div>
                            <div class="empty-state-message">등록된 스타일이 없습니다.<br>어드민에서 스타일을 추가해주세요.</div>
                        </div>
                    </div>
                `;
            });

            html += '</div>';
            content.innerHTML = html;
        }

        // 빈 상태 표시
        function showEmptyState(message) {
            const content = document.getElementById('content');
            content.innerHTML = `
                <div class="empty-state">
                    <div class="empty-state-icon">⚠️</div>
                    <div class="empty-state-title">데이터가 없습니다</div>
                    <div class="empty-state-message">${message}</div>
                </div>
            `;
        }

        // 플레이스홀더 이미지 생성
        function generatePlaceholderImage(text) {
            const encodedText = encodeURIComponent(text || '이미지 준비중');
            return `data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="200" height="267" viewBox="0 0 200 267"%3E%3Crect width="200" height="267" fill="%23222"%3E%3C/rect%3E%3Ctext x="50%25" y="50%25" dominant-baseline="middle" text-anchor="middle" fill="%23666" font-family="Arial" font-size="12"%3E${encodedText}%3C/text%3E%3C/svg%3E`;
        }

        // 앞머리 길이 탭 전환
        function switchLengthTab(lengthType) {
            document.querySelectorAll('.length-tab').forEach(tab => {
                tab.classList.remove('active');
                if (tab.dataset.length === lengthType) {
                    tab.classList.add('active');
                }
            });

            document.querySelectorAll('.length-section').forEach(section => {
                section.classList.remove('active');
                if (section.dataset.length === lengthType) {
                    section.classList.add('active');
                }
            });
        }

        // 모달 초기화
        function initializeModal() {
            const modal = document.getElementById('imageModal');
            const span = document.getElementsByClassName('close')[0];

            span.onclick = function() {
                modal.style.display = 'none';
            }

            window.onclick = function(event) {
                if (event.target == modal) {
                    modal.style.display = 'none';
                }
            }
        }

        // 모달 열기
        function openModal(code, name, imageUrl) {
            const modal = document.getElementById('imageModal');
            const modalImage = document.getElementById('modalImage');
            const modalCode = document.getElementById('modalCode');
            const modalName = document.getElementById('modalName');
            const likeBtn = document.getElementById('likeBtn');

            const finalImageUrl = imageUrl || generatePlaceholderImage(name);
            
            modalImage.src = finalImageUrl;
            modalCode.textContent = code;
            modalName.textContent = name;
            
            // 현재 스타일 정보 저장
            currentStyleCode = code;
            currentStyleName = name;
            
            // 좋아요 버튼 초기화
            likeBtn.classList.remove('liked');
            likeBtn.textContent = '❤️ 좋아요';
            
            modal.style.display = 'block';
        }

        // 기기별 최적화 안내 표시
        function showDeviceOptimizationNotice() {
            const notice = document.getElementById('deviceNotice');
            const screenWidth = window.innerWidth;
            
            if (screenWidth < 768) {
                // 핸드폰: 태블릿 권장 안내
                notice.innerHTML = '📱 태블릿에서 최적의 경험을 제공합니다';
                notice.className = 'device-notice show';
                
                // 5초 후 자동 숨김
                setTimeout(() => {
                    notice.classList.remove('show');
                }, 5000);
                
            } else if (screenWidth >= 768) {
                // 태블릿: 최적화 완료 안내
                notice.innerHTML = '🎉 태블릿 최적화 모드로 실행 중입니다';
                notice.className = 'device-notice show';
                
                // 3초 후 자동 숨김
                setTimeout(() => {
                    notice.classList.remove('show');
                }, 3000);
            }
        }

        // PWA 서비스 워커 등록
        function registerServiceWorker() {
            if ('serviceWorker' in navigator) {
                window.addEventListener('load', function() {
                    navigator.serviceWorker.register('/service-worker.js')
                        .then(function(registration) {
                            console.log('🎉 PWA 서비스 워커 등록 성공:', registration.scope);
                        })
                        .catch(function(error) {
                            console.log('❌ PWA 서비스 워커 등록 실패:', error);
                        });
                });
            }
        }

        // 팝업 형태 반응형 처리
        function initializeMobileApp() {
            // PWA 서비스 워커 등록
            registerServiceWorker();
            
            // 기기별 최적화 안내 표시
            showDeviceOptimizationNotice();
            
            // 현재 화면 방향과 크기 확인
            const isPortrait = window.innerHeight > window.innerWidth;
            const screenWidth = window.innerWidth;
            const deviceType = screenWidth >= 768 ? 'tablet' : 'phone';
            
            console.log('📱 PWA 반응형 모드:', {
                width: window.innerWidth,
                height: window.innerHeight,
                orientation: isPortrait ? 'portrait' : 'landscape',
                deviceType: deviceType
            });
            
            // 방향 변화 감지
            window.addEventListener('orientationchange', function() {
                setTimeout(function() {
                    const newIsPortrait = window.innerHeight > window.innerWidth;
                    console.log('🔄 방향 변경:', newIsPortrait ? 'portrait' : 'landscape');
                    hideAddressBar();
                    
                    // 방향 변경 시 기기별 안내 다시 표시
                    setTimeout(showDeviceOptimizationNotice, 500);
                }, 100);
            });
        }
        
        // iOS Safari 주소창 숨기기
        function hideAddressBar() {
            setTimeout(function() {
                window.scrollTo(0, 1);
            }, 0);
        }
        
        // 확대/축소 완전 방지
        document.addEventListener('gesturestart', function(e) {
            e.preventDefault();
        });
        
        document.addEventListener('gesturechange', function(e) {
            e.preventDefault();
        });
        
        document.addEventListener('gestureend', function(e) {
            e.preventDefault();
        });
        
        // 더블탭 줌 방지
        let lastTouchEnd = 0;
        document.addEventListener('touchend', function(event) {
            const now = (new Date()).getTime();
            if (now - lastTouchEnd <= 300) {
                event.preventDefault();
            }
            lastTouchEnd = now;
        }, false);
        
        // 스와이프 새로고침 방지 (iOS Safari)
        let startY = 0;
        document.addEventListener('touchstart', function(e) {
            startY = e.touches[0].pageY;
        });
        
        document.addEventListener('touchmove', function(e) {
            const y = e.touches[0].pageY;
            // 페이지 최상단에서 아래로 스와이프할 때 새로고침 방지
            if (startY <= 10 && y > startY) {
                e.preventDefault();
            }
        }, { passive: false });

        // 초기화
        document.addEventListener('DOMContentLoaded', function() {
            initializeModal();
            initializeMobileApp();
            hideAddressBar();
            console.log('🚀 HAIRGATOR 완성본 로드 완료!');
        });

        // 페이지 로드 시 초기화
        window.addEventListener('load', function() {
            console.log('🎉 HAIRGATOR 디자이너 로그인 + 고객 관리 시스템 준비 완료!');
        });
        
        console.log('🚀 HAIRGATOR 완전체 시작');
    </script>
</body>
</html>
